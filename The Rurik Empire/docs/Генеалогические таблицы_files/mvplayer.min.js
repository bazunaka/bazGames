(()=>{var t={684:t=>{t.exports={pw:["c5xwzp.moe.video","c5xwzp.moe.video","c5xwzp.moe.video","xt4jgx.moe.video","xt4jgx.moe.video","xt4jgx.moe.video","1tdmcg.moe.video","1tdmcg.moe.video","1tdmcg.moe.video","4eoaos.moe.video","4eoaos.moe.video","4eoaos.moe.video","dnptse.moe.video","dnptse.moe.video","dnptse.moe.video","78vpke.moe.video","78vpke.moe.video","78vpke.moe.video","ttqnz5.moe.video","ttqnz5.moe.video","ttqnz5.moe.video","gvtb20.moe.video","gvtb20.moe.video","gvtb20.moe.video","gdszgo.moe.video","gdszgo.moe.video","gdszgo.moe.video","wygo28.moe.video","wygo28.moe.video","wygo28.moe.video","4ubsnp.moe.video","4ubsnp.moe.video","4ubsnp.moe.video","c778bd.moe.video","c778bd.moe.video","c778bd.moe.video","e7e41c.moe.video","e7e41c.moe.video","e7e41c.moe.video","f03d91.moe.video","f03d91.moe.video","f03d91.moe.video","c2bc35.moe.video","c2bc35.moe.video","c2bc35.moe.video","9a34b7.moe.video","9a34b7.moe.video","9a34b7.moe.video","1ed6b9.moe.video","1ed6b9.moe.video","1ed6b9.moe.video","24c4f0.moe.video","24c4f0.moe.video","24c4f0.moe.video","b9f9be.moe.video","b9f9be.moe.video","b9f9be.moe.video","54fcb2.moe.video","54fcb2.moe.video","54fcb2.moe.video","915c4b.moe.video","915c4b.moe.video","915c4b.moe.video","a2fbf7.moe.video","a2fbf7.moe.video","a2fbf7.moe.video","6f6a65.moe.video","6f6a65.moe.video","6f6a65.moe.video","6c87e9.moe.video","6c87e9.moe.video","6c87e9.moe.video","e10a9f.moe.video","e10a9f.moe.video","e10a9f.moe.video","k2c5j4.moe.video","k2c5j4.moe.video","k2c5j4.moe.video","t9srvz.moe.video","t9srvz.moe.video","t9srvz.moe.video","8jby4o.moe.video","8jby4o.moe.video","8jby4o.moe.video","6ck3i9.moe.video","6ck3i9.moe.video","6ck3i9.moe.video","lvp3fp.moe.video","lvp3fp.moe.video","lvp3fp.moe.video","mr92ec.moe.video","mr92ec.moe.video","mr92ec.moe.video","5cb01e.moe.video","5cb01e.moe.video","5cb01e.moe.video","bd399d.moe.video","bd399d.moe.video","bd399d.moe.video","4f4e15.moe.video","4f4e15.moe.video","4f4e15.moe.video","b3be2c.moe.video","b3be2c.moe.video","b3be2c.moe.video","06dc7a.moe.video","06dc7a.moe.video","06dc7a.moe.video","d9a4a6.moe.video","d9a4a6.moe.video","d9a4a6.moe.video","830e5d.moe.video","830e5d.moe.video","830e5d.moe.video","14aef7.moe.video","14aef7.moe.video","14aef7.moe.video","7b04f7.moe.video","7b04f7.moe.video","7b04f7.moe.video","2e8e3a.moe.video","2e8e3a.moe.video","2e8e3a.moe.video","6dcf51.moe.video","6dcf51.moe.video","6dcf51.moe.video","b3b4cd.moe.video","b3b4cd.moe.video","b3b4cd.moe.video","a46ccb.moe.video","a46ccb.moe.video","a46ccb.moe.video","b46b6b.moe.video","b46b6b.moe.video","b46b6b.moe.video","d9fa3d.moe.video","d9fa3d.moe.video","d9fa3d.moe.video","2b0eb3.moe.video","2b0eb3.moe.video","2b0eb3.moe.video","baa324.moe.video","baa324.moe.video","baa324.moe.video","fc3b33.moe.video","fc3b33.moe.video","fc3b33.moe.video","ab288b.moe.video","ab288b.moe.video","ab288b.moe.video","1b5b39.moe.video","1b5b39.moe.video","1b5b39.moe.video","ae92f1.moe.video","ae92f1.moe.video","ae92f1.moe.video","fbb652.moe.video","fbb652.moe.video","fbb652.moe.video","f7a8fd.moe.video","f7a8fd.moe.video","f7a8fd.moe.video","7b2e9b.moe.video","7b2e9b.moe.video","7b2e9b.moe.video","a7efd8.moe.video","a7efd8.moe.video","a7efd8.moe.video","df77e0.moe.video","df77e0.moe.video","df77e0.moe.video","26fd7b.moe.video","26fd7b.moe.video","26fd7b.moe.video","1b7afd.moe.video","1b7afd.moe.video","1b7afd.moe.video","f8fb5f.moe.video","f8fb5f.moe.video","f8fb5f.moe.video","6d6f0b.moe.video","6d6f0b.moe.video","6d6f0b.moe.video","18f6fa.moe.video","18f6fa.moe.video","18f6fa.moe.video","1d90db.moe.video","1d90db.moe.video","1d90db.moe.video","3d1efa.moe.video","3d1efa.moe.video","3d1efa.moe.video","5ce83a.moe.video","5ce83a.moe.video","5ce83a.moe.video","f83bc0.moe.video","f83bc0.moe.video","f83bc0.moe.video","2df598.moe.video","2df598.moe.video","2df598.moe.video"]}},772:t=>{"use strict";function e(t){return i(t,[])}function n(t,e){if("number"!=typeof e)throw new TypeError("Expected the depth to be a number");return o(t,[],e)}function i(t,e){for(var n=0;n<t.length;n++){var o=t[n];Array.isArray(o)?i(o,e):e.push(o)}return e}function o(t,e,n){n--;for(var i=0;i<t.length;i++){var r=t[i];n>-1&&Array.isArray(r)?o(r,e,n):e.push(r)}return e}t.exports=function(t){if(!Array.isArray(t))throw new TypeError("Expected value to be an array");return e(t)},t.exports.from=e,t.exports.depth=function(t,e){if(!Array.isArray(t))throw new TypeError("Expected value to be an array");return n(t,e)},t.exports.fromDepth=n},704:(t,e)=>{"use strict";e.byteLength=function(t){var e=s(t),n=e[0],i=e[1];return 3*(n+i)/4-i},e.toByteArray=function(t){var e,n,r=s(t),a=r[0],d=r[1],c=new o(function(t,e,n){return 3*(e+n)/4-n}(0,a,d)),p=0,u=d>0?a-4:a;for(n=0;n<u;n+=4)e=i[t.charCodeAt(n)]<<18|i[t.charCodeAt(n+1)]<<12|i[t.charCodeAt(n+2)]<<6|i[t.charCodeAt(n+3)],c[p++]=e>>16&255,c[p++]=e>>8&255,c[p++]=255&e;2===d&&(e=i[t.charCodeAt(n)]<<2|i[t.charCodeAt(n+1)]>>4,c[p++]=255&e);1===d&&(e=i[t.charCodeAt(n)]<<10|i[t.charCodeAt(n+1)]<<4|i[t.charCodeAt(n+2)]>>2,c[p++]=e>>8&255,c[p++]=255&e);return c},e.fromByteArray=function(t){for(var e,i=t.length,o=i%3,r=[],a=16383,s=0,c=i-o;s<c;s+=a)r.push(d(t,s,s+a>c?c:s+a));1===o?(e=t[i-1],r.push(n[e>>2]+n[e<<4&63]+"==")):2===o&&(e=(t[i-2]<<8)+t[i-1],r.push(n[e>>10]+n[e>>4&63]+n[e<<2&63]+"="));return r.join("")};for(var n=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0;a<64;++a)n[a]=r[a],i[r.charCodeAt(a)]=a;function s(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function d(t,e,i){for(var o,r,a=[],s=e;s<i;s+=3)o=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),a.push(n[(r=o)>>18&63]+n[r>>12&63]+n[r>>6&63]+n[63&r]);return a.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},592:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i="undefined"!=typeof window&&void 0!==window.document,o="object"===("undefined"==typeof self?"undefined":n(self))&&self.constructor&&"DedicatedWorkerGlobalScope"===self.constructor.name,r="undefined"!=typeof process&&null!=process.versions&&null!=process.versions.node;e.isBrowser=i,e.isWebWorker=o,e.isNode=r,e.isJsDom=function(){return"undefined"!=typeof window&&"nodejs"===window.name||navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")}},296:(t,e,n)=>{"use strict";const i=n(704),o=n(404),r="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=d,e.SlowBuffer=function(t){+t!=t&&(t=0);return d.alloc(+t)},e.INSPECT_MAX_BYTES=50;const a=2147483647;function s(t){if(t>a)throw new RangeError('The value "'+t+'" is invalid for option "size"');const e=new Uint8Array(t);return Object.setPrototypeOf(e,d.prototype),e}function d(t,e,n){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return u(t)}return c(t,e,n)}function c(t,e,n){if("string"==typeof t)return function(t,e){"string"==typeof e&&""!==e||(e="utf8");if(!d.isEncoding(e))throw new TypeError("Unknown encoding: "+e);const n=0|v(t,e);let i=s(n);const o=i.write(t,e);o!==n&&(i=i.slice(0,o));return i}(t,e);if(ArrayBuffer.isView(t))return function(t){if(Y(t,Uint8Array)){const e=new Uint8Array(t);return h(e.buffer,e.byteOffset,e.byteLength)}return l(t)}(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(Y(t,ArrayBuffer)||t&&Y(t.buffer,ArrayBuffer))return h(t,e,n);if("undefined"!=typeof SharedArrayBuffer&&(Y(t,SharedArrayBuffer)||t&&Y(t.buffer,SharedArrayBuffer)))return h(t,e,n);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');const i=t.valueOf&&t.valueOf();if(null!=i&&i!==t)return d.from(i,e,n);const o=function(t){if(d.isBuffer(t)){const e=0|f(t.length),n=s(e);return 0===n.length||t.copy(n,0,0,e),n}if(void 0!==t.length)return"number"!=typeof t.length||X(t.length)?s(0):l(t);if("Buffer"===t.type&&Array.isArray(t.data))return l(t.data)}(t);if(o)return o;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return d.from(t[Symbol.toPrimitive]("string"),e,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function p(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function u(t){return p(t),s(t<0?0:0|f(t))}function l(t){const e=t.length<0?0:0|f(t.length),n=s(e);for(let i=0;i<e;i+=1)n[i]=255&t[i];return n}function h(t,e,n){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(n||0))throw new RangeError('"length" is outside of buffer bounds');let i;return i=void 0===e&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,e):new Uint8Array(t,e,n),Object.setPrototypeOf(i,d.prototype),i}function f(t){if(t>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return 0|t}function v(t,e){if(d.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||Y(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);const n=t.length,i=arguments.length>2&&!0===arguments[2];if(!i&&0===n)return 0;let o=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return j(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return H(t).length;default:if(o)return i?-1:j(t).length;e=(""+e).toLowerCase(),o=!0}}function A(t,e,n){let i=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return w(this,e,n);case"utf8":case"utf-8":return P(this,e,n);case"ascii":return T(this,e,n);case"latin1":case"binary":return D(this,e,n);case"base64":return E(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,e,n);default:if(i)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),i=!0}}function y(t,e,n){const i=t[e];t[e]=t[n],t[n]=i}function g(t,e,n,i,o){if(0===t.length)return-1;if("string"==typeof n?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),X(n=+n)&&(n=o?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(o)return-1;n=t.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof e&&(e=d.from(e,i)),d.isBuffer(e))return 0===e.length?-1:m(t,e,n,i,o);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):m(t,[e],n,i,o);throw new TypeError("val must be string, number or Buffer")}function m(t,e,n,i,o){let r,a=1,s=t.length,d=e.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(t.length<2||e.length<2)return-1;a=2,s/=2,d/=2,n/=2}function c(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(o){let i=-1;for(r=n;r<s;r++)if(c(t,r)===c(e,-1===i?0:r-i)){if(-1===i&&(i=r),r-i+1===d)return i*a}else-1!==i&&(r-=r-i),i=-1}else for(n+d>s&&(n=s-d),r=n;r>=0;r--){let n=!0;for(let i=0;i<d;i++)if(c(t,r+i)!==c(e,i)){n=!1;break}if(n)return r}return-1}function I(t,e,n,i){n=Number(n)||0;const o=t.length-n;i?(i=Number(i))>o&&(i=o):i=o;const r=e.length;let a;for(i>r/2&&(i=r/2),a=0;a<i;++a){const i=parseInt(e.substr(2*a,2),16);if(X(i))return a;t[n+a]=i}return a}function C(t,e,n,i){return K(j(e,t.length-n),t,n,i)}function S(t,e,n,i){return K(function(t){const e=[];for(let n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,i)}function b(t,e,n,i){return K(H(e),t,n,i)}function V(t,e,n,i){return K(function(t,e){let n,i,o;const r=[];for(let a=0;a<t.length&&!((e-=2)<0);++a)n=t.charCodeAt(a),i=n>>8,o=n%256,r.push(o),r.push(i);return r}(e,t.length-n),t,n,i)}function E(t,e,n){return 0===e&&n===t.length?i.fromByteArray(t):i.fromByteArray(t.slice(e,n))}function P(t,e,n){n=Math.min(t.length,n);const i=[];let o=e;for(;o<n;){const e=t[o];let r=null,a=e>239?4:e>223?3:e>191?2:1;if(o+a<=n){let n,i,s,d;switch(a){case 1:e<128&&(r=e);break;case 2:n=t[o+1],128==(192&n)&&(d=(31&e)<<6|63&n,d>127&&(r=d));break;case 3:n=t[o+1],i=t[o+2],128==(192&n)&&128==(192&i)&&(d=(15&e)<<12|(63&n)<<6|63&i,d>2047&&(d<55296||d>57343)&&(r=d));break;case 4:n=t[o+1],i=t[o+2],s=t[o+3],128==(192&n)&&128==(192&i)&&128==(192&s)&&(d=(15&e)<<18|(63&n)<<12|(63&i)<<6|63&s,d>65535&&d<1114112&&(r=d))}}null===r?(r=65533,a=1):r>65535&&(r-=65536,i.push(r>>>10&1023|55296),r=56320|1023&r),i.push(r),o+=a}return function(t){const e=t.length;if(e<=k)return String.fromCharCode.apply(String,t);let n="",i=0;for(;i<e;)n+=String.fromCharCode.apply(String,t.slice(i,i+=k));return n}(i)}e.kMaxLength=a,d.TYPED_ARRAY_SUPPORT=function(){try{const t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}(),d.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(d.prototype,"parent",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.buffer}}),Object.defineProperty(d.prototype,"offset",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.byteOffset}}),d.poolSize=8192,d.from=function(t,e,n){return c(t,e,n)},Object.setPrototypeOf(d.prototype,Uint8Array.prototype),Object.setPrototypeOf(d,Uint8Array),d.alloc=function(t,e,n){return function(t,e,n){return p(t),t<=0?s(t):void 0!==e?"string"==typeof n?s(t).fill(e,n):s(t).fill(e):s(t)}(t,e,n)},d.allocUnsafe=function(t){return u(t)},d.allocUnsafeSlow=function(t){return u(t)},d.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==d.prototype},d.compare=function(t,e){if(Y(t,Uint8Array)&&(t=d.from(t,t.offset,t.byteLength)),Y(e,Uint8Array)&&(e=d.from(e,e.offset,e.byteLength)),!d.isBuffer(t)||!d.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let n=t.length,i=e.length;for(let o=0,r=Math.min(n,i);o<r;++o)if(t[o]!==e[o]){n=t[o],i=e[o];break}return n<i?-1:i<n?1:0},d.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},d.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return d.alloc(0);let n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;const i=d.allocUnsafe(e);let o=0;for(n=0;n<t.length;++n){let e=t[n];if(Y(e,Uint8Array))o+e.length>i.length?(d.isBuffer(e)||(e=d.from(e)),e.copy(i,o)):Uint8Array.prototype.set.call(i,e,o);else{if(!d.isBuffer(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(i,o)}o+=e.length}return i},d.byteLength=v,d.prototype._isBuffer=!0,d.prototype.swap16=function(){const t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)y(this,e,e+1);return this},d.prototype.swap32=function(){const t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)y(this,e,e+3),y(this,e+1,e+2);return this},d.prototype.swap64=function(){const t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)y(this,e,e+7),y(this,e+1,e+6),y(this,e+2,e+5),y(this,e+3,e+4);return this},d.prototype.toString=function(){const t=this.length;return 0===t?"":0===arguments.length?P(this,0,t):A.apply(this,arguments)},d.prototype.toLocaleString=d.prototype.toString,d.prototype.equals=function(t){if(!d.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===d.compare(this,t)},d.prototype.inspect=function(){let t="";const n=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(t+=" ... "),"<Buffer "+t+">"},r&&(d.prototype[r]=d.prototype.inspect),d.prototype.compare=function(t,e,n,i,o){if(Y(t,Uint8Array)&&(t=d.from(t,t.offset,t.byteLength)),!d.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===i&&(i=0),void 0===o&&(o=this.length),e<0||n>t.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&e>=n)return 0;if(i>=o)return-1;if(e>=n)return 1;if(this===t)return 0;let r=(o>>>=0)-(i>>>=0),a=(n>>>=0)-(e>>>=0);const s=Math.min(r,a),c=this.slice(i,o),p=t.slice(e,n);for(let t=0;t<s;++t)if(c[t]!==p[t]){r=c[t],a=p[t];break}return r<a?-1:a<r?1:0},d.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},d.prototype.indexOf=function(t,e,n){return g(this,t,e,n,!0)},d.prototype.lastIndexOf=function(t,e,n){return g(this,t,e,n,!1)},d.prototype.write=function(t,e,n,i){if(void 0===e)i="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)i=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(n)?(n>>>=0,void 0===i&&(i="utf8")):(i=n,n=void 0)}const o=this.length-e;if((void 0===n||n>o)&&(n=o),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");let r=!1;for(;;)switch(i){case"hex":return I(this,t,e,n);case"utf8":case"utf-8":return C(this,t,e,n);case"ascii":case"latin1":case"binary":return S(this,t,e,n);case"base64":return b(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return V(this,t,e,n);default:if(r)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),r=!0}},d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const k=4096;function T(t,e,n){let i="";n=Math.min(t.length,n);for(let o=e;o<n;++o)i+=String.fromCharCode(127&t[o]);return i}function D(t,e,n){let i="";n=Math.min(t.length,n);for(let o=e;o<n;++o)i+=String.fromCharCode(t[o]);return i}function w(t,e,n){const i=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>i)&&(n=i);let o="";for(let i=e;i<n;++i)o+=J[t[i]];return o}function x(t,e,n){const i=t.slice(e,n);let o="";for(let t=0;t<i.length-1;t+=2)o+=String.fromCharCode(i[t]+256*i[t+1]);return o}function M(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function R(t,e,n,i,o,r){if(!d.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>o||e<r)throw new RangeError('"value" argument is out of bounds');if(n+i>t.length)throw new RangeError("Index out of range")}function G(t,e,n,i,o){Q(e,i,o,t,n,7);let r=Number(e&BigInt(4294967295));t[n++]=r,r>>=8,t[n++]=r,r>>=8,t[n++]=r,r>>=8,t[n++]=r;let a=Number(e>>BigInt(32)&BigInt(4294967295));return t[n++]=a,a>>=8,t[n++]=a,a>>=8,t[n++]=a,a>>=8,t[n++]=a,n}function L(t,e,n,i,o){Q(e,i,o,t,n,7);let r=Number(e&BigInt(4294967295));t[n+7]=r,r>>=8,t[n+6]=r,r>>=8,t[n+5]=r,r>>=8,t[n+4]=r;let a=Number(e>>BigInt(32)&BigInt(4294967295));return t[n+3]=a,a>>=8,t[n+2]=a,a>>=8,t[n+1]=a,a>>=8,t[n]=a,n+8}function B(t,e,n,i,o,r){if(n+i>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function N(t,e,n,i,r){return e=+e,n>>>=0,r||B(t,0,n,4),o.write(t,e,n,i,23,4),n+4}function O(t,e,n,i,r){return e=+e,n>>>=0,r||B(t,0,n,8),o.write(t,e,n,i,52,8),n+8}d.prototype.slice=function(t,e){const n=this.length;(t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t);const i=this.subarray(t,e);return Object.setPrototypeOf(i,d.prototype),i},d.prototype.readUintLE=d.prototype.readUIntLE=function(t,e,n){t>>>=0,e>>>=0,n||M(t,e,this.length);let i=this[t],o=1,r=0;for(;++r<e&&(o*=256);)i+=this[t+r]*o;return i},d.prototype.readUintBE=d.prototype.readUIntBE=function(t,e,n){t>>>=0,e>>>=0,n||M(t,e,this.length);let i=this[t+--e],o=1;for(;e>0&&(o*=256);)i+=this[t+--e]*o;return i},d.prototype.readUint8=d.prototype.readUInt8=function(t,e){return t>>>=0,e||M(t,1,this.length),this[t]},d.prototype.readUint16LE=d.prototype.readUInt16LE=function(t,e){return t>>>=0,e||M(t,2,this.length),this[t]|this[t+1]<<8},d.prototype.readUint16BE=d.prototype.readUInt16BE=function(t,e){return t>>>=0,e||M(t,2,this.length),this[t]<<8|this[t+1]},d.prototype.readUint32LE=d.prototype.readUInt32LE=function(t,e){return t>>>=0,e||M(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},d.prototype.readUint32BE=d.prototype.readUInt32BE=function(t,e){return t>>>=0,e||M(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},d.prototype.readBigUInt64LE=$((function(t){W(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||z(t,this.length-8);const i=e+256*this[++t]+65536*this[++t]+this[++t]*2**24,o=this[++t]+256*this[++t]+65536*this[++t]+n*2**24;return BigInt(i)+(BigInt(o)<<BigInt(32))})),d.prototype.readBigUInt64BE=$((function(t){W(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||z(t,this.length-8);const i=e*2**24+65536*this[++t]+256*this[++t]+this[++t],o=this[++t]*2**24+65536*this[++t]+256*this[++t]+n;return(BigInt(i)<<BigInt(32))+BigInt(o)})),d.prototype.readIntLE=function(t,e,n){t>>>=0,e>>>=0,n||M(t,e,this.length);let i=this[t],o=1,r=0;for(;++r<e&&(o*=256);)i+=this[t+r]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*e)),i},d.prototype.readIntBE=function(t,e,n){t>>>=0,e>>>=0,n||M(t,e,this.length);let i=e,o=1,r=this[t+--i];for(;i>0&&(o*=256);)r+=this[t+--i]*o;return o*=128,r>=o&&(r-=Math.pow(2,8*e)),r},d.prototype.readInt8=function(t,e){return t>>>=0,e||M(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},d.prototype.readInt16LE=function(t,e){t>>>=0,e||M(t,2,this.length);const n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},d.prototype.readInt16BE=function(t,e){t>>>=0,e||M(t,2,this.length);const n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},d.prototype.readInt32LE=function(t,e){return t>>>=0,e||M(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},d.prototype.readInt32BE=function(t,e){return t>>>=0,e||M(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},d.prototype.readBigInt64LE=$((function(t){W(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||z(t,this.length-8);const i=this[t+4]+256*this[t+5]+65536*this[t+6]+(n<<24);return(BigInt(i)<<BigInt(32))+BigInt(e+256*this[++t]+65536*this[++t]+this[++t]*2**24)})),d.prototype.readBigInt64BE=$((function(t){W(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||z(t,this.length-8);const i=(e<<24)+65536*this[++t]+256*this[++t]+this[++t];return(BigInt(i)<<BigInt(32))+BigInt(this[++t]*2**24+65536*this[++t]+256*this[++t]+n)})),d.prototype.readFloatLE=function(t,e){return t>>>=0,e||M(t,4,this.length),o.read(this,t,!0,23,4)},d.prototype.readFloatBE=function(t,e){return t>>>=0,e||M(t,4,this.length),o.read(this,t,!1,23,4)},d.prototype.readDoubleLE=function(t,e){return t>>>=0,e||M(t,8,this.length),o.read(this,t,!0,52,8)},d.prototype.readDoubleBE=function(t,e){return t>>>=0,e||M(t,8,this.length),o.read(this,t,!1,52,8)},d.prototype.writeUintLE=d.prototype.writeUIntLE=function(t,e,n,i){if(t=+t,e>>>=0,n>>>=0,!i){R(this,t,e,n,Math.pow(2,8*n)-1,0)}let o=1,r=0;for(this[e]=255&t;++r<n&&(o*=256);)this[e+r]=t/o&255;return e+n},d.prototype.writeUintBE=d.prototype.writeUIntBE=function(t,e,n,i){if(t=+t,e>>>=0,n>>>=0,!i){R(this,t,e,n,Math.pow(2,8*n)-1,0)}let o=n-1,r=1;for(this[e+o]=255&t;--o>=0&&(r*=256);)this[e+o]=t/r&255;return e+n},d.prototype.writeUint8=d.prototype.writeUInt8=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,1,255,0),this[e]=255&t,e+1},d.prototype.writeUint16LE=d.prototype.writeUInt16LE=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},d.prototype.writeUint16BE=d.prototype.writeUInt16BE=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},d.prototype.writeUint32LE=d.prototype.writeUInt32LE=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},d.prototype.writeUint32BE=d.prototype.writeUInt32BE=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},d.prototype.writeBigUInt64LE=$((function(t,e=0){return G(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),d.prototype.writeBigUInt64BE=$((function(t,e=0){return L(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),d.prototype.writeIntLE=function(t,e,n,i){if(t=+t,e>>>=0,!i){const i=Math.pow(2,8*n-1);R(this,t,e,n,i-1,-i)}let o=0,r=1,a=0;for(this[e]=255&t;++o<n&&(r*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/r>>0)-a&255;return e+n},d.prototype.writeIntBE=function(t,e,n,i){if(t=+t,e>>>=0,!i){const i=Math.pow(2,8*n-1);R(this,t,e,n,i-1,-i)}let o=n-1,r=1,a=0;for(this[e+o]=255&t;--o>=0&&(r*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/r>>0)-a&255;return e+n},d.prototype.writeInt8=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},d.prototype.writeInt16LE=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},d.prototype.writeInt16BE=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},d.prototype.writeInt32LE=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},d.prototype.writeInt32BE=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},d.prototype.writeBigInt64LE=$((function(t,e=0){return G(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),d.prototype.writeBigInt64BE=$((function(t,e=0){return L(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),d.prototype.writeFloatLE=function(t,e,n){return N(this,t,e,!0,n)},d.prototype.writeFloatBE=function(t,e,n){return N(this,t,e,!1,n)},d.prototype.writeDoubleLE=function(t,e,n){return O(this,t,e,!0,n)},d.prototype.writeDoubleBE=function(t,e,n){return O(this,t,e,!1,n)},d.prototype.copy=function(t,e,n,i){if(!d.isBuffer(t))throw new TypeError("argument should be a Buffer");if(n||(n=0),i||0===i||(i=this.length),e>=t.length&&(e=t.length),e||(e=0),i>0&&i<n&&(i=n),i===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-e<i-n&&(i=t.length-e+n);const o=i-n;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,n,i):Uint8Array.prototype.set.call(t,this.subarray(n,i),e),o},d.prototype.fill=function(t,e,n,i){if("string"==typeof t){if("string"==typeof e?(i=e,e=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!d.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(1===t.length){const e=t.charCodeAt(0);("utf8"===i&&e<128||"latin1"===i)&&(t=e)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;let o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{const r=d.isBuffer(t)?t:d.from(t,i),a=r.length;if(0===a)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(o=0;o<n-e;++o)this[o+e]=r[o%a]}return this};const U={};function F(t,e,n){U[t]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}function _(t){let e="",n=t.length;const i="-"===t[0]?1:0;for(;n>=i+4;n-=3)e=`_${t.slice(n-3,n)}${e}`;return`${t.slice(0,n)}${e}`}function Q(t,e,n,i,o,r){if(t>n||t<e){const i="bigint"==typeof e?"n":"";let o;throw o=r>3?0===e||e===BigInt(0)?`>= 0${i} and < 2${i} ** ${8*(r+1)}${i}`:`>= -(2${i} ** ${8*(r+1)-1}${i}) and < 2 ** ${8*(r+1)-1}${i}`:`>= ${e}${i} and <= ${n}${i}`,new U.ERR_OUT_OF_RANGE("value",o,t)}!function(t,e,n){W(e,"offset"),void 0!==t[e]&&void 0!==t[e+n]||z(e,t.length-(n+1))}(i,o,r)}function W(t,e){if("number"!=typeof t)throw new U.ERR_INVALID_ARG_TYPE(e,"number",t)}function z(t,e,n){if(Math.floor(t)!==t)throw W(t,n),new U.ERR_OUT_OF_RANGE(n||"offset","an integer",t);if(e<0)throw new U.ERR_BUFFER_OUT_OF_BOUNDS;throw new U.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${e}`,t)}F("ERR_BUFFER_OUT_OF_BOUNDS",(function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),F("ERR_INVALID_ARG_TYPE",(function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`}),TypeError),F("ERR_OUT_OF_RANGE",(function(t,e,n){let i=`The value of "${t}" is out of range.`,o=n;return Number.isInteger(n)&&Math.abs(n)>2**32?o=_(String(n)):"bigint"==typeof n&&(o=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(o=_(o)),o+="n"),i+=` It must be ${e}. Received ${o}`,i}),RangeError);const q=/[^+/0-9A-Za-z-_]/g;function j(t,e){let n;e=e||1/0;const i=t.length;let o=null;const r=[];for(let a=0;a<i;++a){if(n=t.charCodeAt(a),n>55295&&n<57344){if(!o){if(n>56319){(e-=3)>-1&&r.push(239,191,189);continue}if(a+1===i){(e-=3)>-1&&r.push(239,191,189);continue}o=n;continue}if(n<56320){(e-=3)>-1&&r.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(e-=3)>-1&&r.push(239,191,189);if(o=null,n<128){if((e-=1)<0)break;r.push(n)}else if(n<2048){if((e-=2)<0)break;r.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;r.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;r.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return r}function H(t){return i.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(q,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function K(t,e,n,i){let o;for(o=0;o<i&&!(o+n>=e.length||o>=t.length);++o)e[o+n]=t[o];return o}function Y(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function X(t){return t!=t}const J=function(){const t="0123456789abcdef",e=new Array(256);for(let n=0;n<16;++n){const i=16*n;for(let o=0;o<16;++o)e[i+o]=t[n]+t[o]}return e}();function $(t){return"undefined"==typeof BigInt?Z:t}function Z(){throw new Error("BigInt not supported")}},260:t=>{var e={utf8:{stringToBytes:function(t){return e.bin.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){return decodeURIComponent(escape(e.bin.bytesToString(t)))}},bin:{stringToBytes:function(t){for(var e=[],n=0;n<t.length;n++)e.push(255&t.charCodeAt(n));return e},bytesToString:function(t){for(var e=[],n=0;n<t.length;n++)e.push(String.fromCharCode(t[n]));return e.join("")}}};t.exports=e},888:t=>{var e,n;e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n={rotl:function(t,e){return t<<e|t>>>32-e},rotr:function(t,e){return t<<32-e|t>>>e},endian:function(t){if(t.constructor==Number)return 16711935&n.rotl(t,8)|4278255360&n.rotl(t,24);for(var e=0;e<t.length;e++)t[e]=n.endian(t[e]);return t},randomBytes:function(t){for(var e=[];t>0;t--)e.push(Math.floor(256*Math.random()));return e},bytesToWords:function(t){for(var e=[],n=0,i=0;n<t.length;n++,i+=8)e[i>>>5]|=t[n]<<24-i%32;return e},wordsToBytes:function(t){for(var e=[],n=0;n<32*t.length;n+=8)e.push(t[n>>>5]>>>24-n%32&255);return e},bytesToHex:function(t){for(var e=[],n=0;n<t.length;n++)e.push((t[n]>>>4).toString(16)),e.push((15&t[n]).toString(16));return e.join("")},hexToBytes:function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(parseInt(t.substr(n,2),16));return e},bytesToBase64:function(t){for(var n=[],i=0;i<t.length;i+=3)for(var o=t[i]<<16|t[i+1]<<8|t[i+2],r=0;r<4;r++)8*i+6*r<=8*t.length?n.push(e.charAt(o>>>6*(3-r)&63)):n.push("=");return n.join("")},base64ToBytes:function(t){t=t.replace(/[^A-Z0-9+\/]/gi,"");for(var n=[],i=0,o=0;i<t.length;o=++i%4)0!=o&&n.push((e.indexOf(t.charAt(i-1))&Math.pow(2,-2*o+8)-1)<<2*o|e.indexOf(t.charAt(i))>>>6-2*o);return n}},t.exports=n},404:(t,e)=>{e.read=function(t,e,n,i,o){var r,a,s=8*o-i-1,d=(1<<s)-1,c=d>>1,p=-7,u=n?o-1:0,l=n?-1:1,h=t[e+u];for(u+=l,r=h&(1<<-p)-1,h>>=-p,p+=s;p>0;r=256*r+t[e+u],u+=l,p-=8);for(a=r&(1<<-p)-1,r>>=-p,p+=i;p>0;a=256*a+t[e+u],u+=l,p-=8);if(0===r)r=1-c;else{if(r===d)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,i),r-=c}return(h?-1:1)*a*Math.pow(2,r-i)},e.write=function(t,e,n,i,o,r){var a,s,d,c=8*r-o-1,p=(1<<c)-1,u=p>>1,l=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,h=i?0:r-1,f=i?1:-1,v=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=p):(a=Math.floor(Math.log(e)/Math.LN2),e*(d=Math.pow(2,-a))<1&&(a--,d*=2),(e+=a+u>=1?l/d:l*Math.pow(2,1-u))*d>=2&&(a++,d/=2),a+u>=p?(s=0,a=p):a+u>=1?(s=(e*d-1)*Math.pow(2,o),a+=u):(s=e*Math.pow(2,u-1)*Math.pow(2,o),a=0));o>=8;t[n+h]=255&s,h+=f,s/=256,o-=8);for(a=a<<o|s,c+=o;c>0;t[n+h]=255&a,h+=f,a/=256,c-=8);t[n+h-f]|=128*v}},412:t=>{function e(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}t.exports=function(t){return null!=t&&(e(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&e(t.slice(0,0))}(t)||!!t._isBuffer)}},752:(t,e,n)=>{var i,o,r,a,s;i=n(888),o=n(260).utf8,r=n(412),a=n(260).bin,(s=function(t,e){t.constructor==String?t=e&&"binary"===e.encoding?a.stringToBytes(t):o.stringToBytes(t):r(t)?t=Array.prototype.slice.call(t,0):Array.isArray(t)||t.constructor===Uint8Array||(t=t.toString());for(var n=i.bytesToWords(t),d=8*t.length,c=1732584193,p=-271733879,u=-1732584194,l=271733878,h=0;h<n.length;h++)n[h]=16711935&(n[h]<<8|n[h]>>>24)|4278255360&(n[h]<<24|n[h]>>>8);n[d>>>5]|=128<<d%32,n[14+(d+64>>>9<<4)]=d;var f=s._ff,v=s._gg,A=s._hh,y=s._ii;for(h=0;h<n.length;h+=16){var g=c,m=p,I=u,C=l;c=f(c,p,u,l,n[h+0],7,-680876936),l=f(l,c,p,u,n[h+1],12,-389564586),u=f(u,l,c,p,n[h+2],17,606105819),p=f(p,u,l,c,n[h+3],22,-1044525330),c=f(c,p,u,l,n[h+4],7,-176418897),l=f(l,c,p,u,n[h+5],12,1200080426),u=f(u,l,c,p,n[h+6],17,-1473231341),p=f(p,u,l,c,n[h+7],22,-45705983),c=f(c,p,u,l,n[h+8],7,1770035416),l=f(l,c,p,u,n[h+9],12,-1958414417),u=f(u,l,c,p,n[h+10],17,-42063),p=f(p,u,l,c,n[h+11],22,-1990404162),c=f(c,p,u,l,n[h+12],7,1804603682),l=f(l,c,p,u,n[h+13],12,-40341101),u=f(u,l,c,p,n[h+14],17,-1502002290),c=v(c,p=f(p,u,l,c,n[h+15],22,1236535329),u,l,n[h+1],5,-165796510),l=v(l,c,p,u,n[h+6],9,-1069501632),u=v(u,l,c,p,n[h+11],14,643717713),p=v(p,u,l,c,n[h+0],20,-373897302),c=v(c,p,u,l,n[h+5],5,-701558691),l=v(l,c,p,u,n[h+10],9,38016083),u=v(u,l,c,p,n[h+15],14,-660478335),p=v(p,u,l,c,n[h+4],20,-405537848),c=v(c,p,u,l,n[h+9],5,568446438),l=v(l,c,p,u,n[h+14],9,-1019803690),u=v(u,l,c,p,n[h+3],14,-187363961),p=v(p,u,l,c,n[h+8],20,1163531501),c=v(c,p,u,l,n[h+13],5,-1444681467),l=v(l,c,p,u,n[h+2],9,-51403784),u=v(u,l,c,p,n[h+7],14,1735328473),c=A(c,p=v(p,u,l,c,n[h+12],20,-1926607734),u,l,n[h+5],4,-378558),l=A(l,c,p,u,n[h+8],11,-2022574463),u=A(u,l,c,p,n[h+11],16,1839030562),p=A(p,u,l,c,n[h+14],23,-35309556),c=A(c,p,u,l,n[h+1],4,-1530992060),l=A(l,c,p,u,n[h+4],11,1272893353),u=A(u,l,c,p,n[h+7],16,-155497632),p=A(p,u,l,c,n[h+10],23,-1094730640),c=A(c,p,u,l,n[h+13],4,681279174),l=A(l,c,p,u,n[h+0],11,-358537222),u=A(u,l,c,p,n[h+3],16,-722521979),p=A(p,u,l,c,n[h+6],23,76029189),c=A(c,p,u,l,n[h+9],4,-640364487),l=A(l,c,p,u,n[h+12],11,-421815835),u=A(u,l,c,p,n[h+15],16,530742520),c=y(c,p=A(p,u,l,c,n[h+2],23,-995338651),u,l,n[h+0],6,-198630844),l=y(l,c,p,u,n[h+7],10,1126891415),u=y(u,l,c,p,n[h+14],15,-1416354905),p=y(p,u,l,c,n[h+5],21,-57434055),c=y(c,p,u,l,n[h+12],6,1700485571),l=y(l,c,p,u,n[h+3],10,-1894986606),u=y(u,l,c,p,n[h+10],15,-1051523),p=y(p,u,l,c,n[h+1],21,-2054922799),c=y(c,p,u,l,n[h+8],6,1873313359),l=y(l,c,p,u,n[h+15],10,-30611744),u=y(u,l,c,p,n[h+6],15,-1560198380),p=y(p,u,l,c,n[h+13],21,1309151649),c=y(c,p,u,l,n[h+4],6,-145523070),l=y(l,c,p,u,n[h+11],10,-1120210379),u=y(u,l,c,p,n[h+2],15,718787259),p=y(p,u,l,c,n[h+9],21,-343485551),c=c+g>>>0,p=p+m>>>0,u=u+I>>>0,l=l+C>>>0}return i.endian([c,p,u,l])})._ff=function(t,e,n,i,o,r,a){var s=t+(e&n|~e&i)+(o>>>0)+a;return(s<<r|s>>>32-r)+e},s._gg=function(t,e,n,i,o,r,a){var s=t+(e&i|n&~i)+(o>>>0)+a;return(s<<r|s>>>32-r)+e},s._hh=function(t,e,n,i,o,r,a){var s=t+(e^n^i)+(o>>>0)+a;return(s<<r|s>>>32-r)+e},s._ii=function(t,e,n,i,o,r,a){var s=t+(n^(e|~i))+(o>>>0)+a;return(s<<r|s>>>32-r)+e},s._blocksize=16,s._digestsize=16,t.exports=function(t,e){if(null==t)throw new Error("Illegal argument "+t);var n=i.wordsToBytes(s(t,e));return e&&e.asBytes?n:e&&e.asString?a.bytesToString(n):i.bytesToHex(n)}},856:(t,e,n)=>{var i=n(296),o=i.Buffer;function r(t,e){for(var n in t)e[n]=t[n]}function a(t,e,n){return o(t,e,n)}o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?t.exports=i:(r(i,e),e.Buffer=a),a.prototype=Object.create(o.prototype),r(o,a),a.from=function(t,e,n){if("number"==typeof t)throw new TypeError("Argument must not be a number");return o(t,e,n)},a.alloc=function(t,e,n){if("number"!=typeof t)throw new TypeError("Argument must be a number");var i=o(t);return void 0!==e?"string"==typeof n?i.fill(e,n):i.fill(e):i.fill(0),i},a.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return o(t)},a.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return i.SlowBuffer(t)}},792:(t,e,n)=>{!function(t){t.parser=function(t,e){return new o(t,e)},t.SAXParser=o,t.SAXStream=a,t.createStream=function(t,e){return new a(t,e)},t.MAX_BUFFER_LENGTH=65536;var e,i=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function o(e,n){if(!(this instanceof o))return new o(e,n);var r=this;!function(t){for(var e=0,n=i.length;e<n;e++)t[i[e]]=""}(r),r.q=r.c="",r.bufferCheckPosition=t.MAX_BUFFER_LENGTH,r.opt=n||{},r.opt.lowercase=r.opt.lowercase||r.opt.lowercasetags,r.looseCase=r.opt.lowercase?"toLowerCase":"toUpperCase",r.tags=[],r.closed=r.closedRoot=r.sawRoot=!1,r.tag=r.error=null,r.strict=!!e,r.noscript=!(!e&&!r.opt.noscript),r.state=V.BEGIN,r.strictEntities=r.opt.strictEntities,r.ENTITIES=r.strictEntities?Object.create(t.XML_ENTITIES):Object.create(t.ENTITIES),r.attribList=[],r.opt.xmlns&&(r.ns=Object.create(u)),r.trackPosition=!1!==r.opt.position,r.trackPosition&&(r.position=r.line=r.column=0),P(r,"onready")}t.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(t){function e(){}return e.prototype=t,new e}),Object.keys||(Object.keys=function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e}),o.prototype={end:function(){x(this)},write:function(e){var n=this;if(this.error)throw this.error;if(n.closed)return w(n,"Cannot write after close. Assign an onready handler.");if(null===e)return x(n);"object"==typeof e&&(e=e.toString());var o=0,r="";for(;r=F(e,o++),n.c=r,r;)switch(n.trackPosition&&(n.position++,"\n"===r?(n.line++,n.column=0):n.column++),n.state){case V.BEGIN:if(n.state=V.BEGIN_WHITESPACE,"\ufeff"===r)continue;U(n,r);continue;case V.BEGIN_WHITESPACE:U(n,r);continue;case V.TEXT:if(n.sawRoot&&!n.closedRoot){for(var a=o-1;r&&"<"!==r&&"&"!==r;)(r=F(e,o++))&&n.trackPosition&&(n.position++,"\n"===r?(n.line++,n.column=0):n.column++);n.textNode+=e.substring(a,o-1)}"<"!==r||n.sawRoot&&n.closedRoot&&!n.strict?(A(r)||n.sawRoot&&!n.closedRoot||M(n,"Text data outside of root node."),"&"===r?n.state=V.TEXT_ENTITY:n.textNode+=r):(n.state=V.OPEN_WAKA,n.startTagPosition=n.position);continue;case V.SCRIPT:"<"===r?n.state=V.SCRIPT_ENDING:n.script+=r;continue;case V.SCRIPT_ENDING:"/"===r?n.state=V.CLOSE_TAG:(n.script+="<"+r,n.state=V.SCRIPT);continue;case V.OPEN_WAKA:if("!"===r)n.state=V.SGML_DECL,n.sgmlDecl="";else if(A(r));else if(m(l,r))n.state=V.OPEN_TAG,n.tagName=r;else if("/"===r)n.state=V.CLOSE_TAG,n.tagName="";else if("?"===r)n.state=V.PROC_INST,n.procInstName=n.procInstBody="";else{if(M(n,"Unencoded <"),n.startTagPosition+1<n.position){var c=n.position-n.startTagPosition;r=new Array(c).join(" ")+r}n.textNode+="<"+r,n.state=V.TEXT}continue;case V.SGML_DECL:(n.sgmlDecl+r).toUpperCase()===s?(k(n,"onopencdata"),n.state=V.CDATA,n.sgmlDecl="",n.cdata=""):n.sgmlDecl+r==="--"?(n.state=V.COMMENT,n.comment="",n.sgmlDecl=""):(n.sgmlDecl+r).toUpperCase()===d?(n.state=V.DOCTYPE,(n.doctype||n.sawRoot)&&M(n,"Inappropriately located doctype declaration"),n.doctype="",n.sgmlDecl=""):">"===r?(k(n,"onsgmldeclaration",n.sgmlDecl),n.sgmlDecl="",n.state=V.TEXT):y(r)?(n.state=V.SGML_DECL_QUOTED,n.sgmlDecl+=r):n.sgmlDecl+=r;continue;case V.SGML_DECL_QUOTED:r===n.q&&(n.state=V.SGML_DECL,n.q=""),n.sgmlDecl+=r;continue;case V.DOCTYPE:">"===r?(n.state=V.TEXT,k(n,"ondoctype",n.doctype),n.doctype=!0):(n.doctype+=r,"["===r?n.state=V.DOCTYPE_DTD:y(r)&&(n.state=V.DOCTYPE_QUOTED,n.q=r));continue;case V.DOCTYPE_QUOTED:n.doctype+=r,r===n.q&&(n.q="",n.state=V.DOCTYPE);continue;case V.DOCTYPE_DTD:n.doctype+=r,"]"===r?n.state=V.DOCTYPE:y(r)&&(n.state=V.DOCTYPE_DTD_QUOTED,n.q=r);continue;case V.DOCTYPE_DTD_QUOTED:n.doctype+=r,r===n.q&&(n.state=V.DOCTYPE_DTD,n.q="");continue;case V.COMMENT:"-"===r?n.state=V.COMMENT_ENDING:n.comment+=r;continue;case V.COMMENT_ENDING:"-"===r?(n.state=V.COMMENT_ENDED,n.comment=D(n.opt,n.comment),n.comment&&k(n,"oncomment",n.comment),n.comment=""):(n.comment+="-"+r,n.state=V.COMMENT);continue;case V.COMMENT_ENDED:">"!==r?(M(n,"Malformed comment"),n.comment+="--"+r,n.state=V.COMMENT):n.state=V.TEXT;continue;case V.CDATA:"]"===r?n.state=V.CDATA_ENDING:n.cdata+=r;continue;case V.CDATA_ENDING:"]"===r?n.state=V.CDATA_ENDING_2:(n.cdata+="]"+r,n.state=V.CDATA);continue;case V.CDATA_ENDING_2:">"===r?(n.cdata&&k(n,"oncdata",n.cdata),k(n,"onclosecdata"),n.cdata="",n.state=V.TEXT):"]"===r?n.cdata+="]":(n.cdata+="]]"+r,n.state=V.CDATA);continue;case V.PROC_INST:"?"===r?n.state=V.PROC_INST_ENDING:A(r)?n.state=V.PROC_INST_BODY:n.procInstName+=r;continue;case V.PROC_INST_BODY:if(!n.procInstBody&&A(r))continue;"?"===r?n.state=V.PROC_INST_ENDING:n.procInstBody+=r;continue;case V.PROC_INST_ENDING:">"===r?(k(n,"onprocessinginstruction",{name:n.procInstName,body:n.procInstBody}),n.procInstName=n.procInstBody="",n.state=V.TEXT):(n.procInstBody+="?"+r,n.state=V.PROC_INST_BODY);continue;case V.OPEN_TAG:m(h,r)?n.tagName+=r:(R(n),">"===r?B(n):"/"===r?n.state=V.OPEN_TAG_SLASH:(A(r)||M(n,"Invalid character in tag name"),n.state=V.ATTRIB));continue;case V.OPEN_TAG_SLASH:">"===r?(B(n,!0),N(n)):(M(n,"Forward-slash in opening tag not followed by >"),n.state=V.ATTRIB);continue;case V.ATTRIB:if(A(r))continue;">"===r?B(n):"/"===r?n.state=V.OPEN_TAG_SLASH:m(l,r)?(n.attribName=r,n.attribValue="",n.state=V.ATTRIB_NAME):M(n,"Invalid attribute name");continue;case V.ATTRIB_NAME:"="===r?n.state=V.ATTRIB_VALUE:">"===r?(M(n,"Attribute without value"),n.attribValue=n.attribName,L(n),B(n)):A(r)?n.state=V.ATTRIB_NAME_SAW_WHITE:m(h,r)?n.attribName+=r:M(n,"Invalid attribute name");continue;case V.ATTRIB_NAME_SAW_WHITE:if("="===r)n.state=V.ATTRIB_VALUE;else{if(A(r))continue;M(n,"Attribute without value"),n.tag.attributes[n.attribName]="",n.attribValue="",k(n,"onattribute",{name:n.attribName,value:""}),n.attribName="",">"===r?B(n):m(l,r)?(n.attribName=r,n.state=V.ATTRIB_NAME):(M(n,"Invalid attribute name"),n.state=V.ATTRIB)}continue;case V.ATTRIB_VALUE:if(A(r))continue;y(r)?(n.q=r,n.state=V.ATTRIB_VALUE_QUOTED):(M(n,"Unquoted attribute value"),n.state=V.ATTRIB_VALUE_UNQUOTED,n.attribValue=r);continue;case V.ATTRIB_VALUE_QUOTED:if(r!==n.q){"&"===r?n.state=V.ATTRIB_VALUE_ENTITY_Q:n.attribValue+=r;continue}L(n),n.q="",n.state=V.ATTRIB_VALUE_CLOSED;continue;case V.ATTRIB_VALUE_CLOSED:A(r)?n.state=V.ATTRIB:">"===r?B(n):"/"===r?n.state=V.OPEN_TAG_SLASH:m(l,r)?(M(n,"No whitespace between attributes"),n.attribName=r,n.attribValue="",n.state=V.ATTRIB_NAME):M(n,"Invalid attribute name");continue;case V.ATTRIB_VALUE_UNQUOTED:if(!g(r)){"&"===r?n.state=V.ATTRIB_VALUE_ENTITY_U:n.attribValue+=r;continue}L(n),">"===r?B(n):n.state=V.ATTRIB;continue;case V.CLOSE_TAG:if(n.tagName)">"===r?N(n):m(h,r)?n.tagName+=r:n.script?(n.script+="</"+n.tagName,n.tagName="",n.state=V.SCRIPT):(A(r)||M(n,"Invalid tagname in closing tag"),n.state=V.CLOSE_TAG_SAW_WHITE);else{if(A(r))continue;I(l,r)?n.script?(n.script+="</"+r,n.state=V.SCRIPT):M(n,"Invalid tagname in closing tag."):n.tagName=r}continue;case V.CLOSE_TAG_SAW_WHITE:if(A(r))continue;">"===r?N(n):M(n,"Invalid characters in closing tag");continue;case V.TEXT_ENTITY:case V.ATTRIB_VALUE_ENTITY_Q:case V.ATTRIB_VALUE_ENTITY_U:var p,u;switch(n.state){case V.TEXT_ENTITY:p=V.TEXT,u="textNode";break;case V.ATTRIB_VALUE_ENTITY_Q:p=V.ATTRIB_VALUE_QUOTED,u="attribValue";break;case V.ATTRIB_VALUE_ENTITY_U:p=V.ATTRIB_VALUE_UNQUOTED,u="attribValue"}";"===r?(n[u]+=O(n),n.entity="",n.state=p):m(n.entity.length?v:f,r)?n.entity+=r:(M(n,"Invalid character in entity name"),n[u]+="&"+n.entity+r,n.entity="",n.state=p);continue;default:throw new Error(n,"Unknown state: "+n.state)}n.position>=n.bufferCheckPosition&&function(e){for(var n=Math.max(t.MAX_BUFFER_LENGTH,10),o=0,r=0,a=i.length;r<a;r++){var s=e[i[r]].length;if(s>n)switch(i[r]){case"textNode":T(e);break;case"cdata":k(e,"oncdata",e.cdata),e.cdata="";break;case"script":k(e,"onscript",e.script),e.script="";break;default:w(e,"Max buffer length exceeded: "+i[r])}o=Math.max(o,s)}var d=t.MAX_BUFFER_LENGTH-o;e.bufferCheckPosition=d+e.position}(n);return n},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){var t;T(t=this),""!==t.cdata&&(k(t,"oncdata",t.cdata),t.cdata=""),""!==t.script&&(k(t,"onscript",t.script),t.script="")}};try{e=Object(function(){var t=new Error("Cannot find module 'stream'");throw t.code="MODULE_NOT_FOUND",t}())}catch(t){e=function(){}}var r=t.EVENTS.filter((function(t){return"error"!==t&&"end"!==t}));function a(t,n){if(!(this instanceof a))return new a(t,n);e.apply(this),this._parser=new o(t,n),this.writable=!0,this.readable=!0;var i=this;this._parser.onend=function(){i.emit("end")},this._parser.onerror=function(t){i.emit("error",t),i._parser.error=null},this._decoder=null,r.forEach((function(t){Object.defineProperty(i,"on"+t,{get:function(){return i._parser["on"+t]},set:function(e){if(!e)return i.removeAllListeners(t),i._parser["on"+t]=e,e;i.on(t,e)},enumerable:!0,configurable:!1})}))}a.prototype=Object.create(e.prototype,{constructor:{value:a}}),a.prototype.write=function(t){if("function"==typeof Buffer&&"function"==typeof Buffer.isBuffer&&Buffer.isBuffer(t)){if(!this._decoder){var e=n(8).o;this._decoder=new e("utf8")}t=this._decoder.write(t)}return this._parser.write(t.toString()),this.emit("data",t),!0},a.prototype.end=function(t){return t&&t.length&&this.write(t),this._parser.end(),!0},a.prototype.on=function(t,n){var i=this;return i._parser["on"+t]||-1===r.indexOf(t)||(i._parser["on"+t]=function(){var e=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);e.splice(0,0,t),i.emit.apply(i,e)}),e.prototype.on.call(i,t,n)};var s="[CDATA[",d="DOCTYPE",c="http://www.w3.org/XML/1998/namespace",p="http://www.w3.org/2000/xmlns/",u={xml:c,xmlns:p},l=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,h=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,f=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,v=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function A(t){return" "===t||"\n"===t||"\r"===t||"\t"===t}function y(t){return'"'===t||"'"===t}function g(t){return">"===t||A(t)}function m(t,e){return t.test(e)}function I(t,e){return!m(t,e)}var C,S,b,V=0;for(var E in t.STATE={BEGIN:V++,BEGIN_WHITESPACE:V++,TEXT:V++,TEXT_ENTITY:V++,OPEN_WAKA:V++,SGML_DECL:V++,SGML_DECL_QUOTED:V++,DOCTYPE:V++,DOCTYPE_QUOTED:V++,DOCTYPE_DTD:V++,DOCTYPE_DTD_QUOTED:V++,COMMENT_STARTING:V++,COMMENT:V++,COMMENT_ENDING:V++,COMMENT_ENDED:V++,CDATA:V++,CDATA_ENDING:V++,CDATA_ENDING_2:V++,PROC_INST:V++,PROC_INST_BODY:V++,PROC_INST_ENDING:V++,OPEN_TAG:V++,OPEN_TAG_SLASH:V++,ATTRIB:V++,ATTRIB_NAME:V++,ATTRIB_NAME_SAW_WHITE:V++,ATTRIB_VALUE:V++,ATTRIB_VALUE_QUOTED:V++,ATTRIB_VALUE_CLOSED:V++,ATTRIB_VALUE_UNQUOTED:V++,ATTRIB_VALUE_ENTITY_Q:V++,ATTRIB_VALUE_ENTITY_U:V++,CLOSE_TAG:V++,CLOSE_TAG_SAW_WHITE:V++,SCRIPT:V++,SCRIPT_ENDING:V++},t.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},t.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(t.ENTITIES).forEach((function(e){var n=t.ENTITIES[e],i="number"==typeof n?String.fromCharCode(n):n;t.ENTITIES[e]=i})),t.STATE)t.STATE[t.STATE[E]]=E;function P(t,e,n){t[e]&&t[e](n)}function k(t,e,n){t.textNode&&T(t),P(t,e,n)}function T(t){t.textNode=D(t.opt,t.textNode),t.textNode&&P(t,"ontext",t.textNode),t.textNode=""}function D(t,e){return t.trim&&(e=e.trim()),t.normalize&&(e=e.replace(/\s+/g," ")),e}function w(t,e){return T(t),t.trackPosition&&(e+="\nLine: "+t.line+"\nColumn: "+t.column+"\nChar: "+t.c),e=new Error(e),t.error=e,P(t,"onerror",e),t}function x(t){return t.sawRoot&&!t.closedRoot&&M(t,"Unclosed root tag"),t.state!==V.BEGIN&&t.state!==V.BEGIN_WHITESPACE&&t.state!==V.TEXT&&w(t,"Unexpected end"),T(t),t.c="",t.closed=!0,P(t,"onend"),o.call(t,t.strict,t.opt),t}function M(t,e){if("object"!=typeof t||!(t instanceof o))throw new Error("bad call to strictFail");t.strict&&w(t,e)}function R(t){t.strict||(t.tagName=t.tagName[t.looseCase]());var e=t.tags[t.tags.length-1]||t,n=t.tag={name:t.tagName,attributes:{}};t.opt.xmlns&&(n.ns=e.ns),t.attribList.length=0,k(t,"onopentagstart",n)}function G(t,e){var n=t.indexOf(":")<0?["",t]:t.split(":"),i=n[0],o=n[1];return e&&"xmlns"===t&&(i="xmlns",o=""),{prefix:i,local:o}}function L(t){if(t.strict||(t.attribName=t.attribName[t.looseCase]()),-1!==t.attribList.indexOf(t.attribName)||t.tag.attributes.hasOwnProperty(t.attribName))t.attribName=t.attribValue="";else{if(t.opt.xmlns){var e=G(t.attribName,!0),n=e.prefix,i=e.local;if("xmlns"===n)if("xml"===i&&t.attribValue!==c)M(t,"xml: prefix must be bound to "+c+"\nActual: "+t.attribValue);else if("xmlns"===i&&t.attribValue!==p)M(t,"xmlns: prefix must be bound to "+p+"\nActual: "+t.attribValue);else{var o=t.tag,r=t.tags[t.tags.length-1]||t;o.ns===r.ns&&(o.ns=Object.create(r.ns)),o.ns[i]=t.attribValue}t.attribList.push([t.attribName,t.attribValue])}else t.tag.attributes[t.attribName]=t.attribValue,k(t,"onattribute",{name:t.attribName,value:t.attribValue});t.attribName=t.attribValue=""}}function B(t,e){if(t.opt.xmlns){var n=t.tag,i=G(t.tagName);n.prefix=i.prefix,n.local=i.local,n.uri=n.ns[i.prefix]||"",n.prefix&&!n.uri&&(M(t,"Unbound namespace prefix: "+JSON.stringify(t.tagName)),n.uri=i.prefix);var o=t.tags[t.tags.length-1]||t;n.ns&&o.ns!==n.ns&&Object.keys(n.ns).forEach((function(e){k(t,"onopennamespace",{prefix:e,uri:n.ns[e]})}));for(var r=0,a=t.attribList.length;r<a;r++){var s=t.attribList[r],d=s[0],c=s[1],p=G(d,!0),u=p.prefix,l=p.local,h=""===u?"":n.ns[u]||"",f={name:d,value:c,prefix:u,local:l,uri:h};u&&"xmlns"!==u&&!h&&(M(t,"Unbound namespace prefix: "+JSON.stringify(u)),f.uri=u),t.tag.attributes[d]=f,k(t,"onattribute",f)}t.attribList.length=0}t.tag.isSelfClosing=!!e,t.sawRoot=!0,t.tags.push(t.tag),k(t,"onopentag",t.tag),e||(t.noscript||"script"!==t.tagName.toLowerCase()?t.state=V.TEXT:t.state=V.SCRIPT,t.tag=null,t.tagName=""),t.attribName=t.attribValue="",t.attribList.length=0}function N(t){if(!t.tagName)return M(t,"Weird empty close tag."),t.textNode+="</>",void(t.state=V.TEXT);if(t.script){if("script"!==t.tagName)return t.script+="</"+t.tagName+">",t.tagName="",void(t.state=V.SCRIPT);k(t,"onscript",t.script),t.script=""}var e=t.tags.length,n=t.tagName;t.strict||(n=n[t.looseCase]());for(var i=n;e--;){if(t.tags[e].name===i)break;M(t,"Unexpected close tag")}if(e<0)return M(t,"Unmatched closing tag: "+t.tagName),t.textNode+="</"+t.tagName+">",void(t.state=V.TEXT);t.tagName=n;for(var o=t.tags.length;o-- >e;){var r=t.tag=t.tags.pop();t.tagName=t.tag.name,k(t,"onclosetag",t.tagName);var a={};for(var s in r.ns)a[s]=r.ns[s];var d=t.tags[t.tags.length-1]||t;t.opt.xmlns&&r.ns!==d.ns&&Object.keys(r.ns).forEach((function(e){var n=r.ns[e];k(t,"onclosenamespace",{prefix:e,uri:n})}))}0===e&&(t.closedRoot=!0),t.tagName=t.attribValue=t.attribName="",t.attribList.length=0,t.state=V.TEXT}function O(t){var e,n=t.entity,i=n.toLowerCase(),o="";return t.ENTITIES[n]?t.ENTITIES[n]:t.ENTITIES[i]?t.ENTITIES[i]:("#"===(n=i).charAt(0)&&("x"===n.charAt(1)?(n=n.slice(2),o=(e=parseInt(n,16)).toString(16)):(n=n.slice(1),o=(e=parseInt(n,10)).toString(10))),n=n.replace(/^0+/,""),isNaN(e)||o.toLowerCase()!==n?(M(t,"Invalid character entity"),"&"+t.entity+";"):String.fromCodePoint(e))}function U(t,e){"<"===e?(t.state=V.OPEN_WAKA,t.startTagPosition=t.position):A(e)||(M(t,"Non-whitespace before first tag."),t.textNode=e,t.state=V.TEXT)}function F(t,e){var n="";return e<t.length&&(n=t.charAt(e)),n}V=t.STATE,String.fromCodePoint||(C=String.fromCharCode,S=Math.floor,b=function(){var t,e,n=[],i=-1,o=arguments.length;if(!o)return"";for(var r="";++i<o;){var a=Number(arguments[i]);if(!isFinite(a)||a<0||a>1114111||S(a)!==a)throw RangeError("Invalid code point: "+a);a<=65535?n.push(a):(t=55296+((a-=65536)>>10),e=a%1024+56320,n.push(t,e)),(i+1===o||n.length>16384)&&(r+=C.apply(null,n),n.length=0)}return r},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:b,configurable:!0,writable:!0}):String.fromCodePoint=b)}(e)},8:(t,e,n)=>{"use strict";var i=n(856).Buffer,o=i.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function r(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!=typeof e&&(i.isEncoding===o||!o(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=d,this.end=c,e=4;break;case"utf8":this.fillLast=s,e=4;break;case"base64":this.text=p,this.end=u,e=3;break;default:return this.write=l,void(this.end=h)}this.lastNeed=0,this.lastTotal=0,this.lastChar=i.allocUnsafe(e)}function a(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function s(t){var e=this.lastTotal-this.lastNeed,n=function(t,e,n){if(128!=(192&e[0]))return t.lastNeed=0,"";if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"";if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,""}}(this,t);return void 0!==n?n:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function d(t,e){if((t.length-e)%2==0){var n=t.toString("utf16le",e);if(n){var i=n.charCodeAt(n.length-1);if(i>=55296&&i<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function c(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,n)}return e}function p(t,e){var n=(t.length-e)%3;return 0===n?t.toString("base64",e):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-n))}function u(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function l(t){return t.toString(this.encoding)}function h(t){return t&&t.length?this.write(t):""}e.o=r,r.prototype.write=function(t){if(0===t.length)return"";var e,n;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<t.length?e?e+this.text(t,n):this.text(t,n):e||""},r.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"":e},r.prototype.text=function(t,e){var n=function(t,e,n){var i=e.length-1;if(i<n)return 0;var o=a(e[i]);if(o>=0)return o>0&&(t.lastNeed=o-1),o;if(--i<n||-2===o)return 0;if(o=a(e[i]),o>=0)return o>0&&(t.lastNeed=o-2),o;if(--i<n||-2===o)return 0;if(o=a(e[i]),o>=0)return o>0&&(2===o?o=0:t.lastNeed=o-3),o;return 0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=n;var i=t.length-(n-this.lastNeed);return t.copy(this.lastChar,0,i),t.toString("utf8",e,i)},r.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},300:(t,e,n)=>{var i=n(372),o=n(28),r=o;r.v1=i,r.v4=o,t.exports=r},476:t=>{for(var e=[],n=0;n<256;++n)e[n]=(n+256).toString(16).substr(1);t.exports=function(t,n){var i=n||0,o=e;return[o[t[i++]],o[t[i++]],o[t[i++]],o[t[i++]],"-",o[t[i++]],o[t[i++]],"-",o[t[i++]],o[t[i++]],"-",o[t[i++]],o[t[i++]],"-",o[t[i++]],o[t[i++]],o[t[i++]],o[t[i++]],o[t[i++]],o[t[i++]]].join("")}},844:t=>{var e="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(e){var n=new Uint8Array(16);t.exports=function(){return e(n),n}}else{var i=new Array(16);t.exports=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),i[e]=t>>>((3&e)<<3)&255;return i}}},372:(t,e,n)=>{var i,o,r=n(844),a=n(476),s=0,d=0;t.exports=function(t,e,n){var c=e&&n||0,p=e||[],u=(t=t||{}).node||i,l=void 0!==t.clockseq?t.clockseq:o;if(null==u||null==l){var h=r();null==u&&(u=i=[1|h[0],h[1],h[2],h[3],h[4],h[5]]),null==l&&(l=o=16383&(h[6]<<8|h[7]))}var f=void 0!==t.msecs?t.msecs:(new Date).getTime(),v=void 0!==t.nsecs?t.nsecs:d+1,A=f-s+(v-d)/1e4;if(A<0&&void 0===t.clockseq&&(l=l+1&16383),(A<0||f>s)&&void 0===t.nsecs&&(v=0),v>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");s=f,d=v,o=l;var y=(1e4*(268435455&(f+=122192928e5))+v)%4294967296;p[c++]=y>>>24&255,p[c++]=y>>>16&255,p[c++]=y>>>8&255,p[c++]=255&y;var g=f/4294967296*1e4&268435455;p[c++]=g>>>8&255,p[c++]=255&g,p[c++]=g>>>24&15|16,p[c++]=g>>>16&255,p[c++]=l>>>8|128,p[c++]=255&l;for(var m=0;m<6;++m)p[c+m]=u[m];return e||a(p)}},28:(t,e,n)=>{var i=n(844),o=n(476);t.exports=function(t,e,n){var r=e&&n||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null);var a=(t=t||{}).random||(t.rng||i)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,e)for(var s=0;s<16;++s)e[r+s]=a[s];return e||o(a)}},168:t=>{t.exports={isArray:function(t){return Array.isArray?Array.isArray(t):"[object Array]"===Object.prototype.toString.call(t)}}},644:(t,e,n)=>{var i=n(716),o=n(416),r=n(400),a=n(632);t.exports={xml2js:i,xml2json:o,js2xml:r,json2xml:a}},400:(t,e,n)=>{var i,o,r=n(136),a=n(168).isArray;function s(t,e,n){return(!n&&t.spaces?"\n":"")+Array(e+1).join(t.spaces)}function d(t,e,n){if(e.ignoreAttributes)return"";"attributesFn"in e&&(t=e.attributesFn(t,o,i));var r,a,d,c,p=[];for(r in t)t.hasOwnProperty(r)&&null!==t[r]&&void 0!==t[r]&&(c=e.noQuotesForNativeAttributes&&"string"!=typeof t[r]?"":'"',a=(a=""+t[r]).replace(/"/g,"&quot;"),d="attributeNameFn"in e?e.attributeNameFn(r,a,o,i):r,p.push(e.spaces&&e.indentAttributes?s(e,n+1,!1):" "),p.push(d+"="+c+("attributeValueFn"in e?e.attributeValueFn(a,r,o,i):a)+c));return t&&Object.keys(t).length&&e.spaces&&e.indentAttributes&&p.push(s(e,n,!1)),p.join("")}function c(t,e,n){return i=t,o="xml",e.ignoreDeclaration?"":"<?xml"+d(t[e.attributesKey],e,n)+"?>"}function p(t,e,n){if(e.ignoreInstruction)return"";var r;for(r in t)if(t.hasOwnProperty(r))break;var a="instructionNameFn"in e?e.instructionNameFn(r,t[r],o,i):r;if("object"==typeof t[r])return i=t,o=a,"<?"+a+d(t[r][e.attributesKey],e,n)+"?>";var s=t[r]?t[r]:"";return"instructionFn"in e&&(s=e.instructionFn(s,r,o,i)),"<?"+a+(s?" "+s:"")+"?>"}function u(t,e){return e.ignoreComment?"":"\x3c!--"+("commentFn"in e?e.commentFn(t,o,i):t)+"--\x3e"}function l(t,e){return e.ignoreCdata?"":"<![CDATA["+("cdataFn"in e?e.cdataFn(t,o,i):t.replace("]]>","]]]]><![CDATA[>"))+"]]>"}function h(t,e){return e.ignoreDoctype?"":"<!DOCTYPE "+("doctypeFn"in e?e.doctypeFn(t,o,i):t)+">"}function f(t,e){return e.ignoreText?"":(t=(t=(t=""+t).replace(/&amp;/g,"&")).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),"textFn"in e?e.textFn(t,o,i):t)}function v(t,e,n,r){return t.reduce((function(t,a){var c=s(e,n,r&&!t);switch(a.type){case"element":return t+c+function(t,e,n){i=t,o=t.name;var r=[],a="elementNameFn"in e?e.elementNameFn(t.name,t):t.name;r.push("<"+a),t[e.attributesKey]&&r.push(d(t[e.attributesKey],e,n));var s=t[e.elementsKey]&&t[e.elementsKey].length||t[e.attributesKey]&&"preserve"===t[e.attributesKey]["xml:space"];return s||(s="fullTagEmptyElementFn"in e?e.fullTagEmptyElementFn(t.name,t):e.fullTagEmptyElement),s?(r.push(">"),t[e.elementsKey]&&t[e.elementsKey].length&&(r.push(v(t[e.elementsKey],e,n+1)),i=t,o=t.name),r.push(e.spaces&&function(t,e){var n;if(t.elements&&t.elements.length)for(n=0;n<t.elements.length;++n)switch(t.elements[n][e.typeKey]){case"text":if(e.indentText)return!0;break;case"cdata":if(e.indentCdata)return!0;break;case"instruction":if(e.indentInstruction)return!0;break;default:return!0}return!1}(t,e)?"\n"+Array(n+1).join(e.spaces):""),r.push("</"+a+">")):r.push("/>"),r.join("")}(a,e,n);case"comment":return t+c+u(a[e.commentKey],e);case"doctype":return t+c+h(a[e.doctypeKey],e);case"cdata":return t+(e.indentCdata?c:"")+l(a[e.cdataKey],e);case"text":return t+(e.indentText?c:"")+f(a[e.textKey],e);case"instruction":var A={};return A[a[e.nameKey]]=a[e.attributesKey]?a:a[e.instructionKey],t+(e.indentInstruction?c:"")+p(A,e,n)}}),"")}function A(t,e,n){var i;for(i in t)if(t.hasOwnProperty(i))switch(i){case e.parentKey:case e.attributesKey:break;case e.textKey:if(e.indentText||n)return!0;break;case e.cdataKey:if(e.indentCdata||n)return!0;break;case e.instructionKey:if(e.indentInstruction||n)return!0;break;case e.doctypeKey:case e.commentKey:default:return!0}return!1}function y(t,e,n,r,a){i=t,o=e;var c="elementNameFn"in n?n.elementNameFn(e,t):e;if(null==t||""===t)return"fullTagEmptyElementFn"in n&&n.fullTagEmptyElementFn(e,t)||n.fullTagEmptyElement?"<"+c+"></"+c+">":"<"+c+"/>";var p=[];if(e){if(p.push("<"+c),"object"!=typeof t)return p.push(">"+f(t,n)+"</"+c+">"),p.join("");t[n.attributesKey]&&p.push(d(t[n.attributesKey],n,r));var u=A(t,n,!0)||t[n.attributesKey]&&"preserve"===t[n.attributesKey]["xml:space"];if(u||(u="fullTagEmptyElementFn"in n?n.fullTagEmptyElementFn(e,t):n.fullTagEmptyElement),!u)return p.push("/>"),p.join("");p.push(">")}return p.push(g(t,n,r+1,!1)),i=t,o=e,e&&p.push((a?s(n,r,!1):"")+"</"+c+">"),p.join("")}function g(t,e,n,i){var o,r,d,v=[];for(r in t)if(t.hasOwnProperty(r))for(d=a(t[r])?t[r]:[t[r]],o=0;o<d.length;++o){switch(r){case e.declarationKey:v.push(c(d[o],e,n));break;case e.instructionKey:v.push((e.indentInstruction?s(e,n,i):"")+p(d[o],e,n));break;case e.attributesKey:case e.parentKey:break;case e.textKey:v.push((e.indentText?s(e,n,i):"")+f(d[o],e));break;case e.cdataKey:v.push((e.indentCdata?s(e,n,i):"")+l(d[o],e));break;case e.doctypeKey:v.push(s(e,n,i)+h(d[o],e));break;case e.commentKey:v.push(s(e,n,i)+u(d[o],e));break;default:v.push(s(e,n,i)+y(d[o],r,e,n,A(d[o],e)))}i=i&&!v.length}return v.join("")}t.exports=function(t,e){e=function(t){var e=r.copyOptions(t);return r.ensureFlagExists("ignoreDeclaration",e),r.ensureFlagExists("ignoreInstruction",e),r.ensureFlagExists("ignoreAttributes",e),r.ensureFlagExists("ignoreText",e),r.ensureFlagExists("ignoreComment",e),r.ensureFlagExists("ignoreCdata",e),r.ensureFlagExists("ignoreDoctype",e),r.ensureFlagExists("compact",e),r.ensureFlagExists("indentText",e),r.ensureFlagExists("indentCdata",e),r.ensureFlagExists("indentAttributes",e),r.ensureFlagExists("indentInstruction",e),r.ensureFlagExists("fullTagEmptyElement",e),r.ensureFlagExists("noQuotesForNativeAttributes",e),r.ensureSpacesExists(e),"number"==typeof e.spaces&&(e.spaces=Array(e.spaces+1).join(" ")),r.ensureKeyExists("declaration",e),r.ensureKeyExists("instruction",e),r.ensureKeyExists("attributes",e),r.ensureKeyExists("text",e),r.ensureKeyExists("comment",e),r.ensureKeyExists("cdata",e),r.ensureKeyExists("doctype",e),r.ensureKeyExists("type",e),r.ensureKeyExists("name",e),r.ensureKeyExists("elements",e),r.checkFnExists("doctype",e),r.checkFnExists("instruction",e),r.checkFnExists("cdata",e),r.checkFnExists("comment",e),r.checkFnExists("text",e),r.checkFnExists("instructionName",e),r.checkFnExists("elementName",e),r.checkFnExists("attributeName",e),r.checkFnExists("attributeValue",e),r.checkFnExists("attributes",e),r.checkFnExists("fullTagEmptyElement",e),e}(e);var n=[];return i=t,o="_root_",e.compact?n.push(g(t,e,0,!0)):(t[e.declarationKey]&&n.push(c(t[e.declarationKey],e,0)),t[e.elementsKey]&&t[e.elementsKey].length&&n.push(v(t[e.elementsKey],e,0,!n.length))),n.join("")}},632:(t,e,n)=>{var i=n(400);t.exports=function(t,e){t instanceof Buffer&&(t=t.toString());var n=null;if("string"==typeof t)try{n=JSON.parse(t)}catch(t){throw new Error("The JSON structure is invalid")}else n=t;return i(n,e)}},136:(t,e,n)=>{var i=n(168).isArray;t.exports={copyOptions:function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n},ensureFlagExists:function(t,e){t in e&&"boolean"==typeof e[t]||(e[t]=!1)},ensureSpacesExists:function(t){(!("spaces"in t)||"number"!=typeof t.spaces&&"string"!=typeof t.spaces)&&(t.spaces=0)},ensureAlwaysArrayExists:function(t){"alwaysArray"in t&&("boolean"==typeof t.alwaysArray||i(t.alwaysArray))||(t.alwaysArray=!1)},ensureKeyExists:function(t,e){t+"Key"in e&&"string"==typeof e[t+"Key"]||(e[t+"Key"]=e.compact?"_"+t:t)},checkFnExists:function(t,e){return t+"Fn"in e}}},716:(t,e,n)=>{var i,o,r=n(792),a=n(136),s=n(168).isArray;function d(t){var e=Number(t);if(!isNaN(e))return e;var n=t.toLowerCase();return"true"===n||"false"!==n&&t}function c(t,e){var n;if(i.compact){if(!o[i[t+"Key"]]&&(s(i.alwaysArray)?-1!==i.alwaysArray.indexOf(i[t+"Key"]):i.alwaysArray)&&(o[i[t+"Key"]]=[]),o[i[t+"Key"]]&&!s(o[i[t+"Key"]])&&(o[i[t+"Key"]]=[o[i[t+"Key"]]]),t+"Fn"in i&&"string"==typeof e&&(e=i[t+"Fn"](e,o)),"instruction"===t&&("instructionFn"in i||"instructionNameFn"in i))for(n in e)if(e.hasOwnProperty(n))if("instructionFn"in i)e[n]=i.instructionFn(e[n],n,o);else{var r=e[n];delete e[n],e[i.instructionNameFn(n,r,o)]=r}s(o[i[t+"Key"]])?o[i[t+"Key"]].push(e):o[i[t+"Key"]]=e}else{o[i.elementsKey]||(o[i.elementsKey]=[]);var a={};if(a[i.typeKey]=t,"instruction"===t){for(n in e)if(e.hasOwnProperty(n))break;a[i.nameKey]="instructionNameFn"in i?i.instructionNameFn(n,e,o):n,i.instructionHasAttributes?(a[i.attributesKey]=e[n][i.attributesKey],"instructionFn"in i&&(a[i.attributesKey]=i.instructionFn(a[i.attributesKey],n,o))):("instructionFn"in i&&(e[n]=i.instructionFn(e[n],n,o)),a[i.instructionKey]=e[n])}else t+"Fn"in i&&(e=i[t+"Fn"](e,o)),a[i[t+"Key"]]=e;i.addParent&&(a[i.parentKey]=o),o[i.elementsKey].push(a)}}function p(t){var e;if("attributesFn"in i&&t&&(t=i.attributesFn(t,o)),(i.trim||"attributeValueFn"in i||"attributeNameFn"in i||i.nativeTypeAttributes)&&t)for(e in t)if(t.hasOwnProperty(e)&&(i.trim&&(t[e]=t[e].trim()),i.nativeTypeAttributes&&(t[e]=d(t[e])),"attributeValueFn"in i&&(t[e]=i.attributeValueFn(t[e],e,o)),"attributeNameFn"in i)){var n=t[e];delete t[e],t[i.attributeNameFn(e,t[e],o)]=n}return t}function u(t){var e={};if(t.body&&("xml"===t.name.toLowerCase()||i.instructionHasAttributes)){for(var n,r=/([\w:-]+)\s*=\s*(?:"([^"]*)"|'([^']*)'|(\w+))\s*/g;null!==(n=r.exec(t.body));)e[n[1]]=n[2]||n[3]||n[4];e=p(e)}if("xml"===t.name.toLowerCase()){if(i.ignoreDeclaration)return;o[i.declarationKey]={},Object.keys(e).length&&(o[i.declarationKey][i.attributesKey]=e),i.addParent&&(o[i.declarationKey][i.parentKey]=o)}else{if(i.ignoreInstruction)return;i.trim&&(t.body=t.body.trim());var a={};i.instructionHasAttributes&&Object.keys(e).length?(a[t.name]={},a[t.name][i.attributesKey]=e):a[t.name]=t.body,c("instruction",a)}}function l(t,e){var n;if("object"==typeof t&&(e=t.attributes,t=t.name),e=p(e),"elementNameFn"in i&&(t=i.elementNameFn(t,o)),i.compact){var r;if(n={},!i.ignoreAttributes&&e&&Object.keys(e).length)for(r in n[i.attributesKey]={},e)e.hasOwnProperty(r)&&(n[i.attributesKey][r]=e[r]);!(t in o)&&(s(i.alwaysArray)?-1!==i.alwaysArray.indexOf(t):i.alwaysArray)&&(o[t]=[]),o[t]&&!s(o[t])&&(o[t]=[o[t]]),s(o[t])?o[t].push(n):o[t]=n}else o[i.elementsKey]||(o[i.elementsKey]=[]),(n={})[i.typeKey]="element",n[i.nameKey]=t,!i.ignoreAttributes&&e&&Object.keys(e).length&&(n[i.attributesKey]=e),i.alwaysChildren&&(n[i.elementsKey]=[]),o[i.elementsKey].push(n);n[i.parentKey]=o,o=n}function h(t){i.ignoreText||(t.trim()||i.captureSpacesBetweenElements)&&(i.trim&&(t=t.trim()),i.nativeType&&(t=d(t)),i.sanitize&&(t=t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")),c("text",t))}function f(t){i.ignoreComment||(i.trim&&(t=t.trim()),c("comment",t))}function v(t){var e=o[i.parentKey];i.addParent||delete o[i.parentKey],o=e}function A(t){i.ignoreCdata||(i.trim&&(t=t.trim()),c("cdata",t))}function y(t){i.ignoreDoctype||(t=t.replace(/^ /,""),i.trim&&(t=t.trim()),c("doctype",t))}function g(t){t.note=t}t.exports=function(t,e){var n=r.parser(!0,{}),s={};if(o=s,i=function(t){return i=a.copyOptions(t),a.ensureFlagExists("ignoreDeclaration",i),a.ensureFlagExists("ignoreInstruction",i),a.ensureFlagExists("ignoreAttributes",i),a.ensureFlagExists("ignoreText",i),a.ensureFlagExists("ignoreComment",i),a.ensureFlagExists("ignoreCdata",i),a.ensureFlagExists("ignoreDoctype",i),a.ensureFlagExists("compact",i),a.ensureFlagExists("alwaysChildren",i),a.ensureFlagExists("addParent",i),a.ensureFlagExists("trim",i),a.ensureFlagExists("nativeType",i),a.ensureFlagExists("nativeTypeAttributes",i),a.ensureFlagExists("sanitize",i),a.ensureFlagExists("instructionHasAttributes",i),a.ensureFlagExists("captureSpacesBetweenElements",i),a.ensureAlwaysArrayExists(i),a.ensureKeyExists("declaration",i),a.ensureKeyExists("instruction",i),a.ensureKeyExists("attributes",i),a.ensureKeyExists("text",i),a.ensureKeyExists("comment",i),a.ensureKeyExists("cdata",i),a.ensureKeyExists("doctype",i),a.ensureKeyExists("type",i),a.ensureKeyExists("name",i),a.ensureKeyExists("elements",i),a.ensureKeyExists("parent",i),a.checkFnExists("doctype",i),a.checkFnExists("instruction",i),a.checkFnExists("cdata",i),a.checkFnExists("comment",i),a.checkFnExists("text",i),a.checkFnExists("instructionName",i),a.checkFnExists("elementName",i),a.checkFnExists("attributeName",i),a.checkFnExists("attributeValue",i),a.checkFnExists("attributes",i),i}(e),n.opt={strictEntities:!0},n.onopentag=l,n.ontext=h,n.oncomment=f,n.onclosetag=v,n.onerror=g,n.oncdata=A,n.ondoctype=y,n.onprocessinginstruction=u,n.write(t).close(),s[i.elementsKey]){var d=s[i.elementsKey];delete s[i.elementsKey],s[i.elementsKey]=d,delete s.text}return s}},416:(t,e,n)=>{var i=n(136),o=n(716);t.exports=function(t,e){var n,r,a;return n=function(t){var e=i.copyOptions(t);return i.ensureSpacesExists(e),e}(e),r=o(t,n),a="compact"in n&&n.compact?"_parent":"parent",("addParent"in n&&n.addParent?JSON.stringify(r,(function(t,e){return t===a?"_":e}),n.spaces):JSON.stringify(r,null,n.spaces)).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}},180:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isNull=function(t){return null==t}},755:(t,e)=>{"use strict";function n(t){var e=t.url,i=t.onError,o=t.onSuccess,r=t.retries,a=void 0===r?2:r,s=t.headers;if(0!==a){for(var d=new XMLHttpRequest,c=0,p=Object.entries(s||{});c<p.length;c++){var u=p[c],l=u[0],h=u[1];d.setRequestHeader(l,h)}d.open("GET",e,!0),d.onerror=function(){n({onError:i,onSuccess:o,retries:a-1,url:e})},d.onload=function(t){o(t.responseText)},d.send()}else i(e+" fetch failed after 3 attempts")}Object.defineProperty(e,"__esModule",{value:!0}),e.fetchUrl=function(t){var e=t.url,i=t.loadCallback,o=void 0===i?function(){}:i,r=t.syncInBrowser,a=void 0!==r&&r;if(!e)throw new Error("'url' is undefined");if(a)return function(t){for(var e=t.url,n=t.retries,i=void 0===n?2:n,o=0,r=[];o++<i;){var a=void 0;try{if((a=new XMLHttpRequest).open("GET",e,!1),a.send(),a.status>=200&&a.status<400)return a.responseText}catch(t){r.push("REQ #"+o+" message : "+t.message),t.name&&r.push("REQ #"+o+" name : "+t.name),t.code&&r.push("REQ #"+o+" code : "+t.code)}a&&a.status&&r.push("REQ #"+o+" status : "+a.status)}throw new Error(e+" fetch failed after "+o+" attempts. "+r.join(", "))}({url:e});n({onError:function(){throw new Error(e+" fetch failed")},onSuccess:o,url:e})}},128:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n="[33m",i="[0m",o=n+"VAST-LIBRARY [31mERROR"+n+":"+i,r=n+"VAST-LIBRARY WARNING:"+i;function a(t){try{console.error(o+" "+t)}catch(e){console.log(o+" "+t)}}function s(t){try{console.warn(r+" "+t)}catch(e){console.log(r+" "+t)}}e.warnOrThrow=function(t,e,n){if(void 0===n&&(n=!1),e.logWarn&&(n?a(t):s(t)),n&&e.throwOnError)throw new Error(t)},e.logError=a,e.logWarn=s},228:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.stripCDATA=function(t){return t.replace("<![CDATA[","").replace("]]>","").trim()},e.hasCDATA=function(t){return t&&-1!==t.indexOf("<![CDATA[")}},731:function(t,e,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var o=n(644),r=n(352),a=n(755),s=n(128);function d(t,e){if(t&&t.elements)if(1===t.elements.length&&(t.elements[0].text||t.elements[0].cdata)){var n=t.elements[0],i=String(n.text||n.cdata);e.content=i}else for(var o=0;o<t.elements.length;o++){d(n=t.elements[o],e.attachCustomTag(n.name,n.attributes))}}function c(t,e){var n;void 0===e&&(e={}),e=i({logWarn:!1},e);try{n=o.xml2js(t)}catch(t){s.warnOrThrow("Error during the vast parsing, it seems not valid XML",e)}return function(t,e){void 0===e&&(e={});e=i({logWarn:!1},e);var n=new r.default;return n.parseOptions(e),d(t,n),n}(n,{vastRawCode:t})}function p(t,e){return void 0===e&&(e=[]),e.reduce((function(t,e){var n=e.key,i=e.value;return t.replace(new RegExp("(#{|\\[)"+n+"(}|\\])"),i)}),t)}e.buildVast=d,e.createVastWithBuilder=c,e.downloadVastAndWrappersSync=function(t,e){var n,i=[];do{if(n=c(a.fetchUrl({url:p(t,e.macrosToReplace),syncInBrowser:!0})),i.push(n),n.isWrapper()){var o=n.get(["VASTAdTagURI"])[0];o&&(t=o.getContent())}}while(n.isWrapper());return i},e.replaceMacros=p,e.downloadVastAndWrappersAsync=function t(e,n,i,o){var r,s=o||[],d=p(e,n.macrosToReplace);n.urlWrapper&&(d=n.urlWrapper+encodeURIComponent(d)),a.fetchUrl({headers:n.headers,loadCallback:function(o,a){if(a)return i(s,a);if(r=c(o),s.push(r),r.isWrapper()){var d=r.get(["VASTAdTagURI"])[0];d&&(e=d.getContent()),t(e,n,i,s)}else i(s,a)},syncInBrowser:!0,timeout:n.timeout,url:d})}},352:function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},i(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var a=n(772),s=n(644),d=n(128),c=n(228),p={_declaration:{_attributes:{encoding:"utf-8",version:"1.0"}}},u=function(){function t(t,e,n,i,o){void 0===t&&(t="root"),void 0===e&&(e=null),void 0===n&&(n={attrs:[]}),this.parent=e,this.name=t,"string"==typeof i?(c.hasCDATA(i)&&(this.cdataThisOne=!0),this.content=c.stripCDATA(i),this.attrs=o||{}):(this.content=null,this.attrs=i||{}),this.childs=[],this.infos={attrs:n.attrs||[]},this.parseOptions(e&&e.options||{})}return t.prototype.getName=function(){return this.name},t.prototype.getParent=function(){return this.and()},t.prototype.getContent=function(){return this.content},t.prototype.getInfos=function(){return this.infos},t.prototype.getAttr=function(t){var e=this.getValidAttrs();return Object.keys(this.getValidAttrs()).reduce((function(t,n){return t[n.toLowerCase()]=e[n],t}),{})[t.toLowerCase()]},t.prototype.getValidAttrs=function(){var t=this;return"all"===this.infos.attrs?this.attrs:Object.keys(this.attrs).reduce((function(e,n){var i;return-1!==t.infos.attrs.indexOf(n)?r({},e,((i={})[n]=t.attrs[n],i)):(d.warnOrThrow('WARNING: the attribute "'+n+'" does not exists in "'+t.name+'" Tag. It was ignored.\n            Here is the allowed list: '+t.infos.attrs,t.options),e)}),{})},t.prototype.getAttrs=function(){return d.logWarn("getAttrs() method is deprecated, use getValidAttrs() instead."),this.getValidAttrs()},t.prototype.and=function(){return this.parent},t.prototype.back=function(){return this.and().and()},t.prototype.cdata=function(){return this.cdataThisOne=!0,this},t.prototype.text=function(){return this.cdataThisOne=!1,this},t.prototype.attachCustomTag=function(e,n,i){var o=new t(e,this,{attrs:"all"},n,i);return this.childs.push(o),o},t.prototype.addCustomTag=function(t,e,n){return this.attachCustomTag(t,e,n).and()},t.prototype.hasAttrs=function(){return Object.keys(this.attrs).length>0},t.prototype.getJson=function(){var t={};this.childs.forEach((function(e){t[e.name]=t[e.name]||[];var n=e.getJson();Object.keys(n).length>0&&t[e.name].push(n)}));var e={};return this.hasAttrs()&&(e._attributes=this.getValidAttrs()),this.content&&(!0===this.cdataThisOne||!1!==this.cdataThisOne&&this.options.cdata?e._cdata=this.content:e._text=this.content),r({},e,t)},t.prototype.getRoot=function(){for(var t=this.parent||this;t.parent;)t=t.parent;return t},t.prototype.toXml=function(){return s.js2xml(r({},p,this.getRoot().getJson()),r({compact:!0},this.options))},t.prototype.getVastVersion=function(){return parseInt(this.getVersionRaw())},t.prototype.getVastSnakeVersion=function(){return this.getVersionRaw().replace(".","_")},t.prototype.getChilds=function(t){return this.childs.filter((function(e){return e.name===t}))},t.prototype.get=function(t,e){if(void 0===t&&(t=[]),void 0===e&&(e=!0),0===t.length)return[this];var n=[],i=e?this.getRoot():this;return Object.keys(i.childs).forEach((function(e){var o=i.childs[e];o.name===t[0]?1===t.length?n.push(o):n.push(o.get(t.slice(1),!1)):n.push(o.get(t,!1))})),a(n)},t.prototype.getCustom=function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=!0),this.get(t,e)},t.prototype.isWrapper=function(){return this.get(["Wrapper"]).length>0},t.prototype.parseOptions=function(t){this.options=r({cdata:!0,logWarn:!0,spaces:2,throwOnError:!1,vastRawCode:t.vastRawCode},t)},t.prototype.getVastRawCode=function(){return this.options.vastRawCode},t.prototype.getVersionRaw=function(){return this.getRoot().getChilds("VAST")[0].getAttr("version")},t}();e.default=u;var l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.and=function(){return this},e}(u);e.VastElementRoot=l},32:(t,e,n)=>{"use strict";var i=n(772),o=n(592),r=n(180),a=n(128),s=n(731),d=function(){function t(t){void 0===t&&(t={}),this.options=t,this.vasts=[]}return t.prototype.addVastWithoutFetching=function(t){this.vasts.push(s.createVastWithBuilder(t))},t.prototype.parseAsync=function(t,e){var n=this;this.cleanVasts(),s.downloadVastAndWrappersAsync(t,this.options,(function(t,i){n.vasts=t,e(n,i)}))},t.prototype.parseSync=function(t){if(this.cleanVasts(),o.isNode)throw new Error("parseSync is only available in a browser context");return this.vasts=s.downloadVastAndWrappersSync(t,this.options),this},t.prototype.getVasts=function(){return this.vasts},t.prototype.getVastElements=function(t){return i(this.vasts.map((function(e){return e.get(t,!0)})))},t.prototype.getVastsRaw=function(){return this.vasts.map((function(t){return t.getVastRawCode()}))},t.prototype.getCustomVastElements=function(t){return this.getVastElements(t)},t.prototype.getContents=function(t){var e=this;return this.getVastElements(t).map((function(t){return r.isNull(t.content)&&a.warnOrThrow(t.name+" does not have content",e.options),t.content})).filter((function(t){return t}))},t.prototype.getCustomContents=function(t){return this.getContents(t)},t.prototype.getAttributes=function(t,e){var n=this;return this.getVastElements(t).map((function(t){var i={};return Object.keys(t.attrs).forEach((function(e){i[e.toLowerCase()]=t.attrs[e]})),r.isNull(i[e.toLowerCase()])&&a.warnOrThrow(t.name+" does not have attribute "+e,n.options),i[e.toLowerCase()]})).filter((function(t){return t}))},t.prototype.getCustomAttributes=function(t,e){return this.getAttributes(t,e)},t.prototype.cleanVasts=function(){this.vasts=[]},t}();e.c=d}},e={};function n(i){var o=e[i];if(void 0!==o)return o.exports;var r=e[i]={exports:{}};return t[i].call(r.exports,r,r.exports,n),r.exports}(()=>{"use strict";var t,e,i;!function(t){t[t.InStream=1]="InStream",t[t.OutStream=2]="OutStream",t[t.Banner=3]="Banner"}(t||(t={})),function(t){t[t.ContentRoll=1]="ContentRoll",t[t.Wrapper=2]="Wrapper",t[t.VastVPaid=3]="VastVPaid",t[t.Banner=4]="Banner",t[t.StoriesRoll=5]="StoriesRoll",t[t.InstreamRoll=6]="InstreamRoll"}(e||(e={})),function(t){t[t.inpage=10]="inpage",t[t.inbanner=11]="inbanner",t[t.sticky=12]="sticky",t[t.banner_300x250=20]="banner_300x250",t[t.banner_300x600=21]="banner_300x600",t[t.banner_240x400=22]="banner_240x400",t[t.banner_728x90=23]="banner_728x90",t[t.auto=30]="auto",t[t.pre=31]="pre",t[t.middle=32]="middle",t[t.post=33]="post",t[t.pause=34]="pause",t[t.overlay=40]="overlay"}(i||(i={}));var o,r=function(){function t(t,e,n){void 0===n&&(n=.5),this.isInVisibleState=!1,(n>1||n<=0)&&(n=1),this.threshold=n,this.onPageDetector(e),this.visibilityDetector(t,e)}return t.prototype.onPageDetector=function(t){var e=this;window.addEventListener("visibilitychange",(function(n){switch(window.document.visibilityState){case"visible":e.isInVisibleState&&t(!0);break;case"hidden":t(!1)}}))},t.prototype.visibilityDetector=function(t,e){var n=this,i=new IntersectionObserver((function(t){var i;(null===(i=t[0])||void 0===i?void 0:i.isIntersecting)?(n.isInVisibleState=!0,e(!0)):(n.isInVisibleState=!1,e(!1))}),{threshold:this.threshold});try{i.observe(t)}catch(t){}},t}(),a=function(t,e,n){if(n||2===arguments.length)for(var i,o=0,r=e.length;o<r;o++)!i&&o in e||(i||(i=Array.prototype.slice.call(e,0,o)),i[o]=e[o]);return t.concat(i||Array.prototype.slice.call(e))};!function(t){var e;!function(t){t[t.NO=0]="NO",t[t.BACKEND=1]="BACKEND",t[t.ERROR=2]="ERROR",t[t.INFO=3]="INFO",t[t.DEBUG=4]="DEBUG"}(e=t.Level||(t.Level={}));var n=e.BACKEND,i=[];function o(t,e){i.push([t,e])}t.backend=function(t){for(var i=[],r=1;r<arguments.length;r++)i[r-1]=arguments[r];n>=e.BACKEND&&o("MoeVideo Backend (".concat(c.Instance().GetInstrumentName(),"-").concat(c.Instance().GetSlotName(),") (").concat(s(),"): ")+t,i)},t.error=function(t){for(var i=[],r=1;r<arguments.length;r++)i[r-1]=arguments[r];n>=e.ERROR&&o("MoeVideo Error (".concat(c.Instance().GetInstrumentName(),"-").concat(c.Instance().GetSlotName(),") (").concat(s(),"): ")+t,i)},t.info=function(t){for(var i=[],r=1;r<arguments.length;r++)i[r-1]=arguments[r];n>=e.INFO&&o("MoeVideo Info (".concat(c.Instance().GetInstrumentName(),"-").concat(c.Instance().GetSlotName(),") (").concat(s(),"): ")+t,i)},t.debug=function(t){for(var i=[],r=1;r<arguments.length;r++)i[r-1]=arguments[r];n>=e.DEBUG&&o("MoeVideo Debug (".concat(c.Instance().GetInstrumentName(),"-").concat(c.Instance().GetSlotName(),") (").concat(s(),"): ")+t,i)};var r=Date.now();function s(){return((Date.now()-r)/1e3).toFixed(2)+"s"}t.Elapsed=s;var d="#mvdebug"===location.hash,p=setInterval((function(){if(!(c.Instance().GetUserUid().length<=0))if(c.Instance().IsTestUser()||d)for(;i.length>0;){var t=i.shift();console.log.apply(console,a([t[0]],t[1],!1))}else clearInterval(p)}),50)}(o||(o={}));var s,d,c=function(){function t(){this.store={},this.DEFAULT_ADVERT_COUNT_FOR_VAST_VPAID_INSTRUMENT=1,this.DEFAULT_ADVERT_COUNT_FOR_CONTENT_ROLL_INSTRUMENT=0,this.tracks={},this.cookies={e918b190ae496585a464:1,"903586990269a05c8dfa":1,ea6e66a46c7968303fd1:1,"599119df90fd38dd4718":1,f3cf29ad4b9788c12027:1,"6492dd60a072cb72593d":1,d2fc49edc86e14e832d6:1,"9565881d1d98d665d864":1,de038631cc2e65096b60:1,"6763b88cfb7b65253109":1}}return t.prototype.set=function(t,e){o.info('AdParameters set parameter "'.concat(t," => ").concat(e,'"')),this.store[t]=e},t.prototype.get=function(t){return this.store[t]},t.prototype.Init=function(t){var e=this;return new Promise((function(n,r){o.info('AdParameters parse "'.concat(t,'"'));try{var a=JSON.parse(t);for(var c in a)switch(c){case d.advertCount:e.set(s.ADVERT_COUNT,a[c]);break;case s.Slot:var p=a[c].toLocaleLowerCase();a[c]=i[p],void 0===a[c]&&(a[c]=i.pre),e.set(c,a[c]);break;default:e.set(c,a[c])}o.info("AdParameters full:",e.store)}catch(e){o.info('AdParameters parse exception: "'.concat(t,'" ').concat(e.message))}n()}))},t.prototype.setConfig=function(t){return this.config=t,this},t.prototype.getConfig=function(){return this.config},t.prototype.SetInstreamRollMediaTagContent=function(t){t.media.map((function(t){void 0===(null==t?void 0:t.title)&&(t.title="")})),this.set("MediaTagContent",t)},t.prototype.GetPos=function(){return this.get("pos")},t.prototype.SetInstreamRollMediaList=function(t){this.set("ContentVideoList",t)},t.prototype.GetInstreamRollMediaTagContent=function(){return this.get("MediaTagContent")},t.prototype.SetInstreamRollOldMediaTagContent=function(t){this.set("MediaTagContent",t)},t.prototype.GetInstreamRollOldMediaTagContent=function(){return this.get("MediaTagContent")},t.prototype.SetScriptElement=function(t){this.set("ScriptElement",t)},t.prototype.GetScriptElement=function(){return this.get("ScriptElement")},t.prototype.SetBackend=function(t){this.set(s.Backend,t)},t.prototype.GetBackend=function(){return this.get(s.Backend)},t.prototype.SetBannedByDomain=function(t){this.set(s.BannedByDomain,t)},t.prototype.SetBannedByPlacement=function(t){this.set(s.BannedByPlacement,t)},t.prototype.SetBannedByWebmaster=function(t){this.set(s.BannedByWebmaster,t)},t.prototype.GetTargetAdvert=function(){return this.get(s.TargetAdvert)},t.prototype.IsTrafficBanned=function(){return+this.get(s.BannedByDomain)>0||(+this.get(s.BannedByPlacement)>0||+this.get(s.BannedByWebmaster)>0)},t.prototype.SetCurrentWorker=function(t){this.set(s.Worker,t)},t.prototype.GetCurrentWorker=function(){return this.get(s.Worker)},t.prototype.SetVersion=function(t){this.set(s.Version,t)},t.prototype.GetVersion=function(){return this.get(s.Version)},t.prototype.SetInstrument=function(t){this.set(s.Instrument,t)},t.prototype.GetInstrument=function(){return this.get(s.Instrument)},t.prototype.GetInstrumentName=function(){return e[this.GetInstrument()]},t.prototype.IsInstrumentContentRoll=function(){return this.GetInstrument()===e.ContentRoll},t.prototype.SetSlot=function(t){this.set(s.Slot,t)},t.prototype.GetSlot=function(){return this.get(s.Slot)},t.prototype.GetSlotName=function(){return i[this.GetSlot()]},t.prototype.IsInstrumentInFlyMode=function(){try{return"stick"===this.store[s.Fly][s.Mode]}catch(t){}return!1},t.prototype.SetPlacement=function(t){this.set(s.Placement,t)},t.prototype.GetPlacement=function(){return+this.get(s.Placement)},t.prototype.GetInitialVolumeLevel=function(){var t=this.get(s.Volume);if(void 0!==t){if(!isNaN(+t))return t}else if(this.get(s.Slot)===i.pre)return 1;return 0},t.prototype.SetSiteID=function(t){this.set(s.SiteID,t)},t.prototype.GetSiteID=function(){return this.get(s.SiteID)},t.prototype.SetWidth=function(t){this.set(s.Width,t)},t.prototype.SetHeigth=function(t){this.set(s.Height,t)},t.prototype.SetViewMode=function(t){this.set(s.ViewMode,t)},t.prototype.SetDesiredBitrate=function(t){this.set(s.DesiredBitrate,t)},t.prototype.GetWidth=function(){return this.get(s.Width)},t.prototype.GetHeight=function(){return this.get(s.Height)},t.prototype.GetViewMode=function(){return this.get(s.ViewMode)},t.prototype.GetDesiredBitrate=function(){return this.get(s.DesiredBitrate)},t.prototype.SetUserUid=function(t){this.set(s.UserUid,t)},t.prototype.GetUserUid=function(){var t=this.get(s.UserUid);return t||""},t.prototype.GetMacrosReferer=function(){var t=this.get(s.MacrosReferer);return t||(t=""),t},t.prototype.GetMacrosSite=function(){var t=this.get(s.MacrosReferer);return t||(t=""),(t.indexOf("//")>-1?t.split("/")[2]:t.split("/")[0]).split(":")[0].split("?")[0]},t.prototype.GetMacrosWebmaster=function(){return this.get(s.MacrosWebmaster)},t.prototype.SetAdvertCount=function(t){this.set(s.ADVERT_COUNT,t)},t.prototype.GetAdvertCount=function(){var t=this.get(s.ADVERT_COUNT);if(isNaN(t)||t<0)switch(this.GetInstrument()){case e.VastVPaid:return this.DEFAULT_ADVERT_COUNT_FOR_VAST_VPAID_INSTRUMENT;case e.ContentRoll:return this.DEFAULT_ADVERT_COUNT_FOR_CONTENT_ROLL_INSTRUMENT;default:return 0}return t},t.prototype.SetTrackCall=function(t,e){this.tracks[t+e]=!0},t.prototype.FinishTrackCall=function(t,e){delete this.tracks[t+e]},t.prototype.IsTrackCallStackEmpty=function(){return 0===Object.keys(this.tracks).length},t.Instance=function(){return void 0===t.instance&&(t.instance=new t),t.instance},t.prototype.IsTestUser=function(){return!!this.cookies[this.GetUserUid()]},t.prototype.SetTestUserForce=function(){for(var t in this.cookies){this.SetUserUid(t);break}},t}();!function(t){t.Backend="backend",t.Worker="worker",t.Version="version",t.Placement="placement",t.Volume="volume",t.Instrument="instrument",t.Slot="slot",t.Fly="fly",t.Mode="mode",t.UserUid="user_uid",t.SiteID="site_id",t.Width="width",t.Height="height",t.ViewMode="viewMode",t.DesiredBitrate="desiredBitrate",t.MacrosReferer="referer",t.MacrosWebmaster="user_id",t.ADVERT_COUNT="advert_count",t.TargetAdvert="ta",t.BannedByDomain="banned_by_domain",t.BannedByPlacement="banned_by_placement",t.BannedByWebmaster="banned_by_webmaster"}(s||(s={})),function(t){t.advertCount="advertCount"}(d||(d={}));var p,u,l,h,f,v,A,y=function(){return y=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},y.apply(this,arguments)},g=function(){function t(){}return t.replace=function(t,e){void 0===e&&(e={});for(var n=0,i=m;n<i.length;n++){var o=i[n],r=t.match(o.regexp);if(r){var a=o.processor(r,y({},e));a&&(t=t.replace(o.regexp,a))}}return t},t}(),m=[{regexp:/\[pos\]/,processor:function(t,e){return"pos"in e?e.pos:void 0}},{regexp:/\[height\]/,processor:function(t,e){return"height"in e?e.height:void 0}},{regexp:/\[width\]/,processor:function(t,e){return"width"in e?e.width:void 0}},{regexp:/\[user_id\]/,processor:function(t,e){return"user_id"in e?e.user_id:void 0}},{regexp:/\[user_uid\]/,processor:function(t,e){return"user_uid"in e?e.user_uid:void 0}},{regexp:/\[site\]/,processor:function(t,e){var n;return e.site?e.site:(null===(n=null===location||void 0===location?void 0:location.ancestorOrigins)||void 0===n?void 0:n.length)>0?location.ancestorOrigins[location.ancestorOrigins.length-1]:location.href}},{regexp:/\[site_id\]/g,processor:function(t,e){return"site_id"in e?e.site_id:void 0}},{regexp:/\[ua\]/,processor:function(t,e){return"ua"in e?e.ua:void 0}},{regexp:/\[ip\]/,processor:function(t,e){return"ip"in e?e.ip:void 0}},{regexp:/\[referer\]/,processor:function(t,e){var n="";return n=e.referer?e.referer:location.href,encodeURIComponent(n)}},{regexp:/\[frameref\]/,processor:function(t,e){return"frameref"in e?e.frameref:void 0}},{regexp:/\[truesite\]/g,processor:function(t,e){var n,i="";if(null===(n=null===location||void 0===location?void 0:location.ancestorOrigins)||void 0===n?void 0:n.length){var o=document.createElement("a");o.href=location.ancestorOrigins[location.ancestorOrigins.length-1],i=o.hostname}else i=location.host;return i}},{regexp:/\[redservize_canplay\]/,processor:function(t,e){var n={"video/mp4":1,"video/webm":2,"video/x-flv":3,"application/x-shockwave-flash":4,"application/javascript":5},i={"application/javascript":!0},o=[];for(var r in n)n.hasOwnProperty(r)&&i.hasOwnProperty(r)&&o.push(n[r]);return o.join(",")}},{regexp:/\[hostname\]/,processor:function(t,e){return window.location.hostname}},{regexp:/\[ad_uid\]/,processor:function(t,e){return"ad_uid"in e?e.ad_uid:void 0}},{regexp:/\[ads_id\]/,processor:function(t,e){return"ads_id"in e?e.ads_id:void 0}},{regexp:/\[timestamp\]/,processor:function(t,e){return Date.now()/1e3}},{regexp:/\[random(\((\d+),(\d+)\))?\]/,processor:function(t,e){var n=0,i=1e7;return t[1]&&t[2]&&(n=parseInt(t[1],8),i=parseInt(t[2],8)),I(n,i)}},{regexp:/\[duration(\((\d+),(\d+)\))?\]/,processor:function(t,e){var n=60,i=260;return t[1]&&t[2]&&(n=parseInt(t[1],8),i=parseInt(t[2],8)),I(n,i)}}];function I(t,e){return void 0===t&&(t=0),void 0===e&&(e=Number.MAX_SAFE_INTEGER),Math.round(Math.random()*(e-t)+t)}!function(t){var e={1:["https://moevideo-sync.rutarget.ru/sync"],2:["https://ad.adriver.ru/cgi-bin/rle.cgi?sid=1&ad=719570&bt=21&bn=719570"],3:["https://sync.bumlam.com/?src=mvn&uid=[user_uid]"],4:["https://kimberlite.io/rtb/sync/moevideo","https://kimberlite.io/rtb/sync/moevideo"],6:["https://exchange.buzzoola.com/cookiesync/redirect/moevideo?redirect_url=https%3A%2F%2Frtb.moe.video%2Fcs%3Fd%3D6%26b%3D%24%7BUUID%7D"],7:["https://ads.betweendigital.com/match?bidder_id=42837&callback_url=https%3A%2F%2Frtb.moe.video%2Fcs%3Fd%3D7%26b%3D%24%7BUSER_ID%7D"],8:["https://dm-eu.hybrid.ai/match?id=117"],9:["https://px.adhigh.net/p/cm/moevideo"],10:["https://sync.upravel.com/moevideo/sync"],11:["https://sm.rtb.mts.ru/p?ssp=moevideo&id=[user_uid]"],12:["https://sync.dmp.otm-r.com/match/moevideo"],13:["https://sync.adspend.space/moevideo?uid=[user_uid]"],14:["https://ssp.al-adtech.com/api/sync/myvideo"],15:["https://match.qtarget.tech/userbind?src=moevideo&id=[user_uid]"],17:["https://sync.programmatica.com/match/MoeVideo?id=[user_uid]"],19:["https://match.new-programmatic.com/userbind?src=moevideo&id=[user_uid]"],20:["https://www.acint.net/rmatch?dp=115&r=https%3A%2F%2Frtb.moe.video%2Fcs%3Fd%3D20%26b%3D%24%7BUSER_ID%7D","https://acint.net/cmatch?dp=115"],21:["https://sync.rambler.ru/set?partner_id=f14de6f1-fb82-4373-9a57-bf8347061ce2&id=[user_uid]"],22:["https://sync.upravel.com/moevideo_outstream/sync"],24:["https://sync.opendsp.ru/match/Moevideo?id=[user_uid]"]};t.CallRTBPixel=function(t){var n=t[0];20!=n.length&&(n=c.Instance().GetUserUid()),t.map((function(t){return function(t,n){var i=e[n];if(i){if(!1===Array.isArray(i))return;i.forEach((function(e){e=g.replace(e,{user_uid:t}),setTimeout((function(){return fetch(e,{mode:"no-cors",credentials:"include"})}),1e3)}))}}(n,t)}))},t.AdriverFPSPixel=function(){try{var t=document.createElement("script");t.src="https://content.adriver.ru/AdRiverFPS.js",window.document.head.appendChild(t)}catch(t){}},t.MailFpIdPixel=function(){try{var t=document.createElement("script");t.src="https://ad.mail.ru/static/sync-loader.js",window.document.head.appendChild(t)}catch(t){}}}(p||(p={})),function(t){t.AdLog="AdLog",t.AdTime="AdTime",t.AdError="AdError",t.AdPaused="AdPaused",t.AdLoaded="AdLoaded",t.AdPlaying="AdPlaying",t.AdStarted="AdStarted",t.AdStopped="AdStopped",t.AdSkipped="AdSkipped",t.AdUserClose="AdUserClose",t.AdClickThru="AdClickThru",t.AdVideoStart="AdVideoStart",t.AdImpression="AdImpression",t.AdSizeChange="AdSizeChange",t.AdInteraction="AdInteraction",t.AdVolumeChange="AdVolumeChange",t.AdUserMinimize="AdUserMinimize",t.AdLinearChange="AdLinearChange",t.AdVideoMidpoint="AdVideoMidpoint",t.AdVideoComplete="AdVideoComplete",t.AdDurationChange="AdDurationChange",t.AdExpandedChange="AdExpandedChange",t.AdVideoFirstQuartile="AdVideoFirstQuartile",t.AdVideoThirdQuartile="AdVideoThirdQuartile",t.AdRemainingTimeChange="AdRemainingTimeChange",t.AdSkippableStateChange="AdSkippableStateChange",t.AdUserAcceptInvitation="AdUserAcceptInvitation"}(u||(u={})),function(t){t.AdBannerNURL="AdBannerNURL"}(l||(l={})),function(t){t.startAd="startAd",t.stopAd="stopAd",t.resizeAd="resizeAd",t.pauseAd="pauseAd",t.resumeAd="resumeAd",t.expandAd="expandAd",t.collapseAd="collapseAd",t.skipAd="skipAd"}(h||(h={})),function(t){t.getAdLinear="getAdLinear",t.getAdWidth="getAdWidth",t.getAdHeight="getAdHeight",t.getAdExpanded="getAdExpanded",t.getAdSkippableState="getAdSkippableState",t.getAdRemainingTime="getAdRemainingTime",t.getAdDuration="getAdDuration",t.getAdCompanions="getAdCompanions",t.setAdVolume="setAdVolume",t.getAdVolume="getAdVolume",t.getAdIcons="getAdIcons"}(f||(f={})),function(t){t.initAd="initAd",t.subscribe="subscribe",t.unsubscribe="unsubscribe",t.AdErrorEmpty="AdErrorEmpty",t.AdORD="AdORD",t.AdFinish="AdFinish"}(v||(v={})),function(t){t.normal="normal",t.thumbnail="thumbnail",t.fullscreen="fullscreen"}(A||(A={}));var C,S=function(){function t(e,n,i,r,a,s){var d=this;this.parent=e,this.advert=n,this.property={getAdDuration:"",getAdCompanions:"",getAdExpanded:!1,getAdIcons:!1,getAdLinear:!1,getAdSkippableState:!1,getAdWidth:0,getAdHeight:0,getAdVolume:0,getAdRemainingTime:0},this.container=document.createElement("iframe"),this.container.id=n,this.container.width="100%",this.container.height="100%",this.container.frameBorder="0",this.container.scrolling="no",this.container.style.overflow="hidden",this.container.style.border="0",this.container.src=t.appendToFrameSrc(i,"vast_id",n),this.container.style.position="absolute",this.container.style.top="0",this.container.style.left="0",this.Hide(),this.container.onload=function(){var t=v.initAd,e=[a.width,a.height,a.viewMode,a.bitrate,r,s];d.container.contentWindow.postMessage(JSON.stringify([t,e]),"*"),window.addEventListener("message",(function(t){try{o.debug('vpaid (id:"'.concat(d.advert,'") foreign api receive event from frame: "').concat(t.data,'"'));var e=JSON.parse(t.data),n=e[0],i=e[1],r=e[2];if(d.advert!==n)return void o.debug('vpaid foreign api receive event from unknown frame "'.concat(n,'": "').concat(t.data,'"'));if(i===v.initAd)for(var a in r)d.property[a]=r[a];else f[i]?(o.debug('vpaid (id:"'.concat(d.advert,'") foreign api property: "').concat(i,'" "').concat(r,'"')),d.property[i]=r):(o.debug('vpaid (id:"'.concat(d.advert,'") foreign api call: "').concat(i,'"')),d[i]())}catch(e){o.debug("vpaid foreign api exception:".concat(t.data,", ").concat(e.message))}}))}}return t.prototype.GetAdvertID=function(){return this.advert},t.prototype.GetContainer=function(){return this.container},t.prototype.Show=function(){this.container.style.display=null},t.prototype.Hide=function(){this.container.style.setProperty("display","none","important")},t.prototype.Remove=function(){this.container.remove()},t.prototype.getAdCompanions=function(){var t,e;return o.info('vpaid (id:"'.concat(this.advert,'") foreign api "').concat(f.getAdCompanions,'" ').concat(null===(t=this.property)||void 0===t?void 0:t.getAdCompanions)),null===(e=this.property)||void 0===e?void 0:e.getAdCompanions},t.prototype.getAdDuration=function(){var t,e;return o.info('vpaid (id:"'.concat(this.advert,'") foreign api "').concat(f.getAdDuration,'" ').concat(null===(t=this.property)||void 0===t?void 0:t.getAdDuration)),+(null===(e=this.property)||void 0===e?void 0:e.getAdDuration)},t.prototype.getAdExpanded=function(){var t,e;return o.info('vpaid (id:"'.concat(this.advert,'") foreign api "').concat(f.getAdExpanded,'" ').concat(null===(t=this.property)||void 0===t?void 0:t.getAdExpanded)),null===(e=this.property)||void 0===e?void 0:e.getAdExpanded},t.prototype.getAdHeight=function(){var t,e;return o.info('vpaid (id:"'.concat(this.advert,'") foreign api "').concat(f.getAdHeight,'" ').concat(null===(t=this.property)||void 0===t?void 0:t.getAdHeight)),null===(e=this.property)||void 0===e?void 0:e.getAdHeight},t.prototype.getAdIcons=function(){var t,e;return o.info('vpaid (id:"'.concat(this.advert,'") foreign api "').concat(f.getAdIcons,'" ').concat(null===(t=this.property)||void 0===t?void 0:t.getAdIcons)),null===(e=this.property)||void 0===e?void 0:e.getAdIcons},t.prototype.getAdLinear=function(){var t,e;return o.info('vpaid (id:"'.concat(this.advert,'") foreign api "').concat(f.getAdLinear,'" ').concat(null===(t=this.property)||void 0===t?void 0:t.getAdLinear)),null===(e=this.property)||void 0===e?void 0:e.getAdLinear},t.prototype.getAdRemainingTime=function(){var t,e;return o.info('vpaid (id:"'.concat(this.advert,'") foreign api "').concat(f.getAdRemainingTime,'" ').concat(null===(t=this.property)||void 0===t?void 0:t.getAdRemainingTime)),null===(e=this.property)||void 0===e?void 0:e.getAdRemainingTime},t.prototype.getAdSkippableState=function(){var t,e;return o.info('vpaid (id:"'.concat(this.advert,'") foreign api "').concat(f.getAdSkippableState,'" ').concat(null===(t=this.property)||void 0===t?void 0:t.getAdSkippableState)),null===(e=this.property)||void 0===e?void 0:e.getAdSkippableState},t.prototype.setAdVolume=function(t){o.info('vpaid (id:"'.concat(this.advert,'") foreign api "').concat(f.setAdVolume,'" ').concat(t)),this.container.contentWindow.postMessage(JSON.stringify([f.setAdVolume,[t]]),"*")},t.prototype.getAdVolume=function(){var t,e;return o.info('vpaid (id:"'.concat(this.advert,'") foreign api "').concat(f.getAdVolume,'" ').concat(null===(t=this.property)||void 0===t?void 0:t.getAdVolume)),null===(e=this.property)||void 0===e?void 0:e.getAdVolume},t.prototype.getAdWidth=function(){var t,e;return o.info('vpaid (id:"'.concat(this.advert,'") foreign api "').concat(f.getAdWidth,'" ').concat(null===(t=this.property)||void 0===t?void 0:t.getAdWidth)),null===(e=this.property)||void 0===e?void 0:e.getAdWidth},t.prototype.collapseAd=function(){o.info('vpaid (id:"'.concat(this.advert,'") foreign api "').concat(h.collapseAd,'"')),this.container.contentWindow.postMessage(JSON.stringify([h.collapseAd,[]]),"*")},t.prototype.expandAd=function(){o.info('vpaid (id:"'.concat(this.advert,'") foreign api "').concat(h.expandAd,'"')),this.container.contentWindow.postMessage(JSON.stringify([h.expandAd,[]]),"*")},t.prototype.pauseAd=function(){o.info('vpaid (id:"'.concat(this.advert,'") foreign api "').concat(h.pauseAd,'"')),this.container.contentWindow.postMessage(JSON.stringify([h.pauseAd,[]]),"*")},t.prototype.resizeAd=function(t,e,n){o.info('vpaid (id:"'.concat(this.advert,'") foreign api "').concat(h.resizeAd," ").concat(t,", ").concat(e,", ").concat(n,'"')),this.container.contentWindow.postMessage(JSON.stringify([h.resizeAd,[t,e,n]]),"*")},t.prototype.resumeAd=function(){o.info('vpaid (id:"'.concat(this.advert,'") foreign api "').concat(h.resumeAd,'"')),this.container.contentWindow.postMessage(JSON.stringify([h.resumeAd,[]]),"*")},t.prototype.skipAd=function(){o.info('vpaid (id:"'.concat(this.advert,'") foreign api "').concat(h.skipAd,'"')),this.container.contentWindow.postMessage(JSON.stringify([h.skipAd,[]]),"*")},t.prototype.startAd=function(){o.info('vpaid (id:"'.concat(this.advert,'") foreign api "').concat(h.startAd,'"')),this.container.contentWindow.postMessage(JSON.stringify([h.startAd,[]]),"*")},t.prototype.stopAd=function(){o.info('vpaid (id:"'.concat(this.advert,'") foreign api "').concat(h.stopAd,'"')),this.container.contentWindow.postMessage(JSON.stringify([h.stopAd,[]]),"*")},t.prototype.AdClickThru=function(t,e){this.parent.AdClickThru(this.advert,t,e),o.info('vpaid (id:"'.concat(this.advert,'") foreign api "').concat(u.AdClickThru,'"'))},t.prototype.AdDurationChange=function(){this.parent.AdDurationChange(this.advert),o.info('vpaid (id:"'.concat(this.advert,'") foreign api "').concat(u.AdDurationChange,'"'))},t.prototype.AdError=function(){this.parent.AdError(this.advert),o.info('vpaid (id:"'.concat(this.advert,'") foreign api "').concat(u.AdError,'"'))},t.prototype.AdExpandedChange=function(){this.parent.AdExpandedChange(this.advert),o.info('vpaid (id:"'.concat(this.advert,'") foreign api "').concat(u.AdExpandedChange,'"'))},t.prototype.AdImpression=function(){this.parent.AdImpression(this.advert),o.info('vpaid (id:"'.concat(this.advert,'") foreign api "').concat(u.AdImpression,'"'))},t.prototype.AdInteraction=function(){this.parent.AdInteraction(this.advert),o.info('vpaid (id:"'.concat(this.advert,'") foreign api "').concat(u.AdInteraction,'"'))},t.prototype.AdLinearChange=function(){this.parent.AdLinearChange(this.advert),o.info('vpaid (id:"'.concat(this.advert,'") foreign api "').concat(u.AdLinearChange,'"'))},t.prototype.AdLoaded=function(){this.parent.AdLoaded(this.advert),o.info('vpaid (id:"'.concat(this.advert,'") foreign api "').concat(u.AdLoaded,'"'))},t.prototype.AdLog=function(){this.parent.AdLog(this.advert),o.info('vpaid (id:"'.concat(this.advert,'") foreign api "').concat(u.AdLog,'"'))},t.prototype.AdPaused=function(){this.parent.AdPaused(this.advert),o.info('vpaid (id:"'.concat(this.advert,'") foreign api "').concat(u.AdPaused,'"'))},t.prototype.AdPlaying=function(){this.parent.AdPlaying(this.advert),o.info('vpaid (id:"'.concat(this.advert,'") foreign api "').concat(u.AdPlaying,'"'))},t.prototype.AdRemainingTimeChange=function(){this.parent.AdRemainingTimeChange(this.advert),o.info('vpaid (id:"'.concat(this.advert,'") foreign api "').concat(u.AdRemainingTimeChange,'"'))},t.prototype.AdSizeChange=function(){this.parent.AdSizeChange(this.advert),o.info('vpaid (id:"'.concat(this.advert,'") foreign api "').concat(u.AdSizeChange,'"'))},t.prototype.AdSkippableStateChange=function(){this.parent.AdSkippableStateChange(this.advert),o.info('vpaid (id:"'.concat(this.advert,'") foreign api "').concat(u.AdSkippableStateChange,'"'))},t.prototype.AdSkipped=function(){this.parent.AdSkipped(this.advert),o.info('vpaid (id:"'.concat(this.advert,'") foreign api "').concat(u.AdSkipped,'"'))},t.prototype.AdStarted=function(){this.parent.AdStarted(this.advert),o.info('vpaid (id:"'.concat(this.advert,'") foreign api "').concat(u.AdStarted,'"'))},t.prototype.AdStopped=function(){this.parent.AdStopped(this.advert),o.info('vpaid (id:"'.concat(this.advert,'") foreign api "').concat(u.AdStopped,'"'))},t.prototype.AdUserAcceptInvitation=function(){this.parent.AdUserAcceptInvitation(this.advert),o.info('vpaid (id:"'.concat(this.advert,'") foreign api "').concat(u.AdUserAcceptInvitation,'"'))},t.prototype.AdUserClose=function(){this.parent.AdUserClose(this.advert),o.info('vpaid (id:"'.concat(this.advert,'") foreign api "').concat(u.AdUserClose,'"'))},t.prototype.AdUserMinimize=function(){this.parent.AdUserMinimize(this.advert),o.info('vpaid (id:"'.concat(this.advert,'") foreign api "').concat(u.AdUserMinimize,'"'))},t.prototype.AdVideoComplete=function(){this.parent.AdVideoComplete(this.advert),o.info('vpaid (id:"'.concat(this.advert,'") foreign api "').concat(u.AdVideoComplete,'"'))},t.prototype.AdVideoFirstQuartile=function(){this.parent.AdVideoFirstQuartile(this.advert),o.info('vpaid (id:"'.concat(this.advert,'") foreign api "').concat(u.AdVideoFirstQuartile,'"'))},t.prototype.AdVideoMidpoint=function(){this.parent.AdVideoMidpoint(this.advert),o.info('vpaid (id:"'.concat(this.advert,'") foreign api "').concat(u.AdVideoMidpoint,'"'))},t.prototype.AdVideoStart=function(){this.parent.AdVideoStart(this.advert),o.info('vpaid (id:"'.concat(this.advert,'") foreign api "').concat(u.AdVideoStart,'"'))},t.prototype.AdVideoThirdQuartile=function(){this.parent.AdVideoThirdQuartile(this.advert),o.info('vpaid (id:"'.concat(this.advert,'") foreign api "').concat(u.AdVideoThirdQuartile,'"'))},t.prototype.AdVolumeChange=function(){this.parent.AdVolumeChange(this.advert),o.info('vpaid (id:"'.concat(this.advert,'") foreign api "').concat(u.AdVolumeChange,'"'))},t.appendToFrameSrc=function(t,e,n){return-1!==t.indexOf("?")?t+="&".concat(e,"=").concat(n):t+="/?".concat(e,"=").concat(n),t},t}(),b=n(684);!function(t){var e=b.pw;t.GetReferer=function(){return location.ancestorOrigins.length>0?location.ancestorOrigins[location.ancestorOrigins.length-1]:location.href},t.GetTargetAdverts=function(){var t=new URLSearchParams(window.location.search).get("_");if(null===t)return null;var e=t.split(","),n=[];return e.map((function(t){var e=+t;isNaN(e)||0===e||n.push(e)})),0===(null==n?void 0:n.length)?null:n.join(",")},t.BackendURI=function(){return"wss://".concat(c.Instance().GetCurrentWorker())},t.GetPlayerWorker=function(){for(var t=0;t<e.length;t++)if(c.Instance().GetCurrentWorker()===e[t])return c.Instance().GetCurrentWorker();return e[Math.floor(Math.random()*e.length)]},t.Size=function(t,e){return t&&e?(t=t.toString(10).replace("px",""),e=e.toString(10).replace("px",""),Math.ceil(t)+"x"+Math.ceil(e)):"0x0"},t.PixelAsNumber=function(t){return+parseInt(t).toString(10).replace("px","")},t.PixelAsString=function(t){return+t.toString(10).replace("px","")+"px"},t.ConvertSizeToBannerSlot=function(t,e){var n=+(null==t?void 0:t.replace("px","")),o=+(null==e?void 0:e.replace("px",""));return 300===n&&250===o?i.banner_300x250:300===n&&600===o?i.banner_300x600:240===n&&400===o?i.banner_240x400:728===n&&90===o?i.banner_728x90:i.banner_300x600},t.sleep=function(t){return new Promise((function(e){return setTimeout(e,t)}))},t.RandString=function(t){t<=0&&(t=1);for(var e="",n=0;n<t;n++)e+=(Math.floor(100*Math.random())%16).toString(16);return e},t.isMobile=function(){return document.body.clientWidth<700},t.isExactOne=function(){var t=window.is_exact_one_player;return void 0===t?(window.is_exact_one_player=!0,!1):t}}(C||(C={}));var V,E=function(){function t(t,e,n,i,o,r,a,s){this.parent=i,this.advert=o,this.options=a,this.slot=e,this.video=n,this.vpaidApi=t.getVPAIDAd(),this.subscribe(this.vpaidApi),this.video.width=C.PixelAsNumber(r.width),this.video.heigth=C.PixelAsNumber(r.height),this.vpaidApi.initAd(r.width,r.height,r.viewMode,r.bitrate,{AdParameters:this.options},{slot:this.slot,videoSlot:this.video,isMobile:null==s?void 0:s.isMobile,instrument:c.Instance().GetInstrument()}),this.initialVolumeBehaviour()}return t.prototype.initialVolumeBehaviour=function(){var t=c.Instance().GetInitialVolumeLevel();this.vpaidApi.setAdVolume(t),o.info('vpaid (id:"'.concat(this.advert,'") initial set "').concat(f.setAdVolume,'" -> ').concat(t))},t.prototype.subscribe=function(t){this.subscribeVPAID(t),c.Instance().GetInstrument()===e.Banner&&this.subscribeVPAIDCustomBanner(t)},t.prototype.subscribeVPAID=function(t){for(var e in u)t.subscribe(this[e],e,this)},t.prototype.subscribeVPAIDCustomBanner=function(t){for(var e in l)t.subscribe(this[e],e,this)},t.prototype.getAdLinear=function(){var t=this.callFuncVpaid.call(this.vpaidApi,this.vpaidApi.getAdLinear);return o.info('vpaid (id:"'.concat(this.advert,'") get "').concat(f.getAdLinear,'" -> ').concat(t)),t},t.prototype.getAdWidth=function(){var t=this.callFuncVpaid.call(this.vpaidApi,this.vpaidApi.getAdWidth);return o.info('vpaid (id:"'.concat(this.advert,'") get "').concat(f.getAdWidth,'" -> ').concat(t)),t},t.prototype.getAdHeight=function(){var t=this.callFuncVpaid.call(this.vpaidApi,this.vpaidApi.getAdHeight);return o.info('vpaid (id:"'.concat(this.advert,'") get "').concat(f.getAdHeight,'" -> ').concat(t)),t},t.prototype.getAdExpanded=function(){var t=this.callFuncVpaid.call(this.vpaidApi,this.vpaidApi.getAdExpanded);return o.info('vpaid (id:"'.concat(this.advert,'") get "').concat(f.getAdExpanded,'" -> ').concat(t)),t},t.prototype.getAdSkippableState=function(){var t=this.callFuncVpaid.call(this.vpaidApi,this.vpaidApi.getAdSkippableState);return o.info('vpaid (id:"'.concat(this.advert,'") get "').concat(f.getAdSkippableState,'" -> ').concat(t)),t},t.prototype.getAdRemainingTime=function(){var t=this.callFuncVpaid.call(this.vpaidApi,this.vpaidApi.getAdRemainingTime);return o.info('vpaid (id:"'.concat(this.advert,'") get "').concat(f.getAdRemainingTime,'" -> ').concat(t)),t},t.prototype.getAdDuration=function(){var t=this.callFuncVpaid.call(this.vpaidApi,this.vpaidApi.getAdDuration);return o.info('vpaid (id:"'.concat(this.advert,'") get "').concat(f.getAdDuration,'" -> ').concat(t)),t},t.prototype.getAdCompanions=function(){var t=this.callFuncVpaid.call(this.vpaidApi,this.vpaidApi.getAdCompanions);return o.info('vpaid (id:"'.concat(this.advert,'") get "').concat(f.getAdCompanions,'" -> ').concat(t)),t},t.prototype.setAdVolume=function(t){o.info('vpaid (id:"'.concat(this.advert,'") set "').concat(f.setAdVolume,'" ').concat(t)),this.vpaidApi.setAdVolume(t)},t.prototype.getAdVolume=function(){var t=this.callFuncVpaid.call(this.vpaidApi,this.vpaidApi.getAdVolume);return o.info('vpaid (id:"'.concat(this.advert,'") get "').concat(f.getAdVolume,'" -> ').concat(t)),t},t.prototype.getAdIcons=function(){var t=this.callFuncVpaid.call(this.vpaidApi,this.vpaidApi.getAdIcons);return o.info('vpaid (id:"'.concat(this.advert,'") get "').concat(f.getAdIcons,'" -> ').concat(t)),t},t.prototype.startAd=function(){this.vpaidApi.startAd(),o.info('vpaid (id:"'.concat(this.advert,'") "').concat(h.startAd,'"}'))},t.prototype.stopAd=function(){this.vpaidApi.stopAd(),o.info('vpaid (id:"'.concat(this.advert,'") "').concat(h.stopAd,'"}'))},t.prototype.resizeAd=function(t,e,n){this.vpaidApi.resizeAd(t,e,n),o.info('vpaid (id:"'.concat(this.advert,'") "').concat(h.resizeAd,'"} ').concat(t,", ").concat(e,", ").concat(n))},t.prototype.pauseAd=function(){this.vpaidApi.pauseAd(),o.info('vpaid (id:"'.concat(this.advert,'") "').concat(h.pauseAd,'"}'))},t.prototype.resumeAd=function(){this.vpaidApi.resumeAd(),o.info('vpaid (id:"'.concat(this.advert,'") "').concat(h.resumeAd,'"}'))},t.prototype.expandAd=function(){this.vpaidApi.expandAd(),o.info('vpaid (id:"'.concat(this.advert,'") "').concat(h.expandAd,'"}'))},t.prototype.collapseAd=function(){this.vpaidApi.collapseAd(),o.info('vpaid (id:"'.concat(this.advert,'") "').concat(h.collapseAd,'"}'))},t.prototype.skipAd=function(){this.vpaidApi.skipAd(),this.vpaidApi.stopAd(),o.info('vpaid (id:"'.concat(this.advert,'") "').concat(h.skipAd,'"}'))},t.prototype.AdStarted=function(){o.info('vpaid (id:"'.concat(this.advert,'") "').concat(u.AdStarted,'"}')),this.parent.AdStarted()},t.prototype.AdStopped=function(){o.info('vpaid (id:"'.concat(this.advert,'") "').concat(u.AdStopped,'"}')),this.parent.AdStopped()},t.prototype.AdSkipped=function(){o.info('vpaid (id:"'.concat(this.advert,'") "').concat(u.AdSkipped,'"}')),this.parent.AdSkipped()},t.prototype.AdRemainingTimeChange=function(){o.info('vpaid (id:"'.concat(this.advert,'") "').concat(u.AdRemainingTimeChange,'"}')),this.parent.AdRemainingTimeChange()},t.prototype.AdInteraction=function(){o.info('vpaid (id:"'.concat(this.advert,'") "').concat(u.AdInteraction,'"}')),this.parent.AdInteraction()},t.prototype.AdSkippableStateChange=function(){o.info('vpaid (id:"'.concat(this.advert,'") "').concat(u.AdSkippableStateChange,'"}')),this.parent.AdSkippableStateChange()},t.prototype.AdSizeChange=function(){o.info('vpaid (id:"'.concat(this.advert,'") "').concat(u.AdSizeChange,'"}')),this.parent.AdSizeChange()},t.prototype.AdLoaded=function(){o.info('vpaid (id:"'.concat(this.advert,'") "').concat(u.AdLoaded,'"}')),this.parent.AdLoaded()},t.prototype.AdLinearChange=function(){o.info('vpaid (id:"'.concat(this.advert,'") "').concat(u.AdLinearChange,'"}')),this.parent.AdLinearChange()},t.prototype.AdDurationChange=function(){o.info('vpaid (id:"'.concat(this.advert,'") "').concat(u.AdDurationChange,'"}')),this.parent.AdDurationChange()},t.prototype.AdExpandedChange=function(){o.info('vpaid (id:"'.concat(this.advert,'") "').concat(u.AdExpandedChange,'"}')),this.parent.AdExpandedChange()},t.prototype.AdVolumeChange=function(){o.info('vpaid (id:"'.concat(this.advert,'") "').concat(u.AdVolumeChange,'"}')),this.parent.AdVolumeChange()},t.prototype.AdImpression=function(){o.info('vpaid (id:"'.concat(this.advert,'") "').concat(u.AdImpression,'"}')),this.parent.AdImpression()},t.prototype.AdVideoStart=function(){o.info('vpaid (id:"'.concat(this.advert,'") "').concat(u.AdVideoStart,'"}')),this.parent.AdVideoStart()},t.prototype.AdVideoFirstQuartile=function(){o.info('vpaid (id:"'.concat(this.advert,'") "').concat(u.AdVideoFirstQuartile,'"}')),this.parent.AdVideoFirstQuartile()},t.prototype.AdVideoMidpoint=function(){o.info('vpaid (id:"'.concat(this.advert,'") "').concat(u.AdVideoMidpoint,'"}')),this.parent.AdVideoMidpoint()},t.prototype.AdVideoThirdQuartile=function(){o.info('vpaid (id:"'.concat(this.advert,'") "').concat(u.AdVideoThirdQuartile,'"}')),this.parent.AdVideoThirdQuartile()},t.prototype.AdVideoComplete=function(){o.info('vpaid (id:"'.concat(this.advert,'") "').concat(u.AdVideoComplete,'"}')),this.parent.AdVideoComplete()},t.prototype.AdClickThru=function(t,e,n){o.info('vpaid (id:"'.concat(this.advert,'") "').concat(u.AdClickThru,'"} ').concat(t)),this.parent.AdClickThru(t,n)},t.prototype.AdUserAcceptInvitation=function(){o.info('vpaid (id:"'.concat(this.advert,'") "').concat(u.AdUserAcceptInvitation,'"}')),this.parent.AdUserAcceptInvitation()},t.prototype.AdUserMinimize=function(){o.info('vpaid (id:"'.concat(this.advert,'") "').concat(u.AdUserMinimize,'"}')),this.parent.AdUserMinimize()},t.prototype.AdUserClose=function(){o.info('vpaid (id:"'.concat(this.advert,'") "').concat(u.AdUserClose,'"}')),this.parent.AdUserClose()},t.prototype.AdPaused=function(){o.info('vpaid (id:"'.concat(this.advert,'") "').concat(u.AdPaused,'"}')),this.parent.AdPaused()},t.prototype.AdPlaying=function(){o.info('vpaid (id:"'.concat(this.advert,'") "').concat(u.AdPlaying,'"}')),this.parent.AdPlaying()},t.prototype.AdLog=function(){o.info('vpaid (id:"'.concat(this.advert,'") "').concat(u.AdLog,'"}')),this.parent.AdLog()},t.prototype.AdError=function(){o.info('vpaid (id:"'.concat(this.advert,'") "').concat(u.AdError,'"}')),this.parent.AdError()},t.prototype.AdTime=function(){o.info('vpaid (id:"'.concat(this.advert,'") "').concat(u.AdTime,'"}'))},t.prototype.AdBannerNURL=function(t){o.info('vpaid (id:"'.concat(this.advert,'") "').concat(l.AdBannerNURL,'"}')),this.parent.AdBannerNURL(t)},t.prototype.callFuncVpaid=function(t){return"function"==typeof t?t.call(this):t},t}(),P=function(){function t(t,e,n,i,o,r){this.property={getAdLinear:!1,getAdWidth:0,getAdHeight:0,getAdExpanded:!1,getAdSkippableState:!1,getAdRemainingTime:0,getAdDuration:30,getAdCompanions:"",getAdVolume:0,getAdIcons:!1},this.parent=t,this.advert=e,this.frame=document.createElement("iframe"),this.frame.id=e,this.frame.width="100%",this.frame.height="100%",this.frame.frameBorder="0",this.frame.scrolling="no",this.frame.style.position="absolute",this.frame.style.top="0",this.frame.style.left="0",this.Hide(),this.frame.onload=function(){var t=this;this.frame.contentWindow.vpaidWrapper=new Promise((function(e,a){var s=document.createElement("video");s.id="video-slot_"+C.RandString(10),s.style.width=C.PixelAsNumber(o.width)+"px",s.style.height=C.PixelAsNumber(o.height)+"px",s.style.top="0",s.style.left="0",s.style.position="absolute",s.muted=!0,s.style.zIndex="-1";var d=document.createElement("div");d.id="slot_"+C.RandString(10),d.style.height="100%",d.appendChild(s);var c=document.createElement("script");c.src=n,c.onload=function(){var n=new E(t.frame.contentWindow,d,s,t,t.advert,o,i,r);t.property.getAdLinear=n.getAdLinear(),t.property.getAdWidth=n.getAdWidth(),t.property.getAdHeight=n.getAdHeight(),t.property.getAdExpanded=n.getAdExpanded(),t.property.getAdSkippableState=n.getAdSkippableState(),t.property.getAdRemainingTime=n.getAdRemainingTime(),t.property.getAdDuration=n.getAdDuration(),t.property.getAdCompanions=n.getAdCompanions(),t.property.getAdVolume=n.getAdVolume(),t.property.getAdIcons=n.getAdIcons(),setInterval((function(){t.property.getAdLinear=n.getAdLinear(),t.property.getAdWidth=n.getAdWidth(),t.property.getAdHeight=n.getAdHeight(),t.property.getAdExpanded=n.getAdExpanded(),t.property.getAdSkippableState=n.getAdSkippableState(),t.property.getAdRemainingTime=n.getAdRemainingTime(),t.property.getAdDuration=n.getAdDuration(),t.property.getAdCompanions=n.getAdCompanions(),t.property.getAdVolume=n.getAdVolume(),t.property.getAdIcons=n.getAdIcons()}),250),e(n)},t.frame.contentDocument.head.appendChild(c),t.frame.contentDocument.body.appendChild(d),t.frame.contentDocument.body.style.margin="0"}))}.bind(this)}return t.prototype.GetAdvertID=function(){return this.advert},t.prototype.GetContainer=function(){return this.frame},t.prototype.Show=function(){this.frame.style.display="block",this.frame.style.opacity="1",this.frame.height="100%",this.frame.style.minHeight="100px"},t.prototype.Hide=function(){this.frame.style.display="none",this.frame.style.setProperty("opacity","0","important"),this.frame.height="0px"},t.prototype.Remove=function(){this.frame.remove()},t.prototype.getAdLinear=function(){return o.info('vpaid (id:"'.concat(this.advert,'") anonymous api "').concat(f.getAdLinear,'" ').concat(this.property.getAdLinear)),this.property.getAdLinear},t.prototype.getAdWidth=function(){return o.info('vpaid (id:"'.concat(this.advert,'") anonymous api "').concat(f.getAdWidth,'" ').concat(this.property.getAdWidth)),this.property.getAdWidth},t.prototype.getAdHeight=function(){return o.info('vpaid (id:"'.concat(this.advert,'") anonymous api "').concat(f.getAdHeight,'" ').concat(this.property.getAdHeight)),this.property.getAdHeight},t.prototype.getAdExpanded=function(){return o.info('vpaid (id:"'.concat(this.advert,'") anonymous api "').concat(f.getAdExpanded,'" ').concat(this.property.getAdExpanded)),this.property.getAdExpanded},t.prototype.getAdSkippableState=function(){return o.info('vpaid (id:"'.concat(this.advert,'") anonymous api "').concat(f.getAdSkippableState,'" ').concat(this.property.getAdSkippableState)),this.property.getAdSkippableState},t.prototype.getAdRemainingTime=function(){return o.info('vpaid (id:"'.concat(this.advert,'") anonymous api "').concat(f.getAdRemainingTime,'" ').concat(this.property.getAdRemainingTime)),this.property.getAdRemainingTime},t.prototype.getAdDuration=function(){return o.info('vpaid (id:"'.concat(this.advert,'") anonymous api "').concat(f.getAdDuration,'" ').concat(this.property.getAdDuration)),this.property.getAdDuration},t.prototype.getAdCompanions=function(){return o.info('vpaid (id:"'.concat(this.advert,'") anonymous api "').concat(f.getAdCompanions,'" ').concat(this.property.getAdCompanions)),this.property.getAdCompanions},t.prototype.setAdVolume=function(t){var e,n=this;null===(e=this.frame.contentWindow)||void 0===e||e.vpaidWrapper.then((function(e){e.setAdVolume.apply(e,[t]),o.info('vpaid (id:"'.concat(n.advert,'") anonymous api "').concat(f.setAdVolume,'" ').concat(t))}))},t.prototype.getAdVolume=function(){return o.info('vpaid (id:"'.concat(this.advert,'") anonymous api "').concat(f.getAdVolume,'" ').concat(this.property.getAdVolume)),this.property.getAdVolume},t.prototype.getAdIcons=function(){return o.info('vpaid (id:"'.concat(this.advert,'") anonymous api "').concat(f.getAdIcons,'" ').concat(this.property.getAdIcons)),this.property.getAdIcons},t.prototype.startAd=function(){var t,e=this;null===(t=this.frame.contentWindow)||void 0===t||t.vpaidWrapper.then((function(t){var n=t.startAd;o.info('vpaid (id:"'.concat(e.advert,'") anonymous api "').concat(h.startAd,'"')),n.apply(t)}))},t.prototype.stopAd=function(){var t,e=this;null===(t=this.frame.contentWindow)||void 0===t||t.vpaidWrapper.then((function(t){o.info('vpaid (id:"'.concat(e.advert,'") anonymous api "').concat(h.stopAd,'"')),t.stopAd.apply(t)}))},t.prototype.resizeAd=function(t,e,n){var i,r=this;null===(i=this.frame.contentWindow)||void 0===i||i.vpaidWrapper.then((function(i){o.info('vpaid (id:"'.concat(r.advert,'") anonymous api "').concat(h.resizeAd,'"')),i.resizeAd.apply(i,[t,e,n])}))},t.prototype.pauseAd=function(){var t,e=this;null===(t=this.frame.contentWindow)||void 0===t||t.vpaidWrapper.then((function(t){o.info('vpaid (id:"'.concat(e.advert,'") anonymous api "').concat(h.pauseAd,'"')),t.pauseAd.apply(t)}))},t.prototype.resumeAd=function(){var t,e=this;null===(t=this.frame.contentWindow)||void 0===t||t.vpaidWrapper.then((function(t){o.info('vpaid (id:"'.concat(e.advert,'") anonymous api "').concat(h.resumeAd,'"')),t.resumeAd.apply(t)}))},t.prototype.expandAd=function(){var t,e=this;null===(t=this.frame.contentWindow)||void 0===t||t.vpaidWrapper.then((function(t){o.info('vpaid (id:"'.concat(e.advert,'") anonymous api "').concat(h.expandAd,'"')),t.expandAd.apply(t)}))},t.prototype.collapseAd=function(){var t,e=this;null===(t=this.frame.contentWindow)||void 0===t||t.vpaidWrapper.then((function(t){o.info('vpaid (id:"'.concat(e.advert,'") anonymous api "').concat(h.collapseAd,'"')),t.collapseAd.apply(t)}))},t.prototype.skipAd=function(){var t,e=this;null===(t=this.frame.contentWindow)||void 0===t||t.vpaidWrapper.then((function(t){o.info('vpaid (id:"'.concat(e.advert,'") anonymous api "').concat(h.skipAd,'"')),t.skipAd.apply(t)}))},t.prototype.AdLoaded=function(){this.parent.AdLoaded(this.advert),o.info('vpaid (id:"'.concat(this.advert,'") anonymous api "').concat(u.AdLoaded,'"'))},t.prototype.AdStarted=function(){this.parent.AdStarted(this.advert),o.info('vpaid (id:"'.concat(this.advert,'") anonymous api "').concat(u.AdStarted,'"'))},t.prototype.AdStopped=function(){this.parent.AdStopped(this.advert),o.info('vpaid (id:"'.concat(this.advert,'") anonymous api "').concat(u.AdStopped,'"'))},t.prototype.AdSkipped=function(){this.parent.AdSkipped(this.advert),o.info('vpaid (id:"'.concat(this.advert,'") anonymous api "').concat(u.AdSkipped,'"'))},t.prototype.AdPaused=function(){this.parent.AdPaused(this.advert),o.info('vpaid (id:"'.concat(this.advert,'") anonymous api "').concat(u.AdPaused,'"'))},t.prototype.AdSizeChange=function(){this.parent.AdSizeChange(this.advert),o.info('vpaid (id:"'.concat(this.advert,'") anonymous api "').concat(u.AdSizeChange,'"'))},t.prototype.AdPlaying=function(){this.parent.AdPlaying(this.advert),o.info('vpaid (id:"'.concat(this.advert,'") anonymous api "').concat(u.AdPlaying,'"'))},t.prototype.AdExpandedChange=function(){this.parent.AdExpandedChange(this.advert),o.info('vpaid (id:"'.concat(this.advert,'") anonymous api "').concat(u.AdExpandedChange,'"'))},t.prototype.AdSkippableStateChange=function(){this.parent.AdSkippableStateChange(this.advert),o.info('vpaid (id:"'.concat(this.advert,'") anonymous api "').concat(u.AdSkippableStateChange,'"'))},t.prototype.AdLinearChange=function(){this.parent.AdLinearChange(this.advert),o.info('vpaid (id:"'.concat(this.advert,'") anonymous api "').concat(u.AdLinearChange,'"'))},t.prototype.AdVolumeChange=function(){this.parent.AdVolumeChange(this.advert),o.info('vpaid (id:"'.concat(this.advert,'") anonymous api "').concat(u.AdVolumeChange,'"'))},t.prototype.AdVideoStart=function(){this.parent.AdVideoStart(this.advert),o.info('vpaid (id:"'.concat(this.advert,'") anonymous api "').concat(u.AdVideoStart,'"'))},t.prototype.AdVideoFirstQuartile=function(){this.parent.AdVideoFirstQuartile(this.advert),o.info('vpaid (id:"'.concat(this.advert,'") anonymous api "').concat(u.AdVideoFirstQuartile,'"'))},t.prototype.AdVideoMidpoint=function(){this.parent.AdVideoMidpoint(this.advert),o.info('vpaid (id:"'.concat(this.advert,'") anonymous api "').concat(u.AdVideoMidpoint,'"'))},t.prototype.AdVideoThirdQuartile=function(){this.parent.AdVideoThirdQuartile(this.advert),o.info('vpaid (id:"'.concat(this.advert,'") anonymous api "').concat(u.AdVideoThirdQuartile,'"'))},t.prototype.AdVideoComplete=function(){this.parent.AdVideoComplete(this.advert),o.info('vpaid (id:"'.concat(this.advert,'") anonymous api "').concat(u.AdVideoComplete,'"'))},t.prototype.AdUserAcceptInvitation=function(){this.parent.AdUserAcceptInvitation(this.advert),o.info('vpaid (id:"'.concat(this.advert,'") anonymous api "').concat(u.AdUserAcceptInvitation,'"'))},t.prototype.AdUserClose=function(){this.parent.AdUserClose(this.advert),o.info('vpaid (id:"'.concat(this.advert,'") anonymous api "').concat(u.AdUserClose,'"'))},t.prototype.AdUserMinimize=function(){this.parent.AdUserMinimize(this.advert),o.info('vpaid (id:"'.concat(this.advert,'") anonymous api "').concat(u.AdUserMinimize,'"'))},t.prototype.AdClickThru=function(t,e){this.parent.AdClickThru(this.advert,t,e),o.info('vpaid (id:"'.concat(this.advert,'") anonymous api "').concat(u.AdClickThru,'"'))},t.prototype.AdInteraction=function(){this.parent.AdInteraction(this.advert),o.info('vpaid (id:"'.concat(this.advert,'") anonymous api "').concat(u.AdInteraction,'"'))},t.prototype.AdError=function(){this.parent.AdError(this.advert),o.info('vpaid (id:"'.concat(this.advert,'") anonymous api "').concat(u.AdError,'"'))},t.prototype.AdLog=function(){this.parent.AdLog(this.advert),o.info('vpaid (id:"'.concat(this.advert,'") anonymous api "').concat(u.AdLog,'"'))},t.prototype.AdDurationChange=function(){this.parent.AdDurationChange(this.advert),o.info('vpaid (id:"'.concat(this.advert,'") anonymous api "').concat(u.AdDurationChange,'"'))},t.prototype.AdRemainingTimeChange=function(){this.parent.AdRemainingTimeChange(this.advert),o.info('vpaid (id:"'.concat(this.advert,'") anonymous api "').concat(u.AdRemainingTimeChange,'"'))},t.prototype.AdImpression=function(){this.parent.AdImpression(this.advert),o.info('vpaid (id:"'.concat(this.advert,'") anonymous api "').concat(u.AdImpression,'"'))},t}();!function(t){t.SkipUI=function(t,n){var i="skip_container",o=document.createElement("div");o.style.zIndex="3",o.style.fontSize="14px",o.style.color="#fff",o.style.bottom="15%",o.style.right="2%",o.style.padding="12px 10px",o.style.position="absolute",o.style.cursor="not-allowed",o.innerHTML=" : ".concat(t," c"),t<=0&&(t=3);var r=setInterval((function(){t-=1,o.innerHTML=" : ".concat(t," c"),t<=0&&(o.innerHTML=" ",o.style.cursor="pointer",o.onclick=n,clearInterval(r))}),1e3),a=document.createElement("div");return a.id=i,a.className=[e].join(" "),a.innerHTML="\n                            <style>\n                            #".concat(i," {\n                              -webkit-touch-callout: none; /* iOS Safari */\n                              -webkit-user-select: none; /* Safari */\n                              -khtml-user-select: none; /* Konqueror HTML */\n                              -moz-user-select: none; /* Old versions of Firefox */\n                              -ms-user-select: none; /* Internet Explorer/Edge */\n                              user-select: none; /* Non-prefixed version, currently susupported by Chrome, Edge, Opera and Firefox */\n                            }\n                            </style>"),a.appendChild(o),a},t.PlaybackUI=function(t,i){var r="http://www.w3.org/2000/svg",a=document.createElementNS(r,"path");a.setAttributeNS(null,"d","M0 0h24v24H0z"),a.setAttributeNS(null,"fill","none");var s=document.createElementNS(r,"path");s.setAttributeNS(null,"d","M8 5v14l11-7z"),s.setAttributeNS(null,"stroke","grey");var d=document.createElementNS(r,"svg");d.appendChild(a),d.appendChild(s);var c=document.createElement("div");c.id="playback_play",c.appendChild(d);var p=document.createElementNS(r,"path");p.setAttributeNS(null,"d","M0 0h24v24H0z"),p.setAttributeNS(null,"fill","none");var u=document.createElementNS(r,"path");u.setAttributeNS(null,"d","M6 19h4V5H6v14zm8-14v14h4V5h-4z"),u.setAttributeNS(null,"stroke","grey");var l=document.createElementNS(r,"svg");l.appendChild(p),l.appendChild(u);var h=document.createElement("div");h.id="playback_pause",h.appendChild(l),c.onclick=function(){try{i(),d.style.display="none",l.style.display=""}catch(t){o.info("playbackPlay.onclick exception: ".concat(t.message))}},h.onclick=function(){try{t(),d.style.display="",l.style.display="none"}catch(t){o.info("playbackPause.onclick exception: ".concat(t.message))}},!0?(d.style.display="none",l.style.display=""):(d.style.display="",l.style.display="none");var f=document.createElement("div");return f.id="playback_container",f.className=[e,n].join(" "),f.style.position="absolute",f.style.top="45%",f.style.bottom="45%",f.style.left="45%",f.style.right="45%",f.appendChild(c),f.appendChild(h),f},t.TimelineUI=function(t,n){var i=document.createElement("div");i.id="timeline_container",i.style.height="4px",i.style.width="0%",i.style.backgroundColor="#86c3f7",i.style.transition="all .3s linear",i.style.transitionDuration="1s",i.style.transitionTimingFunction="linear",i.style.transitionDelay="0s",i.style.transitionProperty="all";var o=document.createElement("div");o.style.position="absolute",o.className=[e].join(" "),o.style.width="100%",o.style.height="4px",o.style.backgroundColor="#a1a1a1",o.style.bottom="0",o.style.left="0",o.style.right="0",o.appendChild(i);var r=setInterval((function(){var e=100*(1-n()/t()).toFixed(2);i.style.width="".concat(e,"%"),e>=100&&clearInterval(r)}),1e3);return o},t.CloseUI=function(t){var n=document.createElement("div");return n.className=[e].join(" "),n.onclick=function(){t(),o.debug("instrument close button click")},n.style.position="absolute",n.innerHTML='\n        <svg height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg">\n          <path d="M0 0h24v24H0z" fill="none"/>\n          <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z" fill="grey" stroke="grey"/>\n        </svg>',n},t.VolumeUI=function(t,i){var o="volume_container",r=document.createElement("input");r.type="range",r.min="0",r.max="100",r.id="volume_line",r.style.background="none",r.style.width="50%",r.value=t(),r.oninput=function(){return t=i,e=+r.value/100,t(e),void f(e);var t,e};var a="http://www.w3.org/2000/svg",s=document.createElementNS(a,"path");s.setAttributeNS(null,"d","M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z");var d=document.createElementNS(a,"svg");d.id="volume_off",d.onclick=function(){return i(t=.5),r.value="".concat(t),void f(t);var t},d.appendChild(s);var c=document.createElementNS(a,"path");c.setAttributeNS(null,"d","M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z");var p=document.createElementNS(a,"svg");p.id="volume_on",p.onclick=function(){return i(t=0),r.value="".concat(t),void f(t);var t},p.appendChild(c);var u=document.createElementNS(a,"path");u.setAttributeNS(null,"d","M0 0h24v24H0z"),u.setAttributeNS(null,"fill","none");var l=document.createElementNS(a,"svg");l.setAttributeNS(null,"fill","white"),l.setAttributeNS(null,"viewBox","0 0 24 24"),l.setAttributeNS(null,"width","30"),l.setAttributeNS(null,"height","30"),l.appendChild(u),l.appendChild(p),l.appendChild(d);var h=document.createElement("div");function f(t){0===t?(p.style.display="none",d.style.display=null):(p.style.display=null,d.style.display="none")}return h.style.position="absolute",h.style.bottom="3%",h.style.left="2%",h.id=o,h.className=[e,n].join(" "),h.innerHTML="<style>\n                      #".concat(o," {\n                        -webkit-touch-callout: none; /* iOS Safari */\n                        -webkit-user-select: none; /* Safari */\n                        -khtml-user-select: none; /* Konqueror HTML */\n                        -moz-user-select: none; /* Old versions of Firefox */\n                        -ms-user-select: none; /* Internet Explorer/Edge */\n                        user-select: none; /* Non-prefixed version, currently supported by Chrome, Edge, Opera and Firefox */\n                        display: flex;\n                        align-items: center;\n                      }\n\n                      input[type=range] {\n                        height: 2px;\n                        -webkit-appearance: none;\n                        width: 100%;\n                        border-radius: 2px;\n                        border: none;\n                      }\n\n                      input[type=range]:focus {\n                        outline: none;\n                      }\n\n                      input[type=range]::-webkit-slider-runnable-track {\n                        width: 100%;\n                        height: 2px;\n                        cursor: pointer;\n                        animate: 0.2s;\n                        box-shadow: 0px 0px 0px #000000;\n                        background: #ffffff;\n                        border-radius: 2px;\n                        border: none;\n                      }\n\n                      input[type=range]::-webkit-slider-thumb {\n                        box-shadow: 0px 0px 0px #000000;\n                        height: 12px;\n                        width: 12px;\n                        border-radius: 50%;\n                        background: #ffffff;\n                        cursor: pointer;\n                        -webkit-appearance: none;\n                        margin-top: -5px;\n                      }\n\n                      input[type=range]:focus::-webkit-slider-runnable-track {\n                        background: #ffffff;\n                      }\n\n                      input[type=range]::-moz-range-track {\n                        width: 100%;\n                        height: 2px;\n                        cursor: pointer;\n                        animate: 0.2s;\n                        box-shadow: 0px 0px 0px #000000;\n                        background: #ffffff;\n                        border-radius: 2px;\n                      }\n\n                      input[type=range]::-moz-range-thumb {\n                        box-shadow: 0px 0px 0px #000000;\n                        height: 12px;\n                        width: 12px;\n                        border-radius: 50%;\n                        background: #ffffff;\n                        cursor: pointer;\n                      }\n\n                      input[type=range]::-ms-track {\n                        width: 100%;\n                        height: 2px;\n                        cursor: pointer;\n                        animate: 0.2s;\n                        background: transparent;\n                        color: transparent;\n                      }\n\n                      input[type=range]::-ms-fill-lower {\n                        background: #ffffff;\n                        border-radius: 2px;\n                        box-shadow: 0px 0px 0px #000000;\n                      }\n\n                      input[type=range]::-ms-fill-upper {\n                        background: #ffffff;\n                        border-radius: 2px;\n                        box-shadow: 0px 0px 0px #000000;\n                      }\n\n                      input[type=range]::-ms-thumb {\n                        margin-top: 1px;\n                        box-shadow: 0px 0px 0px #000000;\n                        height: 12px;\n                        width: 12px;\n                        border-radius: 50%;\n                        background: #ffffff;\n                        cursor: pointer;\n                      }\n\n                      input[type=range]:focus::-ms-fill-lower {\n                        background: #ffffff;\n                      }\n\n                      input[type=range]:focus::-ms-fill-upper {\n                        background: #ffffff;\n                      }\n                    </style>"),h.appendChild(l),h.appendChild(r),f(t()),h},t.FullscreenUI=function(t,i,r){var a="http://www.w3.org/2000/svg",s=document.createElementNS(a,"path");s.setAttributeNS(null,"d","M0 0h24v24H0z"),s.setAttributeNS(null,"fill","none");var d=document.createElementNS(a,"path");d.setAttributeNS(null,"d","M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"),d.setAttributeNS(null,"stroke","grey");var c=document.createElementNS(a,"svg");c.id="fullscreen_on",c.appendChild(s),c.appendChild(d);var p=document.createElementNS(a,"path");p.setAttributeNS(null,"d","M0 0h24v24H0z"),p.setAttributeNS(null,"fill","none");var u=document.createElementNS(a,"path");u.setAttributeNS(null,"d","M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"),u.setAttributeNS(null,"stroke","grey");var l=document.createElementNS(a,"svg");l.id="fullscreen_off",l.appendChild(p),l.appendChild(u),c.onclick=function(){try{i(),c.style.display="none",l.style.display=""}catch(t){o.info("fullscreenOn.onclick ".concat(t.message))}},l.onclick=function(){try{r(),l.style.display="none",c.style.display=""}catch(t){o.info("fullscreenOff.onclick ".concat(t.message))}};var h=document.createElementNS(a,"svg");h.style.position="absolute",h.setAttributeNS(null,"fill","white"),h.setAttributeNS(null,"viewBox","0 0 24 24"),h.setAttributeNS(null,"width","30"),h.setAttributeNS(null,"height","30"),h.appendChild(c),h.appendChild(l),function(t){t?(c.style.display="none",l.style.display=""):(l.style.display="none",c.style.display="")}(t());var f=document.createElement("div");return f.id="fullscreen_container",f.className=[e,n].join(" "),f.style.position="absolute",f.style.bottom="45%",f.style.left="2%",f.appendChild(h),f},t.Agency=function(){return document.createElement("a")},t.Advertisement=function(){var t=document.createElement("div");return t.className=[e].join(" "),t.style.position="absolute",t.style.top="0",t.style.right="10px",t.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="70" height="20">\n          <defs>\n            <filter id="text-shadow" x="-20%" y="-20%" width="140%" height="140%">\n              <feOffset result="offOut" in="SourceAlpha" dx="1" dy="1" />\n              <feGaussianBlur result="blurOut" in="offOut" stdDeviation="1" />\n              <feBlend in="SourceGraphic" in2="blurOut" mode="normal" />\n            </filter>\n          </defs>\n          <rect width="100%" height="100%" fill="none" />\n          <text x="0" y="13" font-size="0.8em" font-family= "Montserrat,Arial,Helvetica,sans-serif" fill="white" filter="url(#text-shadow)">\n            <tspan x="10" dy="0">&#x440;&#x435;&#x43A;&#x43B;&#x430;&#x43C;&#x430;</tspan>\n          </text>\n        </svg>',t};var e="control",n="control_fadeable";t.Init=function(){var t=document.createElement("style");return t.innerHTML="\n            .".concat(n," { opacity: 0 }\n        "),t},t.SelectorFadeable=function(){return"."+n},t.SelectorControl=function(){return"."+e},t.FadeIn=function(t){t.style.setProperty("opacity","1"),t.style.setProperty("transition","opacity 0.1s linear")},t.FadeOut=function(t){t.style.setProperty("opacity","0"),t.style.setProperty("transition","opacity 0.1s linear")}}(V||(V={}));var k,T=function(){function t(t,e,n,i,o){var r=this;this.property={getAdLinear:!1,getAdWidth:0,getAdHeight:0,getAdExpanded:!1,getAdSkippableState:!1,getAdRemainingTime:0,getAdDuration:30,getAdCompanions:"",getAdVolume:0,getAdIcons:!1},this.parent=t,this.advert=e,this.wrapperName="vpaidWrapper_"+C.RandString(10),this.container=document.createElement("div"),this.container.id=e+"_"+C.RandString(10),this.container.style.width="100%",this.container.style.height="100%",this.container.style.position="absolute",this.container.style.top="0",this.container.style.left="0",this.Hide(),window[this.wrapperName]=new Promise((function(t,e){var a=document.createElement("video");a.id="video-slot_"+C.RandString(10),a.width=C.PixelAsNumber(o.width),a.height=C.PixelAsNumber(o.height),a.style.top="0",a.style.left="0",a.style.position="absolute",a.style.display="none",a.muted=!0;var s=document.createElement("div");s.id="slot_"+C.RandString(10),s.style.height="100%",s.appendChild(a);var d=document.createElement("script");d.src=n,d.onload=function(){var e=new E(window,s,a,r,r.advert,o,i,{});r.property.getAdLinear=e.getAdLinear(),r.property.getAdWidth=e.getAdWidth(),r.property.getAdHeight=e.getAdHeight(),r.property.getAdExpanded=e.getAdExpanded(),r.property.getAdSkippableState=e.getAdSkippableState(),r.property.getAdRemainingTime=e.getAdRemainingTime(),r.property.getAdDuration=e.getAdDuration(),r.property.getAdCompanions=e.getAdCompanions(),r.property.getAdVolume=e.getAdVolume(),r.property.getAdIcons=e.getAdIcons(),setInterval((function(){r.property.getAdLinear=e.getAdLinear(),r.property.getAdWidth=e.getAdWidth(),r.property.getAdHeight=e.getAdHeight(),r.property.getAdExpanded=e.getAdExpanded(),r.property.getAdSkippableState=e.getAdSkippableState(),r.property.getAdRemainingTime=e.getAdRemainingTime(),r.property.getAdDuration=e.getAdDuration(),r.property.getAdCompanions=e.getAdCompanions(),r.property.getAdVolume=e.getAdVolume(),r.property.getAdIcons=e.getAdIcons()}),250),t(e)},r.container.append(d),r.container.append(s),r.container.style.margin="0"}))}return t.prototype.GetAdvertID=function(){return this.advert},t.prototype.GetContainer=function(){return this.container},t.prototype.Show=function(){this.container.style.display="block",this.container.style.opacity="1",this.container.style.height="100%",this.container.style.minHeight="100px"},t.prototype.Hide=function(){this.container.style.setProperty("opacity","0","important"),this.container.style.height="0"},t.prototype.Remove=function(){this.container.remove()},t.prototype.getAdLinear=function(){return o.info('vpaid (id:"'.concat(this.advert,'") anonymous api "').concat(f.getAdLinear,'" ').concat(this.property.getAdLinear)),this.property.getAdLinear},t.prototype.getAdWidth=function(){return o.info('vpaid (id:"'.concat(this.advert,'") anonymous api "').concat(f.getAdWidth,'" ').concat(this.property.getAdWidth)),this.property.getAdWidth},t.prototype.getAdHeight=function(){return o.info('vpaid (id:"'.concat(this.advert,'") anonymous api "').concat(f.getAdHeight,'" ').concat(this.property.getAdHeight)),this.property.getAdHeight},t.prototype.getAdExpanded=function(){return o.info('vpaid (id:"'.concat(this.advert,'") anonymous api "').concat(f.getAdExpanded,'" ').concat(this.property.getAdExpanded)),this.property.getAdExpanded},t.prototype.getAdSkippableState=function(){return o.info('vpaid (id:"'.concat(this.advert,'") anonymous api "').concat(f.getAdSkippableState,'" ').concat(this.property.getAdSkippableState)),this.property.getAdSkippableState},t.prototype.getAdRemainingTime=function(){return o.info('vpaid (id:"'.concat(this.advert,'") anonymous api "').concat(f.getAdRemainingTime,'" ').concat(this.property.getAdRemainingTime)),this.property.getAdRemainingTime},t.prototype.getAdDuration=function(){return o.info('vpaid (id:"'.concat(this.advert,'") anonymous api "').concat(f.getAdDuration,'" ').concat(this.property.getAdDuration)),this.property.getAdDuration},t.prototype.getAdCompanions=function(){return o.info('vpaid (id:"'.concat(this.advert,'") anonymous api "').concat(f.getAdCompanions,'" ').concat(this.property.getAdCompanions)),this.property.getAdCompanions},t.prototype.setAdVolume=function(t){var e=this;window[this.wrapperName].then((function(n){n.setAdVolume.apply(n,[t]),o.info('vpaid (id:"'.concat(e.advert,'") anonymous api "').concat(f.setAdVolume,'" ').concat(t))}))},t.prototype.getAdVolume=function(){return o.info('vpaid (id:"'.concat(this.advert,'") anonymous api "').concat(f.getAdVolume,'" ').concat(this.property.getAdVolume)),this.property.getAdVolume},t.prototype.getAdIcons=function(){return o.info('vpaid (id:"'.concat(this.advert,'") anonymous api "').concat(f.getAdIcons,'" ').concat(this.property.getAdIcons)),this.property.getAdIcons},t.prototype.startAd=function(){var t=this;window[this.wrapperName].then((function(e){var n=e.startAd;o.info('vpaid (id:"'.concat(t.advert,'") anonymous api "').concat(h.startAd,'"')),n.apply(e)}))},t.prototype.stopAd=function(){var t=this;window[this.wrapperName].then((function(e){o.info('vpaid (id:"'.concat(t.advert,'") anonymous api "').concat(h.stopAd,'"')),e.stopAd.apply(e)}))},t.prototype.resizeAd=function(t,e,n){var i=this;window[this.wrapperName].then((function(r){o.info('vpaid (id:"'.concat(i.advert,'") anonymous api "').concat(h.resizeAd,'"')),r.resizeAd.apply(r,[t,e,n])}))},t.prototype.pauseAd=function(){var t=this;window[this.wrapperName].then((function(e){o.info('vpaid (id:"'.concat(t.advert,'") anonymous api "').concat(h.pauseAd,'"')),e.pauseAd.apply(e)}))},t.prototype.resumeAd=function(){var t=this;window[this.wrapperName].then((function(e){o.info('vpaid (id:"'.concat(t.advert,'") anonymous api "').concat(h.resumeAd,'"')),e.resumeAd.apply(e)}))},t.prototype.expandAd=function(){var t=this;window[this.wrapperName].then((function(e){o.info('vpaid (id:"'.concat(t.advert,'") anonymous api "').concat(h.expandAd,'"')),e.expandAd.apply(e)}))},t.prototype.collapseAd=function(){var t=this;window[this.wrapperName].then((function(e){o.info('vpaid (id:"'.concat(t.advert,'") anonymous api "').concat(h.collapseAd,'"')),e.collapseAd.apply(e)}))},t.prototype.skipAd=function(){var t=this;window[this.wrapperName].then((function(e){o.info('vpaid (id:"'.concat(t.advert,'") anonymous api "').concat(h.skipAd,'"')),e.skipAd.apply(e)}))},t.prototype.AdLoaded=function(){this.parent.AdLoaded(this.advert),o.info('vpaid (id:"'.concat(this.advert,'") anonymous api "').concat(u.AdLoaded,'"'))},t.prototype.AdStarted=function(){this.parent.AdStarted(this.advert),o.info('vpaid (id:"'.concat(this.advert,'") anonymous api "').concat(u.AdStarted,'"'))},t.prototype.AdStopped=function(){this.parent.AdStopped(this.advert),o.info('vpaid (id:"'.concat(this.advert,'") anonymous api "').concat(u.AdStopped,'"'))},t.prototype.AdSkipped=function(){this.parent.AdSkipped(this.advert),o.info('vpaid (id:"'.concat(this.advert,'") anonymous api "').concat(u.AdSkipped,'"'))},t.prototype.AdPaused=function(){this.parent.AdPaused(this.advert),o.info('vpaid (id:"'.concat(this.advert,'") anonymous api "').concat(u.AdPaused,'"'))},t.prototype.AdSizeChange=function(){this.parent.AdSizeChange(this.advert),o.info('vpaid (id:"'.concat(this.advert,'") anonymous api "').concat(u.AdSizeChange,'"'))},t.prototype.AdPlaying=function(){this.parent.AdPlaying(this.advert),o.info('vpaid (id:"'.concat(this.advert,'") anonymous api "').concat(u.AdPlaying,'"'))},t.prototype.AdExpandedChange=function(){this.parent.AdExpandedChange(this.advert),o.info('vpaid (id:"'.concat(this.advert,'") anonymous api "').concat(u.AdExpandedChange,'"'))},t.prototype.AdSkippableStateChange=function(){this.parent.AdSkippableStateChange(this.advert),o.info('vpaid (id:"'.concat(this.advert,'") anonymous api "').concat(u.AdSkippableStateChange,'"'))},t.prototype.AdLinearChange=function(){this.parent.AdLinearChange(this.advert),o.info('vpaid (id:"'.concat(this.advert,'") anonymous api "').concat(u.AdLinearChange,'"'))},t.prototype.AdVolumeChange=function(){this.parent.AdVolumeChange(this.advert),o.info('vpaid (id:"'.concat(this.advert,'") anonymous api "').concat(u.AdVolumeChange,'"'))},t.prototype.AdVideoStart=function(){this.parent.AdVideoStart(this.advert),o.info('vpaid (id:"'.concat(this.advert,'") anonymous api "').concat(u.AdVideoStart,'"'))},t.prototype.AdVideoFirstQuartile=function(){this.parent.AdVideoFirstQuartile(this.advert),o.info('vpaid (id:"'.concat(this.advert,'") anonymous api "').concat(u.AdVideoFirstQuartile,'"'))},t.prototype.AdVideoMidpoint=function(){this.parent.AdVideoMidpoint(this.advert),o.info('vpaid (id:"'.concat(this.advert,'") anonymous api "').concat(u.AdVideoMidpoint,'"'))},t.prototype.AdVideoThirdQuartile=function(){this.parent.AdVideoThirdQuartile(this.advert),o.info('vpaid (id:"'.concat(this.advert,'") anonymous api "').concat(u.AdVideoThirdQuartile,'"'))},t.prototype.AdVideoComplete=function(){this.parent.AdVideoComplete(this.advert),o.info('vpaid (id:"'.concat(this.advert,'") anonymous api "').concat(u.AdVideoComplete,'"'))},t.prototype.AdUserAcceptInvitation=function(){this.parent.AdUserAcceptInvitation(this.advert),o.info('vpaid (id:"'.concat(this.advert,'") anonymous api "').concat(u.AdUserAcceptInvitation,'"'))},t.prototype.AdUserClose=function(){this.parent.AdUserClose(this.advert),o.info('vpaid (id:"'.concat(this.advert,'") anonymous api "').concat(u.AdUserClose,'"'))},t.prototype.AdUserMinimize=function(){this.parent.AdUserMinimize(this.advert),o.info('vpaid (id:"'.concat(this.advert,'") anonymous api "').concat(u.AdUserMinimize,'"'))},t.prototype.AdClickThru=function(t,e){this.parent.AdClickThru(this.advert,t,e),o.info('vpaid (id:"'.concat(this.advert,'") anonymous api "').concat(u.AdClickThru,'"'))},t.prototype.AdInteraction=function(){this.parent.AdInteraction(this.advert),o.info('vpaid (id:"'.concat(this.advert,'") anonymous api "').concat(u.AdInteraction,'"'))},t.prototype.AdError=function(){this.parent.AdError(this.advert),o.info('vpaid (id:"'.concat(this.advert,'") anonymous api "').concat(u.AdError,'"'))},t.prototype.AdLog=function(){this.parent.AdLog(this.advert),o.info('vpaid (id:"'.concat(this.advert,'") anonymous api "').concat(u.AdLog,'"'))},t.prototype.AdDurationChange=function(){this.parent.AdDurationChange(this.advert),o.info('vpaid (id:"'.concat(this.advert,'") anonymous api "').concat(u.AdDurationChange,'"'))},t.prototype.AdRemainingTimeChange=function(){this.parent.AdRemainingTimeChange(this.advert),o.info('vpaid (id:"'.concat(this.advert,'") anonymous api "').concat(u.AdRemainingTimeChange,'"'))},t.prototype.AdImpression=function(){this.parent.AdImpression(this.advert),o.info('vpaid (id:"'.concat(this.advert,'") anonymous api "').concat(u.AdImpression,'"'))},t.prototype.AdBannerNURL=function(t){this.parent.AdBannerNURL(this.advert,t),o.info('vpaid (id:"'.concat(this.advert,'") anonymous api "').concat(l.AdBannerNURL,'"'))},t}(),D=function(){function t(t,e,n,i){if(this.queue=t,this.advert=e.ID(),this.slot=n,null!==this.slot.slot){var o=e.GetCreativeURL(),r=e.GetCreativeOptions(),a={isMobile:C.isMobile()};if("https://cdn1.moe.video/integration/banner.vpaid.js"===e.GetCreativeURL().replace(/\s+/g,""))this.vpaid=new T(this,e.ID(),o,r,i);else if(e.IsNeedForeignFrame()){var s=e.GetOptionsFrameURI(o);this.vpaid=new S(this,e.ID(),s,r,i,a)}else this.vpaid=new P(this,e.ID(),o,r,i,a);this.slot.slot.append(this.vpaid.GetContainer())}}return t.prototype.GetAdvertID=function(){return this.vpaid.GetAdvertID()},t.prototype.GetFrame=function(){return this.vpaid.GetContainer()},t.prototype.ShowFrame=function(){this.vpaid.Show(),this.vpaid.GetContainer().setAttribute("in-play-state","true")},t.prototype.HideFrame=function(){this.vpaid.Hide(),this.vpaid.GetContainer().setAttribute("in-play-state",void 0)},t.prototype.RemoveFrame=function(){this.RemoveControls(),this.vpaid.Remove()},t.prototype.RemoveControls=function(){var t=this.slot.slot.querySelectorAll(V.SelectorControl());if(!(t.length<=0)){t.forEach((function(t){return t.remove()}));for(var e=0;e<t.length;e++)t[e].remove();var n=this.slot.slot.getElementsByTagName("style");if(!(n.length<=0))for(e=0;e<n.length;e++)n[e].remove()}},t.prototype.getAdLinear=function(){var t=this.vpaid.getAdLinear();return o.info('vpaid (id:"'.concat(this.advert,'") api wrapper "').concat(f.getAdLinear,'" ').concat(t)),t},t.prototype.getAdWidth=function(){var t=this.vpaid.getAdWidth();return o.info('vpaid (id:"'.concat(this.advert,'") api wrapper "').concat(f.getAdWidth,'" ').concat(t)),t},t.prototype.getAdHeight=function(){var t=this.vpaid.getAdHeight();return o.info('vpaid (id:"'.concat(this.advert,'") api wrapper "').concat(f.getAdHeight,'" ').concat(t)),t},t.prototype.getAdExpanded=function(){var t=this.vpaid.getAdExpanded();return o.info('vpaid (id:"'.concat(this.advert,'") api wrapper "').concat(f.getAdExpanded,'" ').concat(t)),t},t.prototype.getAdSkippableState=function(){var t=this.vpaid.getAdSkippableState();return o.info('vpaid (id:"'.concat(this.advert,'") api wrapper "').concat(f.getAdSkippableState,'" ').concat(t)),t},t.prototype.getAdRemainingTime=function(){var t=this.vpaid.getAdRemainingTime();return o.info('vpaid (id:"'.concat(this.advert,'") api wrapper "').concat(f.getAdRemainingTime,'" ').concat(t)),t},t.prototype.getAdDuration=function(){var t=this.vpaid.getAdDuration();return o.info('vpaid (id:"'.concat(this.advert,'") api wrapper "').concat(f.getAdDuration,'" ').concat(t)),t},t.prototype.getAdCompanions=function(){var t=this.vpaid.getAdCompanions();return o.info('vpaid (id:"'.concat(this.advert,'") api wrapper "').concat(f.getAdCompanions,'" ').concat(t)),t},t.prototype.setAdVolume=function(t){o.info('vpaid (id:"'.concat(this.advert,'") api wrapper "').concat(f.setAdVolume,'", ').concat(t)),this.vpaid.setAdVolume(t)},t.prototype.getAdVolume=function(){var t=this.vpaid.getAdVolume();return o.info('vpaid (id:"'.concat(this.advert,'") api wrapper "').concat(f.getAdVolume,'" ').concat(t)),t},t.prototype.getAdIcons=function(){var t=this.vpaid.getAdIcons();return o.info('vpaid (id:"'.concat(this.advert,'") api wrapper "').concat(f.getAdIcons,'" ').concat(t)),t},t.prototype.startAd=function(){this.ShowFrame(),this.vpaid.startAd(),o.info('vpaid (id:"'.concat(this.advert,'") api wrapper "').concat(h.startAd,'"'))},t.prototype.stopAd=function(){this.vpaid.stopAd(),this.RemoveFrame(),o.info('vpaid (id:"'.concat(this.advert,'") api wrapper "').concat(h.stopAd,'"'))},t.prototype.resizeAd=function(t,e,n){this.vpaid.resizeAd(t,e,n),o.info('vpaid (id:"'.concat(this.advert,'") api wrapper "').concat(h.resizeAd,'" ').concat(t,", ").concat(e,", ").concat(n))},t.prototype.pauseAd=function(){this.vpaid.pauseAd(),o.info('vpaid (id:"'.concat(this.advert,'") api wrapper "').concat(h.pauseAd,'"'))},t.prototype.resumeAd=function(){this.vpaid.resumeAd(),o.info('vpaid (id:"'.concat(this.advert,'") api wrapper "').concat(h.resumeAd,'"'))},t.prototype.expandAd=function(){this.vpaid.expandAd(),o.info('vpaid (id:"'.concat(this.advert,'") api wrapper "').concat(h.expandAd,'"'))},t.prototype.collapseAd=function(){this.vpaid.collapseAd(),o.info('vpaid (id:"'.concat(this.advert,'") api wrapper "').concat(h.collapseAd,'"'))},t.prototype.skipAd=function(){this.vpaid.skipAd(),o.info('vpaid (id:"'.concat(this.advert,'") api wrapper "').concat(h.skipAd,'"'))},t.prototype.AdImpression=function(t){this.queue.AdImpression(t),o.info('vpaid (id:"'.concat(this.advert,'") api wrapper "').concat(u.AdImpression,'" ').concat(t))},t.prototype.AdLoaded=function(t){this.queue.AdLoaded(t),o.info('vpaid (id:"'.concat(this.advert,'") api wrapper "').concat(u.AdLoaded,'" ').concat(t))},t.prototype.AdStarted=function(t){this.queue.AdStarted(t),o.info('vpaid (id:"'.concat(this.advert,'") api wrapper "').concat(u.AdStarted,'" ').concat(t))},t.prototype.AdRemainingTimeChange=function(t){this.queue.AdRemainingTimeChange(t),o.info('vpaid (id:"'.concat(this.advert,'") api wrapper "').concat(u.AdRemainingTimeChange,'" ').concat(t))},t.prototype.AdDurationChange=function(t){this.queue.AdDurationChange(t),o.info('vpaid (id:"'.concat(this.advert,'") api wrapper "').concat(u.AdDurationChange,'" ').concat(t))},t.prototype.AdLog=function(t){this.queue.AdLog(t),o.info('vpaid (id:"'.concat(this.advert,'") api wrapper "').concat(u.AdLog,'" ').concat(t))},t.prototype.AdTime=function(t){this.queue.AdTime(t),o.info('vpaid (id:"'.concat(this.advert,'") api wrapper "').concat(u.AdTime,'" ').concat(t))},t.prototype.AdError=function(t){this.queue.AdError(t),this.RemoveFrame(),o.info('vpaid (id:"'.concat(this.advert,'") api wrapper "').concat(u.AdError,'" ').concat(t))},t.prototype.AdInteraction=function(t){this.queue.AdInteraction(t),o.info('vpaid (id:"'.concat(this.advert,'") api wrapper "').concat(u.AdInteraction,'" ').concat(t))},t.prototype.AdClickThru=function(t,e,n){this.queue.AdClickThru(t,e,n),o.info('vpaid (id:"'.concat(this.advert,'") api wrapper "').concat(u.AdClickThru,'" ').concat(t))},t.prototype.AdUserMinimize=function(t){this.queue.AdUserMinimize(t),o.info('vpaid (id:"'.concat(this.advert,'") api wrapper "').concat(u.AdUserMinimize,'" ').concat(t))},t.prototype.AdUserClose=function(t){this.queue.AdUserClose(t),this.RemoveFrame(),o.info('vpaid (id:"'.concat(this.advert,'") api wrapper "').concat(u.AdUserClose,'" ').concat(t))},t.prototype.AdUserAcceptInvitation=function(t){this.queue.AdUserAcceptInvitation(t),o.info('vpaid (id:"'.concat(this.advert,'") api wrapper "').concat(u.AdUserAcceptInvitation,'" ').concat(t))},t.prototype.AdVideoFirstQuartile=function(t){this.queue.AdVideoFirstQuartile(t),o.info('vpaid (id:"'.concat(this.advert,'") api wrapper "').concat(u.AdVideoFirstQuartile,'" ').concat(t))},t.prototype.AdVideoMidpoint=function(t){this.queue.AdVideoMidpoint(t),o.info('vpaid (id:"'.concat(this.advert,'") api wrapper "').concat(u.AdVideoMidpoint,'" ').concat(t))},t.prototype.AdVideoThirdQuartile=function(t){this.queue.AdVideoThirdQuartile(t),o.info('vpaid (id:"'.concat(this.advert,'") api wrapper "').concat(u.AdVideoThirdQuartile,'" ').concat(t))},t.prototype.AdVideoComplete=function(t){this.queue.AdVideoComplete(t),o.info('vpaid (id:"'.concat(this.advert,'") api wrapper "').concat(u.AdVideoComplete,'" ').concat(t))},t.prototype.AdVideoStart=function(t){this.queue.AdVideoStart(t),o.info('vpaid (id:"'.concat(this.advert,'") api wrapper "').concat(u.AdVideoStart,'" ').concat(t))},t.prototype.AdVolumeChange=function(t){this.queue.AdVolumeChange(t),o.info('vpaid (id:"'.concat(this.advert,'") api wrapper "').concat(u.AdVolumeChange,'" ').concat(t))},t.prototype.AdLinearChange=function(t){this.queue.AdLinearChange(t),o.info('vpaid (id:"'.concat(this.advert,'") api wrapper "').concat(u.AdLinearChange,'" ').concat(t))},t.prototype.AdSkippableStateChange=function(t){this.queue.AdSkippableStateChange(t),o.info('vpaid (id:"'.concat(this.advert,'") api wrapper "').concat(u.AdSkippableStateChange,'" ').concat(t))},t.prototype.AdExpandedChange=function(t){this.queue.AdExpandedChange(t),o.info('vpaid (id:"'.concat(this.advert,'") api wrapper "').concat(u.AdExpandedChange,'" ').concat(t))},t.prototype.AdPlaying=function(t){this.queue.AdPlaying(t),o.info('vpaid (id:"'.concat(this.advert,'") api wrapper "').concat(u.AdPlaying,'" ').concat(t))},t.prototype.AdPaused=function(t){this.queue.AdPaused(t),o.info('vpaid (id:"'.concat(this.advert,'") api wrapper "').concat(u.AdPaused,'" ').concat(t))},t.prototype.AdSizeChange=function(t){this.queue.AdSizeChange(t),o.info('vpaid (id:"'.concat(this.advert,'") api wrapper "').concat(u.AdSizeChange,'" ').concat(t))},t.prototype.AdSkipped=function(t){this.queue.AdSkipped(t),o.info('vpaid (id:"'.concat(this.advert,'") api wrapper "').concat(u.AdSkipped,'" ').concat(t))},t.prototype.AdStopped=function(t){this.queue.AdStopped(t),o.info('vpaid (id:"'.concat(this.advert,'") api wrapper "').concat(u.AdStopped,'" ').concat(t))},t.prototype.AdBannerNURL=function(t,e){this.queue.AdBannerNURL(t,e),o.info('vpaid (id:"'.concat(this.advert,'") api wrapper "').concat(l.AdBannerNURL,'" ').concat(t))},t}(),w=n(32),x=n(300),M=function(){function t(t){this.id=(0,x.v4)(),this.data=t,void 0===this.data.id&&(this.data.id=this.id)}return t.prototype.getId=function(){return this.id},t.prototype.getData=function(){return this.data},t.prototype.getSkipOffset=function(){var t,e,n,i,o,r,a,s;return void 0!==(null===(t=this.data)||void 0===t?void 0:t.options)?null===(n=null===(e=this.data)||void 0===e?void 0:e.options)||void 0===n?void 0:n.skipOffset:void 0!==(null===(o=null===(i=this.parentAdvert)||void 0===i?void 0:i.data)||void 0===o?void 0:o.options)?null===(s=null===(a=null===(r=this.parentAdvert)||void 0===r?void 0:r.data)||void 0===a?void 0:a.options)||void 0===s?void 0:s.skipOffset:0},t.prototype.getVastId=function(){return this.data.id},t.prototype.setParentAdvert=function(t){this.parentAdvert=t},t.prototype.getParentId=function(){var t;return null===(t=this.parentAdvert)||void 0===t?void 0:t.getId()},t.prototype.getParentAdvert=function(){return this.parentAdvert},t.prototype.getRootAdId=function(){var t;return null===(t=this.rootAdvert)||void 0===t?void 0:t.getId()},t.prototype.setRootAdvert=function(t){this.rootAdvert=t},t.prototype.getControls=function(){var t;return this.rootAdvert?null===(t=this.rootAdvert)||void 0===t?void 0:t.getControls():this.data.controls},t.prototype.getOptions=function(){var t;return this.rootAdvert?null===(t=this.rootAdvert)||void 0===t?void 0:t.getOptions():this.data.options},t.prototype.getType=function(){return this.data.type},t.prototype.hash=function(){return JSON.stringify(this.data)},t.prototype.equals=function(t){return t.hash()===this.hash()},t.prototype.IsNeedForeignFrame=function(){return!!this.getOptions().iframePlayer},t.prototype.IsInline=function(){return this.getType()===k.InLine},t.prototype.isWrapper=function(){return this.getType()===k.Wrapper},t.prototype.getOrd=function(){var t;return this.rootAdvert?null===(t=this.rootAdvert)||void 0===t?void 0:t.getOrd():this.data.ord},t}();!function(t){t.Wrapper="Wrapper",t.InLine="InLine"}(k||(k={}));var R,G=function(){function t(t,e,n){this.parser=t,this.rootAd=e,this.parentAd=n}return t.prototype.parse=function(){var t=this;return this.parser.getVastElements(["Ad"]).map((function(e,n){var i,o,r=e.childs[0];if(r){var a=new M({id:e.attrs.id,system:null===(i=r.getChilds("AdSystem")[0])||void 0===i?void 0:i.content,title:null===(o=r.getChilds("Title")[0])||void 0===o?void 0:o.content,type:k[r.getName()],controls:t.parseControls(r),options:t.parseOptions(r),ord:t.getOrd(r)||void 0});return t.parentAd&&a.setParentAdvert(t.parentAd),t.rootAd&&a.setRootAdvert(t.rootAd),{element:r,advert:a}}}))},t.prototype.parseControls=function(t){var e,n,i,o,r,a,s,d,c,p,u,l,h,f=null===(e=t.getChilds("Extensions")[0])||void 0===e?void 0:e.getChilds("Extension");if(void 0!==f)return{fullscreen:"true"===(null===(i=null===(n=f[0])||void 0===n?void 0:n.getChilds("Controls")[0])||void 0===i?void 0:i.getAttr("fullscreen")),volume:"true"===(null===(r=null===(o=f[0])||void 0===o?void 0:o.getChilds("Controls")[0])||void 0===r?void 0:r.getAttr("volume")),timeline:"true"===(null===(s=null===(a=f[0])||void 0===a?void 0:a.getChilds("Controls")[0])||void 0===s?void 0:s.getAttr("timeline")),playback:"true"===(null===(c=null===(d=f[0])||void 0===d?void 0:d.getChilds("Controls")[0])||void 0===c?void 0:c.getAttr("playback")),skip:"true"===(null===(u=null===(p=f[0])||void 0===p?void 0:p.getChilds("Controls")[0])||void 0===u?void 0:u.getAttr("skip")),agency:"true"===(null===(h=null===(l=f[0])||void 0===l?void 0:l.getChilds("Controls")[0])||void 0===h?void 0:h.getAttr("agency")),payedEvent:null}},t.prototype.parseOptions=function(t){var e,n,i,o,r,a,s,d,c,p,u,l,h,f,v,A,y,g,m,I,C,S=null===(e=t.getChilds("Extensions")[0])||void 0===e?void 0:e.getChilds("Extension");if(void 0!==S){var b=(null===(i=null===(n=S[0])||void 0===n?void 0:n.getChilds("Player")[0])||void 0===i?void 0:i.getAttr("showLimit"))||null,V=(null===(r=null===(o=S[0])||void 0===o?void 0:o.getChilds("Player")[0])||void 0===r?void 0:r.getAttr("skipOffset"))||null,E=(null===(s=null===(a=S[0])||void 0===a?void 0:a.getChilds("Player")[0])||void 0===s?void 0:s.getAttr("startToClick"))||null,P=(null===(c=null===(d=S[0])||void 0===d?void 0:d.getChilds("Player")[0])||void 0===c?void 0:c.getAttr("iframePlayer"))||"",k=(null===(u=null===(p=S[0])||void 0===p?void 0:p.getChilds("Player")[0])||void 0===u?void 0:u.getAttr("timeoutLimit"))||null,T=(null===(h=null===(l=S[0])||void 0===l?void 0:l.getChilds("Player")[0])||void 0===h?void 0:h.getAttr("clickDelay"))||null,D=(null===(v=null===(f=S[0])||void 0===f?void 0:f.getChilds("Integration")[0])||void 0===v?void 0:v.getAttr("type"))||null,w=+(null===(y=null===(A=S[0])||void 0===A?void 0:A.getChilds("Integration")[0])||void 0===y?void 0:y.getAttr("dsp"));isNaN(w)&&(w=void 0);var x=null===(m=null===(g=S[0])||void 0===g?void 0:g.getChilds("Integration")[0])||void 0===m?void 0:m.getAttr("burl");""===x&&(x=void 0);var M=(null===(C=null===(I=S[0])||void 0===I?void 0:I.getChilds("PayEvent")[0])||void 0===C?void 0:C.getAttr("id"))||N,R=B[M];return R||(R=N),{showLimit:Number(b),skipOffset:Number(V),startToClick:"true"===E,iframePlayer:P.length>0?P:null,timeoutLimit:Number(k),clickDelay:Number(T),integrationType:+D,rtb:{dsp:w,burl:x},payPlayerEvent:R}}},t.prototype.getOrd=function(t){var e,n,i=null===(e=t.getChilds("Extensions")[0])||void 0===e?void 0:e.getChilds("Extension");if(void 0===i)return"";var o=null===(n=i[0])||void 0===n?void 0:n.getChilds("Ord")[0];return(null==o?void 0:o.getAttr("content"))||""},t}(),L=function(){function t(t,e,n){this.advert=t,this.advertRootElement=e,this.rootAdvert=n}return t.prototype.parse=function(){if("Wrapper"===this.advertRootElement.getName()){var t=this.advertRootElement.getChilds("VASTAdTagURI")[0].content;if(t)return{url:t,advert:this.advert,rootAdvert:this.rootAdvert?this.rootAdvert:this.advert}}},t}(),B={0:"duration_3",1:"duration_30",2:"duration_1",10:u.AdLog,11:u.AdTime,12:u.AdError,13:u.AdPaused,14:u.AdLoaded,15:u.AdPlaying,16:u.AdStarted,17:u.AdStopped,18:u.AdSkipped,19:u.AdUserClose,20:u.AdClickThru,21:u.AdVideoStart,22:u.AdImpression,23:u.AdSizeChange,24:u.AdInteraction,25:u.AdVolumeChange,26:u.AdUserMinimize,27:u.AdLinearChange,28:u.AdVideoMidpoint,29:u.AdVideoComplete,30:u.AdDurationChange,31:u.AdExpandedChange,32:u.AdVideoFirstQuartile,33:u.AdVideoThirdQuartile,34:u.AdRemainingTimeChange,35:u.AdSkippableStateChange,36:u.AdUserAcceptInvitation},N=B[0],O=function(){function t(t,e){this.id=(0,x.v4)(),this.adId=t,this.data=e}return t.prototype.getId=function(){return this.id},t.prototype.getClickUrl=function(){return this.data.clickUrl},t.prototype.getAdId=function(){return this.adId},t.prototype.getVastCreative=function(){return this.data},t.prototype.getSkipOffset=function(){return this.data.skipOffset},t.prototype.setSkipOffset=function(t){this.data.skipOffset=t},t.prototype.getDuration=function(){return this.data.duration},t.prototype.getVastId=function(){return this.data.id},t.prototype.hash=function(){return JSON.stringify(this.data)},t.prototype.equals=function(t){return t.hash()===this.hash()},t}();!function(t){t.Linear="Linear",t.NonLinearAds="NonLinearAds",t.CompanionAds="CompanionAds"}(R||(R={}));var U,F,_=function(){function t(t,e){this.adId=t,this.advertRootElement=e}return t.prototype.parse=function(){var t,e=this,n=null===(t=this.advertRootElement.getChilds("Creatives")[0])||void 0===t?void 0:t.getChilds("Creative");return n?n.map((function(t){var n,i=(null===(n=t.attrs)||void 0===n?void 0:n.sequence)?+t.attrs.sequence:0,o=e.parseCreativeRootElement(t),r=R[o.name],a=e.parseCreativeClickUrl(o),s=e.parseCreativeDuration(o),d=e.parseCreativeSkipOffset(o);return{element:o,creative:new O(e.adId,{id:t.attrs.id,adId:t.attrs.adId,duration:s,clickUrl:a,format:r,sequence:i,skipOffset:d})}})):[]},t.prototype.convertStringToSeconds=function(t){if(t){var e=t.split(":");return 3600*parseInt(e[0])+60*parseInt(e[1])+parseInt(e[2])}},t.prototype.parseCreativeSkipOffset=function(t){var e=t.getAttr("skipoffset"),n=this.convertStringToSeconds(e);if(n)return n},t.prototype.parseCreativeDuration=function(t){var e,n=null===(e=t.getChilds("Duration")[0])||void 0===e?void 0:e.content;return this.convertStringToSeconds(n)},t.prototype.parseCreativeClickUrl=function(t){var e,n;return null===(n=null===(e=t.getChilds("VideoClicks")[0])||void 0===e?void 0:e.getChilds("ClickThrough")[0])||void 0===n?void 0:n.content},t.prototype.parseCreativeRootElement=function(t){var e=t.getChilds("Linear")[0];if(e)return e;var n=t.getChilds("NonLinearAds")[0];if(n)return n;var i=t.getChilds("CompanionAds")[0];return i||void 0},t}(),Q=n(752),W=function(){function t(){this.id=(0,x.v4)()}return t.prototype.getId=function(){return this.id},t.prototype.getControls=function(){return this.advert.getControls()},t.prototype.getDuration=function(){return this.creative.getDuration()},t.prototype.getScriptUrl=function(){return this.vpaidFilesUrl+"/"+this.getFileName()},t.prototype.crypt=function(t){return Q(t)},t}(),z=(U=function(t,e){return U=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},U(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}U(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),q=function(t){function e(e,n,i,o){var r=t.call(this)||this;return r.advert=e,r.creative=n,r.mediaFileList=i,r.vpaidFilesUrl=o,r}return z(e,t),e.getSupportMimeTypes=function(){return["video/mp4","video/mpeg","video/webm","video/ogg","video/3gpp"]},e.prototype.getAdId=function(){return this.advert.getId()},e.prototype.getCreativeId=function(){return this.creative.getId()},e.prototype.getClickUrl=function(){return this.creative.getClickUrl()},e.prototype.getSkipOffset=function(){return this.creative.getSkipOffset()},e.prototype.getParams=function(){return JSON.stringify({videos:this.mediaFileList.map((function(t){return t.vastData})),skipOffset:this.getSkipOffset()})},e.prototype.getFileName=function(){return"html5.vpaid.js"},e.prototype.equals=function(t){return t.hash()==t.hash()},e.prototype.hash=function(){return this.crypt(this.mediaFileList.reduce((function(t,e){return t+e.hash()}),""))},e.prototype.GetMediaFile=function(){return this.mediaFileList[0]},e}(W),j=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),H=function(t){function e(e,n,i,o){var r=t.call(this)||this;return r.advert=e,r.creative=n,r.mediaFileList=i,r.vpaidFilesUrl=o,r}return j(e,t),e.getSupportMimeTypes=function(){return["stream/hls"]},e.prototype.getAdId=function(){return this.advert.getId()},e.prototype.getCreativeId=function(){return this.creative.getId()},e.prototype.getClickUrl=function(){return this.creative.getClickUrl()},e.prototype.getSkipOffset=function(){return this.creative.getSkipOffset()},e.prototype.getParams=function(){return JSON.stringify({videos:this.mediaFileList})},e.prototype.getFileName=function(){return"stream.vpaid.js"},e.prototype.equals=function(t){return t.hash()==t.hash()},e.prototype.hash=function(){return this.crypt(this.mediaFileList.reduce((function(t,e){return t+e.hash()}),""))},e}(W),K=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Y=function(t){function e(e,n,i){var o=t.call(this)||this;return o.advert=e,o.creative=n,o.mediaFile=i,o}return K(e,t),e.getSupportMimeTypes=function(){return["vpaid"]},e.prototype.getAdId=function(){return this.advert.getId()},e.prototype.getSkipOffset=function(){return this.creative.getSkipOffset()},e.prototype.getCreativeId=function(){return this.creative.getId()},e.prototype.getClickUrl=function(){return this.creative.getClickUrl()},e.prototype.getParams=function(){return this.mediaFile.vastData.params},e.prototype.getFileName=function(){return""},e.prototype.getScriptUrl=function(){return this.mediaFile.vastData.url},e.prototype.equals=function(t){return this.hash()===t.hash()},e.prototype.hash=function(){return this.crypt(this.mediaFile.hash())},e.prototype.GetMediaFile=function(){return this.mediaFile},e}(W),X=function(){function t(t){this.id=(0,x.v4)(),this.vastMediaFile=t}return Object.defineProperty(t.prototype,"vastData",{get:function(){return this.vastMediaFile},enumerable:!1,configurable:!0}),t.prototype.getId=function(){return this.id},t.prototype.hash=function(){return JSON.stringify(this.vastMediaFile)},t.prototype.equals=function(t){return t.hash()===this.hash()},t}(),J=function(){function t(t,e,n,i,o){this.advert=t,this.creativeModel=e,this.creativeRootElement=n,this.vpaidFilesUrl=i,this.advertRoot=o}return t.prototype.parse=function(){var t,e=this,n=null===(t=this.creativeRootElement.getChilds("MediaFiles")[0])||void 0===t?void 0:t.getChilds("MediaFile"),i=[];return n&&n.forEach((function(t){var n,o=t.getAttr("scalable"),r=!("false"===o||"1"===o),a=t.getAttr("type"),s=t.getAttr("height")?+t.getAttr("height"):void 0,d=t.getAttr("width")?+t.getAttr("width"):void 0,c=t.getAttr("bitrate")?+t.getAttr("bitrate"):void 0,p=t.getAttr("maxBitrate")?+t.getAttr("maxBitrate"):void 0,u=t.getAttr("minBitrate")?+t.getAttr("minBitrate"):void 0,l=t.getAttr("aspectRation")?t.getAttr("aspectRation"):void 0,h="VPAID"===t.getAttr("apiFramework"),f=h?null===(n=e.creativeRootElement.getChilds("AdParameters")[0])||void 0===n?void 0:n.content:void 0,v=new X({id:t.getAttr("id"),mimetype:h?"vpaid":a,url:t.getContent(),aspectRation:l,scalable:r,height:s,width:d,bitrate:c,maxBitrate:p,minBitrate:u,params:f});i.push(v)})),this.convertToVpaidContent(this.advert,i)},t.prototype.convertToVpaidContent=function(t,e){var n=this,i=e.filter((function(t){return q.getSupportMimeTypes().includes(t.vastData.mimetype)})),o=e.filter((function(t){return H.getSupportMimeTypes().includes(t.vastData.mimetype)})),r=e.filter((function(t){return Y.getSupportMimeTypes().includes(t.vastData.mimetype)})),a=[];return i.length>0&&a.push(new q(t,this.creativeModel,i,this.vpaidFilesUrl)),o.length>0&&a.push(new H(t,this.creativeModel,o,this.vpaidFilesUrl)),r.forEach((function(e){a.push(new Y(t,n.creativeModel,e))})),a},t}(),$=function(){function t(t,e,n,i,o){this.advert=t,this.creative=e,this.type=n,this.url=i,this.offset=o}return t.prototype.GetType=function(){return this.type},t.prototype.GetURL=function(){return this.url},t}();!function(t){t.creativeView="creativeView",t.start="start",t.firstQuartile="firstQuartile",t.midpoint="midpoint",t.thirdQuartile="thirdQuartile",t.complete="complete",t.mute="mute",t.unmute="unmute",t.pause="pause",t.rewind="rewind",t.resume="resume",t.fullscreen="fullscreen",t.exitFullscreen="exitFullscreen",t.expand="expand",t.collapse="collapse",t.acceptInvitationLinear="acceptInvitationLinear",t.closeLinear="closeLinear",t.skip="skip",t.progress="progress",t.clickTracking="clickTracking",t.clickThrough="clickThrough",t.impression="impression",t.error="error"}(F||(F={}));var Z,tt=function(){function t(t){var e=this;for(var n in this.data={},this.data={},F)this.data[n]=void 0;t.forEach((function(t){void 0===e.data[t.GetType()]&&(e.data[t.GetType()]=[]),e.data[t.GetType()].push(t)}))}return t.prototype.CreativeView=function(){t.call(F.creativeView,this.data[F.creativeView])},t.prototype.Start=function(){t.call(F.start,this.data[F.start])},t.prototype.FirstQuartile=function(){t.call(F.firstQuartile,this.data[F.firstQuartile])},t.prototype.Midpoint=function(){t.call(F.midpoint,this.data[F.midpoint])},t.prototype.ThirdQuartile=function(){t.call(F.thirdQuartile,this.data[F.thirdQuartile])},t.prototype.Complete=function(){t.call(F.complete,this.data[F.complete])},t.prototype.Mute=function(){t.call(F.mute,this.data[F.mute])},t.prototype.Unmute=function(){t.call(F.unmute,this.data[F.unmute])},t.prototype.Pause=function(){t.call(F.pause,this.data[F.pause])},t.prototype.Resume=function(){t.call(F.resume,this.data[F.resume])},t.prototype.Rewind=function(){o.info('track event call "'.concat(F.rewind,'" -> undefined'))},t.prototype.Expand=function(){t.call(F.expand,this.data[F.expand])},t.prototype.Collapse=function(){t.call(F.collapse,this.data[F.collapse])},t.prototype.Fullscreen=function(){t.call(F.fullscreen,this.data[F.fullscreen])},t.prototype.ExitFullscreen=function(){t.call(F.exitFullscreen,this.data[F.exitFullscreen])},t.prototype.AcceptInvitationLinear=function(){t.call(F.acceptInvitationLinear,this.data[F.acceptInvitationLinear])},t.prototype.CloseLinear=function(){t.call(F.closeLinear,this.data[F.closeLinear])},t.prototype.Skip=function(){t.call(F.skip,this.data[F.skip])},t.prototype.Progress=function(){o.info('track event call "'.concat(F.progress,'" -> undefined'))},t.prototype.ClickTracking=function(){t.call(F.clickTracking,this.data[F.clickTracking])},t.prototype.ClickTrough=function(){t.go(F.clickThrough,this.data[F.clickThrough])},t.prototype.Impression=function(){t.call(F.impression,this.data[F.impression])},t.prototype.Error=function(){t.call(F.error,this.data[F.error])},t.call=function(t,e){if(e)for(var n=function(n){var i=e[n].GetType(),r=e[n].GetURL();if(!r)return"continue";0===(r=g.replace(r)).indexOf("//wcm-ru")&&(r="https:"+r),c.Instance().SetTrackCall(i,r),o.info('track event call "'.concat(t,'"'));try{var a=new Image;a.src=r,a.onload=function(){c.Instance().FinishTrackCall(i,r)},a.onerror=function(){c.Instance().FinishTrackCall(i,r)}}catch(e){o.info('track event call exception "'.concat(t,'"'),e.message)}},i=0;i<e.length;i++)n(i)},t.go=function(t,e){null==e||e.forEach((function(e){o.info('track event call "'.concat(t,'"'));try{window.open(e.GetURL())}catch(e){o.info('track event call exception "'.concat(t,'"'),e.message)}}))},t}(),et=function(){function t(){}return t.parseAdvertTrack=function(t,e){var n=[];return e.getChilds("Impression").forEach((function(e){n.push({adId:t.getId(),creativeId:void 0,offset:void 0,type:F.impression,url:e.content})})),e.getChilds("Error").forEach((function(e){n.push({adId:t.getId(),creativeId:void 0,offset:void 0,type:F.error,url:e.content})})),n},t.parseCreativeTrack=function(t,e,n){var i=[],o=n.getChilds("TrackingEvents")[0],r=n.getChilds("VideoClicks")[0];return o&&o.getChilds("Tracking").forEach((function(n){var o;i.push({adId:t.getId(),creativeId:e.getId(),offset:null===(o=n.attrs)||void 0===o?void 0:o.offset,type:n.attrs.event,url:n.content})})),r&&(r.getChilds("ClickTracking").forEach((function(n){var o;i.push({adId:t.getId(),creativeId:e.getId(),offset:null===(o=n.attrs)||void 0===o?void 0:o.offset,type:F.clickTracking,url:n.content})})),r.getChilds("ClickThrough").forEach((function(n){var o;i.push({adId:t.getId(),creativeId:e.getId(),offset:null===(o=n.attrs)||void 0===o?void 0:o.offset,type:F.clickThrough,url:n.content})}))),i},t}(),nt=function(){function t(t){this.id=t.id,this.url=t.url,this.params=t.params,this.width=t.width,this.height=t.height,this.aspectRatio=t.aspectRation,this.mimetype=t.mimetype,this.bitrate=t.bitrate,this.maxBitrate=t.maxBitrate,this.minBitrate=t.minBitrate,this.scalable=t.scalable}return t.prototype.Type=function(){return this.mimetype},t.prototype.GetURL=function(){var t="";switch(this.Type()){case Z.VPAID:t=this.url;break;case Z.VideoMP4:case Z.Webm:t="https://cdn1.moe.video/integration/html5.vpaid.js"}return t},t.prototype.GetParams=function(){var t=this.Type(),e="";switch(t){case Z.VPAID:e=this.params;break;case Z.VideoMP4:case Z.Webm:e=JSON.stringify({videos:[{url:this.url,mimetype:t}]})}return e},t}();!function(t){t.VPAID="vpaid",t.VideoMP4="video/mp4",t.Webm="video/webm"}(Z||(Z={}));var it,ot,rt,at=function(){function t(t,e,n,i,o){this.id=t,this.advert=e,this.sequence=n.sequence,this.duration=n.duration,this.skipOffset=n.skipOffset,this.format=n.format,this.clickUrl=n.clickUrl,this.media=o,this.trackingEvents=i}return t.prototype.GetSkipOffset=function(){return this.skipOffset},t.prototype.CallTrackingEventsCreativeView=function(){this.trackingEvents.CreativeView()},t.prototype.CallTrackingEventsStart=function(){this.trackingEvents.Start()},t.prototype.CallTrackingEventsFirstQuartile=function(){this.trackingEvents.FirstQuartile()},t.prototype.CallTrackingEventsMidpoint=function(){this.trackingEvents.Midpoint()},t.prototype.CallTrackingEventsThirdQuartile=function(){this.trackingEvents.ThirdQuartile()},t.prototype.CallTrackingEventsComplete=function(){this.trackingEvents.Complete()},t.prototype.CallTrackingEventsMute=function(){this.trackingEvents.Mute()},t.prototype.CallTrackingEventsUnmute=function(){this.trackingEvents.Unmute()},t.prototype.CallTrackingEventsPause=function(){this.trackingEvents.Pause()},t.prototype.CallTrackingEventsResume=function(){this.trackingEvents.Resume()},t.prototype.CallTrackingEventsRewind=function(){this.trackingEvents.Rewind()},t.prototype.CallTrackingEventsExpand=function(){this.trackingEvents.Expand()},t.prototype.CallTrackingEventsCollapse=function(){this.trackingEvents.Collapse()},t.prototype.CallTrackingEventsFullscreen=function(){this.trackingEvents.Fullscreen()},t.prototype.CallTrackingEventsExitFullscreen=function(){this.trackingEvents.ExitFullscreen()},t.prototype.CallTrackingEventsAcceptInvitationLinear=function(){this.trackingEvents.AcceptInvitationLinear()},t.prototype.CallTrackingEventsCloseLinear=function(){this.trackingEvents.CloseLinear()},t.prototype.CallTrackingEventsSkip=function(){this.trackingEvents.Skip()},t.prototype.CallTrackingEventsProgress=function(){this.trackingEvents.Progress()},t.prototype.CallVideoClicksClickTracking=function(){this.trackingEvents.ClickTracking()},t.prototype.CallVideoClicksClickTrough=function(){this.trackingEvents.ClickTrough()},t.prototype.CallTrackingImpression=function(){this.trackingEvents.Impression()},t.prototype.CallTrackingError=function(){this.trackingEvents.Error()},t}();!function(t){t.Linear="Linear",t.NonLinearAds="NonLinearAds",t.CompanionAds="CompanionAds"}(it||(it={})),function(t){var e=new(function(){function t(){var t=this;this.frameStorage=[],this.frameReadyQueue=[],this.frameResolveQueue=[],this.fetchResultResolveStorage=[],window.addEventListener("message",(function(e){if(!0===Boolean(e.data))try{o.debug("proxy-uri exception receive:",e.data);var n=JSON.parse(e.data);t.fetchResultResolveStorage[n.domain][n.uri](n.text)}catch(n){o.debug("proxy-uri exception",n,e,t.fetchResultResolveStorage)}}))}return t.prototype.fetch=function(t,e){var n=this;return this.frameReadyQueue[t]?this.push(t,e):void 0===this.frameStorage[t]?new Promise((function(e,i){n.frameStorage[t]=n.frame(t,e)})).then((function(){return n.push(t,e)})):new Promise((function(e,i){n.frameResolveQueue[t]||(n.frameResolveQueue[t]=[]),n.frameResolveQueue[t].push(e)})).then((function(){return n.push(t,e)}))},t.prototype.push=function(t,e){var n=this;return new Promise((function(i,o){n.fetchResultResolveStorage[t]||(n.fetchResultResolveStorage[t]=[]),n.fetchResultResolveStorage[t][e]=i,n.frameStorage[t].contentWindow.postMessage(JSON.stringify({domain:t,uri:e}),"*")}))},t.prototype.frame=function(t,e){var n=this,i=document.createElement("iframe");return i.id="frame_".concat(t),i.style.visibility="hidden",i.src=t,i.onload=function(){e(),n.frameResolveQueue[t]&&n.frameResolveQueue[t].forEach((function(t){return t()})),n.frameReadyQueue[t]=!0},window.document.body.appendChild(i),i},t}());t.fetch=function(t,n){return e.fetch(t,n)}}(ot||(ot={})),function(t){t.Parse=function(t){e.parse(t)};var e=new(function(){function t(t){this.vpaidURI=t}return t.prototype.parse=function(t,e,i,r){void 0===r&&(r=!0),t&&(t=t.replace(/<!--.*-->/i,""));var a=new n(t,this.vpaidURI,i,e),s=a.getCreativeList().length>0,d=a.getAdvertList().length>0,c=a.getWrapperList().length>0,p=!s&&!c||!d;if(o.info("vast parser is-vast-parse-error:".concat(p," is-have-wrappers:").concat(c," is-have-adverts:").concat(d," is-have-creatives:").concat(s)),o.info("vast parser xml:".concat(t)),!(e&&i&&e.getId()===i.getId()&&p||p)){try{a.getAdvertList().forEach((function(t){var e=[];a.getCreativeList().forEach((function(n){var i=[];if(n.getAdId()===t.getId()){a.getTrackList().forEach((function(t){(t.creativeId===n.getId()||t.adId===n.getAdId())&&i.push(new $(void 0,n.getId(),t.type,t.url,t.offset))}));var r,s=new tt(i);a.getContentVpaidList().forEach((function(e){t.getId()==e.getAdId()&&(e instanceof Y||e instanceof q?r=new nt(e.GetMediaFile().vastData):o.error("vast parser error"))}));var d=new at(n.getId(),t.getVastId(),{id:n.getVastCreative().id,adId:n.getVastCreative().adId,sequence:n.getVastCreative().sequence,duration:n.getVastCreative().duration,skipOffset:n.getVastCreative().skipOffset,format:n.getVastCreative().format,clickUrl:n.getVastCreative().clickUrl},s,r);e.push(d)}}));var n=[];a.getTrackList().forEach((function(e){void 0===e.creativeId&&n.push(new $(t.getId(),void 0,e.type,e.url,e.offset))}));var i=new Jt(t,e,new tt(n));o.backend("[QUEUE] append advert model to queue",i),Ht.GetInstance().Append(i)}))}catch(t){o.info("vast parser exception: ".concat(t.message),t)}this.loadWrapper(a.getWrapperList())}},t.prototype.loadWrapper=function(t){for(var e=0;e<t.length;e++)this.loadByHttp(t[e].url,t[e].advert,t[e].rootAdvert)},t.prototype.loadByHttp=function(t,e,n){var i=this;n===e&&Ut.GetInstance().SendMVAdvertiserRequest(+e.getData().id);var o,r={placement:c.Instance().GetPlacement(),user_uid:c.Instance().GetUserUid(),ads_id:e.getId(),user_id:c.Instance().GetMacrosWebmaster(),frameref:e.getOptions().iframePlayer,referer:c.Instance().GetMacrosReferer(),site:c.Instance().GetMacrosSite(),site_id:c.Instance().GetSiteID(),pos:c.Instance().GetPos()};if(e.IsNeedForeignFrame()){var a=e.getOptions().iframePlayer;o=this.getVASTViaForeignFrame(t,r,a)}else o=this.getVASTViaDirectFetch(t,r);o.then((function(t){return i.parse(t,e,n)}))},t.prototype.getVASTViaForeignFrame=function(t,e,n){var i=Jt.GetOptionsProxyURI(n);return o.info("vast parser get: ".concat(t," via ").concat(i)),ot.fetch(i,g.replace(t,e))},t.prototype.getVASTViaDirectFetch=function(t,e){var n=g.replace(t,e);return o.info("vast parser get: ".concat(n)),fetch(n,{credentials:"include"}).then((function(t){return t.text()})).catch((function(t){o.error("VAST fetch exception:",n,t)}))},t}())("https://moevideo.com"),n=function(){function t(t,e,n,i){this.rootAdvert=n,this.parentAdvert=i,this.vpaidURI=e,this.advertList=[],this.wrapperList=[],this.creativeList=[],this.contentVpaidList=[],this.trackList=[],this.parser=new w.c,this.parser.addVastWithoutFetching(t),this.parseAdvert()}return t.prototype.getAdvertList=function(){return this.advertList},t.prototype.getWrapperList=function(){return this.wrapperList},t.prototype.getCreativeList=function(){return this.creativeList},t.prototype.getContentVpaidList=function(){return this.contentVpaidList},t.prototype.getTrackList=function(){return this.trackList},t.prototype.getIconList=function(){},t.prototype.parseAdvert=function(){var t=this,e=new G(this.parser,this.rootAdvert,this.parentAdvert);this.advertList=e.parse().map((function(e){return t.parseWrapper(e.advert,e.element),t.parseCreative(e.advert,e.element),t.parseAdvertTrack(e.advert,e.element),e.advert})),o.info("vast parser advert",this.advertList)},t.prototype.parseWrapper=function(t,e){var n=new L(t,e,this.rootAdvert).parse();o.info("vast parser wrapper",n),n&&this.wrapperList.push(n)},t.prototype.parseCreative=function(t,e){var n=this;new _(t.getId(),e).parse().forEach((function(e){e.creative.getSkipOffset()<=0&&e.creative.setSkipOffset(t.getSkipOffset()),n.parseMediaFile(t,e.creative,e.element),n.parseCreativeTrack(t,e.creative,e.element),n.creativeList.push(e.creative)})),o.info("vast parser creatives",this.creativeList)},t.prototype.parseMediaFile=function(t,e,n){var i,o=new J(t,e,n,this.vpaidURI,this.rootAdvert);(i=this.contentVpaidList).push.apply(i,o.parse())},t.prototype.parseCreativeTrack=function(t,e,n){var i;(i=this.trackList).push.apply(i,et.parseCreativeTrack(t,e,n))},t.prototype.parseAdvertTrack=function(t,e){var n;(n=this.trackList).push.apply(n,et.parseAdvertTrack(t,e)),o.info("vast parser tracks",this.trackList)},t}()}(rt||(rt={}));const st=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)};const dt="object"==typeof global&&global&&global.Object===Object&&global;var ct="object"==typeof self&&self&&self.Object===Object&&self;const pt=dt||ct||Function("return this")();const ut=function(){return pt.Date.now()};var lt=/\s/;const ht=function(t){for(var e=t.length;e--&&lt.test(t.charAt(e)););return e};var ft=/^\s+/;const vt=function(t){return t?t.slice(0,ht(t)+1).replace(ft,""):t};const At=pt.Symbol;var yt=Object.prototype,gt=yt.hasOwnProperty,mt=yt.toString,It=At?At.toStringTag:void 0;const Ct=function(t){var e=gt.call(t,It),n=t[It];try{t[It]=void 0;var i=!0}catch(t){}var o=mt.call(t);return i&&(e?t[It]=n:delete t[It]),o};var St=Object.prototype.toString;const bt=function(t){return St.call(t)};var Vt=At?At.toStringTag:void 0;const Et=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":Vt&&Vt in Object(t)?Ct(t):bt(t)};const Pt=function(t){return null!=t&&"object"==typeof t};const kt=function(t){return"symbol"==typeof t||Pt(t)&&"[object Symbol]"==Et(t)};var Tt=/^[-+]0x[0-9a-f]+$/i,Dt=/^0b[01]+$/i,wt=/^0o[0-7]+$/i,xt=parseInt;const Mt=function(t){if("number"==typeof t)return t;if(kt(t))return NaN;if(st(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=st(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=vt(t);var n=Dt.test(t);return n||wt.test(t)?xt(t.slice(2),n?2:8):Tt.test(t)?NaN:+t};var Rt=Math.max,Gt=Math.min;const Lt=function(t,e,n){var i,o,r,a,s,d,c=0,p=!1,u=!1,l=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function h(e){var n=i,r=o;return i=o=void 0,c=e,a=t.apply(r,n)}function f(t){var n=t-d;return void 0===d||n>=e||n<0||u&&t-c>=r}function v(){var t=ut();if(f(t))return A(t);s=setTimeout(v,function(t){var n=e-(t-d);return u?Gt(n,r-(t-c)):n}(t))}function A(t){return s=void 0,l&&i?h(t):(i=o=void 0,a)}function y(){var t=ut(),n=f(t);if(i=arguments,o=this,d=t,n){if(void 0===s)return function(t){return c=t,s=setTimeout(v,e),p?h(t):a}(d);if(u)return clearTimeout(s),s=setTimeout(v,e),h(d)}return void 0===s&&(s=setTimeout(v,e)),a}return e=Mt(e)||0,st(n)&&(p=!!n.leading,r=(u="maxWait"in n)?Rt(Mt(n.maxWait)||0,e):r,l="trailing"in n?!!n.trailing:l),y.cancel=function(){void 0!==s&&clearTimeout(s),c=0,i=d=o=s=void 0},y.flush=function(){return void 0===s?a:A(ut())},y};var Bt,Nt={},Ot=function(t){Nt[t]?Nt[t].event=new Event(t):Nt[t]={event:new Event(t),callback:null},document.querySelector(c.Instance().GetScriptElement()).dispatchEvent(Nt[t].event)};(Bt||(Bt={})).Socket=function(t,e){var n=new WebSocket(e);return n.onopen=function(){return t.onOpen()},n.onclose=function(){return t.onClose()},n.onerror=function(e){return t.onError(e)},n.onmessage=function(e){return t.onMessage(e)},n};var Ut,Ft=function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function a(t){try{d(i.next(t))}catch(t){r(t)}}function s(t){try{d(i.throw(t))}catch(t){r(t)}}function d(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}d((i=i.apply(t,e||[])).next())}))},_t=function(t,e){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}};!function(t){var e,n;!function(t){t[t.VPAIDStartAd=0]="VPAIDStartAd",t[t.VPAIDStopAd=1]="VPAIDStopAd",t[t.VPAIDResizeAd=2]="VPAIDResizeAd",t[t.VPAIDPauseAd=3]="VPAIDPauseAd",t[t.VPAIDResumeAd=4]="VPAIDResumeAd",t[t.VPAIDExpandAd=5]="VPAIDExpandAd",t[t.VPAIDCollapseAd=6]="VPAIDCollapseAd",t[t.VPAIDSkipAd=7]="VPAIDSkipAd",t[t.VPAIDGetAdLinear=8]="VPAIDGetAdLinear",t[t.VPAIDGetAdWidth=9]="VPAIDGetAdWidth",t[t.VPAIDGetAdHeight=10]="VPAIDGetAdHeight",t[t.VPAIDGetAdExpanded=11]="VPAIDGetAdExpanded",t[t.VPAIDGetAdSkippableState=12]="VPAIDGetAdSkippableState",t[t.VPAIDGetAdRemainingTime=13]="VPAIDGetAdRemainingTime",t[t.VPAIDGetAdDuration=14]="VPAIDGetAdDuration",t[t.VPAIDGetAdCompanions=15]="VPAIDGetAdCompanions",t[t.VPAIDSetAdVolume=16]="VPAIDSetAdVolume",t[t.VPAIDGetAdVolume=17]="VPAIDGetAdVolume",t[t.VPAIDGetAdIcons=18]="VPAIDGetAdIcons",t[t.VPAIDAdLoaded=19]="VPAIDAdLoaded",t[t.VPAIDAdStarted=20]="VPAIDAdStarted",t[t.VPAIDAdStopped=21]="VPAIDAdStopped",t[t.VPAIDAdSkipped=22]="VPAIDAdSkipped",t[t.VPAIDAdPaused=23]="VPAIDAdPaused",t[t.VPAIDAdSizeChange=24]="VPAIDAdSizeChange",t[t.VPAIDAdPlaying=25]="VPAIDAdPlaying",t[t.VPAIDAdExpandedChange=26]="VPAIDAdExpandedChange",t[t.VPAIDAdSkippableStateChange=27]="VPAIDAdSkippableStateChange",t[t.VPAIDAdLinearChange=28]="VPAIDAdLinearChange",t[t.VPAIDAdVolumeChange=29]="VPAIDAdVolumeChange",t[t.VPAIDAdVideoStart=30]="VPAIDAdVideoStart",t[t.VPAIDAdVideoFirstQuartile=31]="VPAIDAdVideoFirstQuartile",t[t.VPAIDAdVideoMidPoint=32]="VPAIDAdVideoMidPoint",t[t.VPAIDAdVideoThirdQuartile=33]="VPAIDAdVideoThirdQuartile",t[t.VPAIDAdVideoComplete=34]="VPAIDAdVideoComplete",t[t.VPAIDAdUserAcceptInvitation=35]="VPAIDAdUserAcceptInvitation",t[t.VPAIDAdUserClose=36]="VPAIDAdUserClose",t[t.VPAIDAdUserMinimize=37]="VPAIDAdUserMinimize",t[t.VPAIDAdClickThru=38]="VPAIDAdClickThru",t[t.VPAIDAdInteraction=39]="VPAIDAdInteraction",t[t.VPAIDAdError=40]="VPAIDAdError",t[t.VPAIDAdLog=41]="VPAIDAdLog",t[t.VPAIDAdDurationChange=42]="VPAIDAdDurationChange",t[t.VPAIDAdRemainingTimeChange=43]="VPAIDAdRemainingTimeChange",t[t.VPAIDAdImpression=44]="VPAIDAdImpression",t[t.MVException=45]="MVException",t[t.MVInventory=46]="MVInventory",t[t.MVImpressionWebmaster=47]="MVImpressionWebmaster",t[t.MVSendAdvertToPlayer=48]="MVSendAdvertToPlayer",t[t.MVAdvertiserRequest=49]="MVAdvertiserRequest",t[t.MVAdvertiserRequestReceived=50]="MVAdvertiserRequestReceived",t[t.MVAdvertiserRequestError=51]="MVAdvertiserRequestError",t[t.MVMRCVisibility=52]="MVMRCVisibility",t[t.MVSendStoriesRollToPlayer=53]="MVSendStoriesRollToPlayer",t[t.MVSendInstreamRollToPlayer=54]="MVSendInstreamRollToPlayer",t[t.MVSendRTBPixelToPlayer=55]="MVSendRTBPixelToPlayer",t[t.MVAdvertORD=56]="MVAdvertORD",t[t.MVSendInventoryBannedByDomain=57]="MVSendInventoryBannedByDomain",t[t.MVSendInventoryBannedByPlacement=58]="MVSendInventoryBannedByPlacement",t[t.MVSendInventoryBannedByWebmaster=59]="MVSendInventoryBannedByWebmaster",t[t.MVGetMediaForInstreamRoll=60]="MVGetMediaForInstreamRoll",t[t.MVGetMediaForStoriesRoll=61]="MVGetMediaForStoriesRoll"}(n=t.PlayerBackendCommunicationEvent||(t.PlayerBackendCommunicationEvent={}));var i=((e={})[n.VPAIDStartAd]="VPAIDStartAd",e[n.VPAIDStopAd]="VPAIDStopAd",e[n.VPAIDResizeAd]="VPAIDResizeAd",e[n.VPAIDPauseAd]="VPAIDPauseAd",e[n.VPAIDResumeAd]="VPAIDResumeAd",e[n.VPAIDExpandAd]="VPAIDExpandAd",e[n.VPAIDCollapseAd]="VPAIDCollapseAd",e[n.VPAIDSkipAd]="VPAIDSkipAd",e[n.VPAIDGetAdLinear]="VPAIDGetAdLinear",e[n.VPAIDGetAdWidth]="VPAIDGetAdWidth",e[n.VPAIDGetAdHeight]="VPAIDGetAdHeight",e[n.VPAIDGetAdExpanded]="VPAIDGetAdExpanded",e[n.VPAIDGetAdSkippableState]="VPAIDGetAdSkippableState",e[n.VPAIDGetAdRemainingTime]="VPAIDGetAdRemainingTime",e[n.VPAIDGetAdDuration]="VPAIDGetAdDuration",e[n.VPAIDGetAdCompanions]="VPAIDGetAdCompanions",e[n.VPAIDSetAdVolume]="VPAIDSetAdVolume",e[n.VPAIDGetAdVolume]="VPAIDGetAdVolume",e[n.VPAIDGetAdIcons]="VPAIDGetAdIcons",e[n.VPAIDAdLoaded]="VPAIDAdLoaded",e[n.VPAIDAdStarted]="VPAIDAdStarted",e[n.VPAIDAdStopped]="VPAIDAdStopped",e[n.VPAIDAdSkipped]="VPAIDAdSkipped",e[n.VPAIDAdPaused]="VPAIDAdPaused",e[n.VPAIDAdSizeChange]="VPAIDAdSizeChange",e[n.VPAIDAdPlaying]="VPAIDAdPlaying",e[n.VPAIDAdExpandedChange]="VPAIDAdExpandedChange",e[n.VPAIDAdSkippableStateChange]="VPAIDAdSkippableStateChange",e[n.VPAIDAdLinearChange]="VPAIDAdLinearChange",e[n.VPAIDAdVolumeChange]="VPAIDAdVolumeChange",e[n.VPAIDAdVideoStart]="VPAIDAdVideoStart",e[n.VPAIDAdVideoFirstQuartile]="VPAIDAdVideoFirstQuartile",e[n.VPAIDAdVideoMidPoint]="VPAIDAdVideoMidPoint",e[n.VPAIDAdVideoThirdQuartile]="VPAIDAdVideoThirdQuartile",e[n.VPAIDAdVideoComplete]="VPAIDAdVideoComplete",e[n.VPAIDAdUserAcceptInvitation]="VPAIDAdUserAcceptInvitation",e[n.VPAIDAdUserClose]="VPAIDAdUserClose",e[n.VPAIDAdUserMinimize]="VPAIDAdUserMinimize",e[n.VPAIDAdClickThru]="VPAIDAdClickThru",e[n.VPAIDAdInteraction]="VPAIDAdInteraction",e[n.VPAIDAdError]="VPAIDAdError",e[n.VPAIDAdLog]="VPAIDAdLog",e[n.VPAIDAdDurationChange]="VPAIDAdDurationChange",e[n.VPAIDAdRemainingTimeChange]="VPAIDAdRemainingTimeChange",e[n.VPAIDAdImpression]="VPAIDAdImpression",e[n.MVException]="MVException",e[n.MVInventory]="MVInventory",e[n.MVImpressionWebmaster]="MVImpressionWebmaster",e[n.MVSendAdvertToPlayer]="MVSendAdvertToPlayer",e[n.MVAdvertiserRequest]="MVAdvertiserRequest",e[n.MVMRCVisibility]="MVMRCVisibility",e[n.MVSendStoriesRollToPlayer]="MVSendStoriesRollToPlayer",e[n.MVSendInstreamRollToPlayer]="MVSendInstreamRollToPlayer",e[n.MVSendRTBPixelToPlayer]="MVSendRTBPixelToPlayer",e[n.MVAdvertORD]="MVAdvertORD",e);t.PBCEventName=function(t){return i[t]},t.GetInstance=function(){if(c.Instance().SetCurrentWorker(C.GetPlayerWorker()),void 0===c.Instance().GetBackend()){var t={v:c.Instance().GetVersion(),p:c.Instance().GetPlacement(),i:c.Instance().GetInstrument(),s:c.Instance().GetSlot(),r:btoa(C.GetReferer())},e=C.GetTargetAdverts();null!==e&&(t._=e),c.Instance().SetBackend(new r(C.BackendURI(),t))}return c.Instance().GetBackend()};var r=function(){function t(e,i,o){var r;void 0===i&&(i={});var a=this;this.enabled=!0,this.isOpen=new Promise((function(t,e){a.isOpenResolve=t,a.isOpenReject=e})),this.backendNotImplementedEventsList=((r={})[n.VPAIDAdLoaded]=!0,r[n.VPAIDResizeAd]=!0,r[n.VPAIDStartAd]=!0,r[n.VPAIDAdSizeChange]=!0,r[n.VPAIDAdStarted]=!0,r[n.VPAIDAdStopped]=!0,r[n.VPAIDExpandAd]=!0,r[n.VPAIDCollapseAd]=!0,r[n.VPAIDPauseAd]=!0,r[n.VPAIDResumeAd]=!0,r),this.SendMVInventory=Lt((function(t){var e=[];e.push(t.ref),e.push(t.placement),e.push(t.instrument),e.push(t.slot),e.push(t.size),!1===isNaN(t.target)&&e.push(t.target),a.send(n.MVInventory,e)}),250,{leading:!0,trailing:!1}),this.GetMediaForInstreamroll=Lt((function(t,e,i){var o=[];o.push(t),o.push(e),o.push(i),a.send(n.MVGetMediaForInstreamRoll,o)}),250,{leading:!0,trailing:!1}),void 0!==o&&(this.enabled=!!o),!1!==this.enabled&&(this.uri=t.uri(e,i),this.socket=Bt.Socket(this,this.uri))}return t.prototype.CloseConnection=function(){var t;null===(t=this.socket)||void 0===t||t.close()},t.prototype.onOpen=function(){this.isOpenResolve(),o.info("event Open")},t.prototype.onClose=function(){o.info("event Close")},t.prototype.onError=function(t){this.isOpenReject(),o.info("event Error:",t)},t.prototype.onMessage=function(t){var e=t.data.charCodeAt(0),i=t.data.substring(1);try{switch(i=JSON.parse(i),e){case n.MVSendAdvertToPlayer:this.ReceiveMVSendAdvertToPlayer(i);break;case n.MVSendInstreamRollToPlayer:try{var r=decodeURIComponent(escape(atob(i[0]))),a=JSON.parse(r);void 0===a.icon&&(a.icon=""),c.Instance().SetInstreamRollMediaTagContent(a),Ot("InstreamRollMediaReady")}catch(t){o.info("error Adverts:",t.message)}break;case n.MVSendRTBPixelToPlayer:try{i=JSON.parse(i)}catch(t){o.info("error Adverts:",t.message)}this.ReceiveMVSendRTBPixelToPlayer(i);break;case n.MVSendInventoryBannedByDomain:case n.MVSendInventoryBannedByPlacement:case n.MVSendInventoryBannedByWebmaster:this.ReceiveMVSendInventoryBanned(i,e);break;default:o.info('receive event from backend: "'.concat(t.data,'"'))}}catch(t){o.info("error Adverts:",t.message)}},t.prototype.isEventExpectedOnBackend=function(t){return!this.backendNotImplementedEventsList[t]},t.prototype.send=function(t,e){var r=this,a=i[t],s=String.fromCharCode(t);if(e)try{s+=JSON.stringify(e)}catch(e){o.backend('send event "'.concat(a,'"(').concat(t,") to backend exception:").concat(e.message))}t!==n.MVAdvertiserRequest?!1!==this.enabled?this.isOpen.then((function(){return Ft(r,void 0,void 0,(function(){return _t(this,(function(e){switch(e.label){case 0:return this.isEventExpectedOnBackend(t)?[4,this._send(t,a,s)]:[3,2];case 1:return e.sent(),[3,3];case 2:o.backend('event "'.concat(a,'"(').concat(t,') not implemented / expected on backend "').concat(s,' event is suspended"')),e.label=3;case 3:return[2]}}))}))})).catch((function(e){o.backend('send event "'.concat(a,'"(').concat(t,") to backend promise exception:").concat(e.message))})):o.backend('cannot send event "'.concat(a,'"(').concat(t,') to backend "').concat(s,'", communication is off')):o.backend('event "'.concat(a,'"(').concat(t,') "').concat(s,'" event is suspended'))},t.prototype._send=function(t,e,n){return Ft(this,void 0,void 0,(function(){return _t(this,(function(i){switch(i.label){case 0:return this.socket.readyState!==this.socket.CLOSED&&this.socket.readyState!==this.socket.CLOSING?[3,2]:(this.socket=Bt.Socket(this,this.uri),[4,C.sleep(250)]);case 1:case 3:return i.sent(),[3,6];case 2:return this.socket.readyState!==this.socket.CONNECTING?[3,4]:[4,C.sleep(100)];case 4:return this.socket.send(n),o.backend('send event "'.concat(e,'"(').concat(t,') to backend "').concat(n,'"')),[4,C.sleep(50)];case 5:return i.sent(),[2];case 6:return[3,0];case 7:return[2]}}))}))},t.prototype.SendStartAd=function(e,i){this.send(n.VPAIDStartAd,t.args(e,i))},t.prototype.SendStopAd=function(e,i){this.send(n.VPAIDStopAd,t.args(e,i))},t.prototype.SendResizeAd=function(e,i){this.send(n.VPAIDResizeAd,t.args(e,i))},t.prototype.SendPauseAd=function(e,i){this.send(n.VPAIDPauseAd,t.args(e,i))},t.prototype.SendResumeAd=function(e,i){this.send(n.VPAIDResumeAd,t.args(e,i))},t.prototype.SendExpandAd=function(e,i){this.send(n.VPAIDExpandAd,t.args(e,i))},t.prototype.SendCollapseAd=function(e,i){this.send(n.VPAIDCollapseAd,t.args(e,i))},t.prototype.SendSkipAd=function(e,i){this.send(n.VPAIDSkipAd,t.args(e,i))},t.prototype.SendGetAdLinear=function(e,i){this.send(n.VPAIDGetAdLinear,t.args(e,i))},t.prototype.SendGetAdWidth=function(e,i){this.send(n.VPAIDGetAdWidth,t.args(e,i))},t.prototype.SendGetAdHeight=function(e,i){this.send(n.VPAIDGetAdHeight,t.args(e,i))},t.prototype.SendGetAdExpanded=function(e,i){this.send(n.VPAIDGetAdExpanded,t.args(e,i))},t.prototype.SendGetAdSkippableState=function(e,i){this.send(n.VPAIDGetAdSkippableState,t.args(e,i))},t.prototype.SendGetAdRemainingTime=function(e,i){this.send(n.VPAIDGetAdRemainingTime,t.args(e,i))},t.prototype.SendGetAdDuration=function(e,i){this.send(n.VPAIDGetAdDuration,t.args(e,i))},t.prototype.SendGetAdCompanions=function(e,i){this.send(n.VPAIDGetAdCompanions,t.args(e,i))},t.prototype.SendSetAdVolume=function(t,e,i){if(e>0){var o=[t,e];i&&o.push(i),this.send(n.VPAIDSetAdVolume,o)}},t.prototype.SendGetAdVolume=function(e,i){this.send(n.VPAIDGetAdVolume,t.args(e,i))},t.prototype.SendGetAdIcons=function(e,i){this.send(n.VPAIDGetAdIcons,t.args(e,i))},t.prototype.SendAdLoaded=function(e,i){this.send(n.VPAIDAdLoaded,t.args(e,i))},t.prototype.SendAdStarted=function(e,i){this.send(n.VPAIDAdStarted,t.args(e,i))},t.prototype.SendAdStopped=function(e,i){this.send(n.VPAIDAdStopped,t.args(e,i))},t.prototype.SendAdSkipped=function(e,i){this.send(n.VPAIDAdSkipped,t.args(e,i))},t.prototype.SendAdPaused=function(e,i){this.send(n.VPAIDAdPaused,t.args(e,i))},t.prototype.SendAdSizeChange=function(e,i){this.send(n.VPAIDAdSizeChange,t.args(e,i))},t.prototype.SendAdPlaying=function(e,i){this.send(n.VPAIDAdPlaying,t.args(e,i))},t.prototype.SendAdExpandedChange=function(e,i){this.send(n.VPAIDAdExpandedChange,t.args(e,i))},t.prototype.SendAdSkippableStateChange=function(e,i){this.send(n.VPAIDAdSkippableStateChange,t.args(e,i))},t.prototype.SendAdLinearChange=function(e,i){this.send(n.VPAIDAdLinearChange,t.args(e,i))},t.prototype.SendAdVolumeChange=function(t,e,i){if(e){var o=[t,e];i&&o.push(i),this.send(n.VPAIDAdVolumeChange,o)}},t.prototype.SendAdVideoStart=function(e,i){this.send(n.VPAIDAdVideoStart,t.args(e,i))},t.prototype.SendAdVideoFirstQuartile=function(e,i){this.send(n.VPAIDAdVideoFirstQuartile,t.args(e,i))},t.prototype.SendAdVideoMidPoint=function(e,i){this.send(n.VPAIDAdVideoMidPoint,t.args(e,i))},t.prototype.SendAdVideoThirdQuartile=function(e,i){this.send(n.VPAIDAdVideoThirdQuartile,t.args(e,i))},t.prototype.SendAdVideoComplete=function(e,i){this.send(n.VPAIDAdVideoComplete,t.args(e,i))},t.prototype.SendAdUserAcceptInvitation=function(e,i){this.send(n.VPAIDAdUserAcceptInvitation,t.args(e,i))},t.prototype.SendAdUserClose=function(e,i){this.send(n.VPAIDAdUserClose,t.args(e,i))},t.prototype.SendAdUserMinimize=function(e,i){this.send(n.VPAIDAdUserMinimize,t.args(e,i))},t.prototype.SendAdClickThru=function(e,i){this.send(n.VPAIDAdClickThru,t.args(e,i))},t.prototype.SendAdInteraction=function(e,i){this.send(n.VPAIDAdInteraction,t.args(e,i))},t.prototype.SendAdError=function(e,i){this.send(n.VPAIDAdError,t.args(e,i))},t.prototype.SendAdLog=function(e,i){this.send(n.VPAIDAdLog,t.args(e,i))},t.prototype.SendAdDurationChange=function(e,i){this.send(n.VPAIDAdDurationChange,t.args(e,i))},t.prototype.SendAdRemainingTimeChange=function(e,i){this.send(n.VPAIDAdRemainingTimeChange,t.args(e,i))},t.prototype.SendAdImpression=function(e,i,o,r){this.send(n.VPAIDAdImpression,t.args(e,i,o,r))},t.prototype.SendMVException=function(t,e){this.send(n.MVException,[t,e])},t.prototype.SendAdORD=function(t,e,i,o,r){this.send(n.MVAdvertORD,[t,e,i,o,r])},t.prototype.SendMVImpressionWebmaster=function(e,i,o,r){this.send(n.MVImpressionWebmaster,t.args(e,i,o,r))},t.prototype.SendMVMRCVisibility=function(e,i){this.send(n.MVMRCVisibility,t.args(e,i))},t.prototype.ReceiveMVSendAdvertToPlayer=function(t){var e=n.MVSendAdvertToPlayer;i[e];if(c.Instance().SetUserUid(t[1]),c.Instance().SetSiteID(t[2]),void 0!==t[0]){var o=atob(t[0]);"no-banner"!==o&&rt.Parse(o)}},t.prototype.ReceiveMVSendRTBPixelToPlayer=function(t){p.CallRTBPixel(t)},t.prototype.ReceiveMVSendInventoryBanned=function(t,e){switch(e){case n.MVSendInventoryBannedByDomain:var i=t[0];c.Instance().SetBannedByDomain(i),o.backend("domain ".concat(i," is banned"));break;case n.MVSendInventoryBannedByPlacement:var r=t[0];c.Instance().SetBannedByPlacement(r),o.backend("placement ".concat(r," is banned"));break;case n.MVSendInventoryBannedByWebmaster:var a=t[0];c.Instance().SetBannedByWebmaster(a),o.backend("webmaster ".concat(t[0]," is banned"))}},t.prototype.SendMVAdvertiserRequest=function(t){this.send(n.MVAdvertiserRequest,[t])},t.args=function(t,e,n,i){return e&&n&&i?[t,e,n,i]:e&&n?[t,e,n]:[t]},t.uri=function(t,e){if(void 0===e&&(e={}),Object.keys(e).length<=0)return t;for(var n in-1==t.indexOf("?")&&(t+="?"),t.length-1>t.indexOf("?")&&(t+="&"),e)t+="".concat(n,"=").concat(e[n],"&");return t.substring(0,t.length-1)},t}();t.Backend=r}(Ut||(Ut={}));var Qt=1/0;const Wt=function(t){return t?(t=Mt(t))===Qt||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0};const zt=function(t){var e=Wt(t),n=e%1;return e==e?n?e-n:e:0};const qt=function(t,e){var n;if("function"!=typeof e)throw new TypeError("Expected a function");return t=zt(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=void 0),n}};const jt=function(t){return qt(2,t)};var Ht;!function(t){var n=function(){function t(){var t=this;this.advertStorage={},this.vpaidStorage={},this.VPAIDQueue=new r,this.requestAdvert=0,this.OnceAdLoaded=jt((function(){return t.toMiddle.QueueAdLoaded()})),this.isStartAdCalled=!1,this.duration_event="duration",this.breakpoint_min=3,this.advertStorage=[],this.play(),this.inventory()}return t.prototype.inventory=function(){var t=this;this.inventoryLoop=setInterval((function(){if(c.Instance().IsTrafficBanned())return o.backend("[QUEUE] EXIT: banned"),void clearInterval(t.inventoryLoop);if(!1===t.VPAIDQueue.IsHasAttemptsToCallBackend())return o.backend("[QUEUE] EXIT: get more adverts from BACKEND no more atttempts"),void clearInterval(t.inventoryLoop);if(o.backend("[QUEUE] check count ready to play > 0:",t.VPAIDQueue.CountReadyToPlay()>0),!(t.VPAIDQueue.CountReadyToPlay()>0)&&t.VPAIDQueue.IsNeedMoreVPAIDs()){var e={ref:C.GetReferer(),placement:c.Instance().GetPlacement(),instrument:c.Instance().GetInstrument(),slot:c.Instance().GetSlot(),size:C.Size(c.Instance().GetWidth(),c.Instance().GetHeight()),target:c.Instance().GetTargetAdvert()};Ut.GetInstance().SendMVInventory(e),t.VPAIDQueue.MarkBackendCallAttemp(),0===c.Instance().GetAdvertCount()?o.backend("[QUEUE] get more adverts from BACKEND attempts count: infinite"):o.backend("[QUEUE] get more adverts from BACKEND attempts count: "+t.VPAIDQueue.GetBackendCallAttempCount()+" advert count: "+c.Instance().GetAdvertCount())}}),1e3)},t.prototype.play=function(){var t=this;this.playLoop=setInterval((function(){var e,n;return t.VPAIDQueue.IsEmpty()?(o.backend("[QUEUE] call adEmpty calback",t.VPAIDQueue),Ut.GetInstance().CloseConnection(),t.clearLoop(),void(null===(e=t.toMiddle)||void 0===e||e.QueueAdErrorEmpty())):t.VPAIDQueue.IsError()?(o.backend("[QUEUE] call adError callback",t.VPAIDQueue),Ut.GetInstance().CloseConnection(),t.clearLoop(),void(null===(n=t.toMiddle)||void 0===n||n.QueueAdError())):t.VPAIDQueue.IsFinished()?(o.backend("[QUEUE] call adFinished callback",t.VPAIDQueue),Ut.GetInstance().CloseConnection(),t.clearLoop(),void t.AdStoppedSyncByTracks()):(t.VPAIDQueue.IsCanPlay()&&(o.backend("[QUEUE] DTATA",t.VPAIDQueue),o.backend("[QUEUE] STATE AdvertCount: "+c.Instance().GetAdvertCount(),"AdLoaded: "+t.VPAIDQueue.CountAdLoaded(),"AdError: "+t.VPAIDQueue.CountAdError(),"AdStopped: "+t.VPAIDQueue.CountAdStopped()),t.OnceAdLoaded(),t.playVPAID()),void t.ResumePauseByVisibilityState())}),250)},t.prototype.clearLoop=function(){clearInterval(this.playLoop),clearInterval(this.inventoryLoop)},t.prototype.playVPAID=function(){if(!1!==this.isStartAdCalled){this.VPAIDQueue.HoldVPAIDToPlay();var t=this.GetParentAdvert(this.VPAIDQueue.GetCurrentVPAID());t.BackendSend(u.AdLoaded),o.backend("[QUEUE] move vpaid to playing state "+this.VPAIDQueue.GetCurrentVPAID()+" "+t.GetIDForBackend());var e=this.vpaidStorage[this.VPAIDQueue.GetCurrentVPAID()];this.initialVolumeBehaviour(e),e.startAd(),t.BackendSend(h.startAd)}},t.prototype.SetMiddle=function(t){this.toMiddle=t},t.prototype.Append=function(t){this.advertStorage[t.ID()]=t,t.Type()===Kt.InLine&&(this.vpaidStorage[t.ID()]=this.InitVPAID(t));for(var e=Object.keys(this.advertStorage),n=0;n<e.length;n++)this.advertStorage[e[n]].ID()===t.ParentID()&&this.advertStorage[e[n]].SetChild(t.ID())},t.prototype.SetCurrentSlotHTMLElement=function(t,e){this.slot=t,this.video=e},t.prototype.SetCurrentSlotVideoParams=function(t){this.width=null==t?void 0:t.width,this.height=null==t?void 0:t.height,this.viewMode=null==t?void 0:t.view,this.desiredBitrate=null==t?void 0:t.bitrate},t.prototype.DisableSlotPointerEvents=function(){this.slot.style.pointerEvents="none"},t.prototype.EnableSlotPointerEvents=function(){this.slot.style.pointerEvents="auto"},t.prototype.SetVisibilityState=function(t){this.IsVisible=t},t.prototype.ResumePauseByVisibilityState=function(){!0===this.IsVisible&&this.VisiblityCallbackLastCall!=this.resumeAd?(this.VisiblityCallbackLastCall=this.resumeAd,this.resumeAd(),o.backend("[VISIBILITY] is on call resumeAd")):!1===this.IsVisible&&this.VisiblityCallbackLastCall!=this.pauseAd&&(this.VisiblityCallbackLastCall=this.pauseAd,this.pauseAd(),o.backend("[VISIBILITY] is off call pauseAd"))},t.prototype.InitVPAID=function(t){return new D(this,t,{slot:this.slot,video:this.video},{width:c.Instance().GetWidth(),height:c.Instance().GetHeight(),viewMode:c.Instance().GetViewMode(),bitrate:c.Instance().GetDesiredBitrate()})},t.prototype.GetCurrentPlayingVPAID=function(){if(this.VPAIDQueue.GetCurrentVPAID())return this.vpaidStorage[this.VPAIDQueue.GetCurrentVPAID()]},t.prototype.GetAdvert=function(t){return this.advertStorage[t]},t.prototype.GetAdvertByParrentID=function(t){for(var e in this.advertStorage)if(this.advertStorage[e].ID()===t)return this.advertStorage[e]},t.prototype.GetParentAdvert=function(t){var e=this.GetAdvert(t);return e.ParentID()?this.GetParentAdvert(e.ParentID()):e},t.prototype.getAdLinear=function(){var t=this.GetCurrentPlayingVPAID();if(void 0!==t)return t.getAdLinear()},t.prototype.getAdWidth=function(){var t=this.GetCurrentPlayingVPAID();if(void 0!==t)return t.getAdWidth()},t.prototype.getAdHeight=function(){var t=this.GetCurrentPlayingVPAID();if(void 0!==t)return t.getAdHeight()},t.prototype.getAdExpanded=function(){var t=this.GetCurrentPlayingVPAID();if(void 0!==t)return t.getAdExpanded()},t.prototype.getAdSkippableState=function(){var t=this.GetCurrentPlayingVPAID();if(void 0!==t)return t.getAdSkippableState()},t.prototype.getAdRemainingTime=function(){var t=this.GetCurrentPlayingVPAID();return void 0!==t?t.getAdRemainingTime():0},t.prototype.getAdDuration=function(){var t=this.GetCurrentPlayingVPAID();if(void 0!==t)return t.getAdDuration()},t.prototype.getAdCompanions=function(){var t=this.GetCurrentPlayingVPAID();if(void 0!==t)return t.getAdCompanions()},t.prototype.setAdVolume=function(t){var e=this.GetCurrentPlayingVPAID();if(void 0!==e){e.setAdVolume(t);var n=this.GetParentAdvert(e.GetAdvertID());t>0?n.CallTrackingEventsUnmute():n.CallTrackingEventsMute()}},t.prototype.getAdVolume=function(){var t=this.GetCurrentPlayingVPAID();return void 0!==t?t.getAdVolume():0},t.prototype.getAdIcons=function(){var t=this.GetCurrentPlayingVPAID();if(void 0!==t)return t.getAdIcons()},t.prototype.startAd=function(){this.isStartAdCalled=!0},t.prototype.stopAd=function(){var t=this.GetCurrentPlayingVPAID();void 0!==t&&(t.stopAd(),this.GetParentAdvert(t.GetAdvertID()).BackendSend(h.stopAd))},t.prototype.resizeAd=function(t,e,n){var i=this.GetCurrentPlayingVPAID();void 0!==i&&(i.resizeAd(t,e,n),this.GetParentAdvert(i.GetAdvertID()).BackendSend(h.resizeAd))},t.prototype.pauseAd=function(){var t=this,e=setInterval((function(){var n=t.GetCurrentPlayingVPAID();if(void 0!==n){n.pauseAd();var i=t.GetParentAdvert(n.GetAdvertID());i.BackendSend(h.pauseAd),i.CallTrackingEventsPause(),clearInterval(e)}}),10)},t.prototype.resumeAd=function(){var t=this,e=setInterval((function(){var n=t.GetCurrentPlayingVPAID();if(void 0!==n){n.resumeAd();var i=t.GetParentAdvert(n.GetAdvertID());i.BackendSend(h.resumeAd),i.CallTrackingEventsResume(),clearInterval(e)}}),10)},t.prototype.expandAd=function(){var t=this.GetCurrentPlayingVPAID();if(void 0!==t){t.expandAd();var e=this.GetParentAdvert(t.GetAdvertID());e.BackendSend(h.expandAd),e.CallTrackingEventsExpand(),e.CallTrackingEventsFullscreen()}},t.prototype.collapseAd=function(){var t=this.GetCurrentPlayingVPAID();if(void 0!==t){t.collapseAd();var e=this.GetParentAdvert(t.GetAdvertID());e.BackendSend(h.collapseAd),e.CallTrackingEventsCollapse(),e.CallTrackingEventsExitFullscreen()}},t.prototype.skipAd=function(){var t=this.GetCurrentPlayingVPAID();if(void 0!==t){t.skipAd();var e=this.GetParentAdvert(t.GetAdvertID());e.BackendSend(h.skipAd),e.CallTrackingEventsSkip(),this.stopAd()}},t.prototype.AdImpression=function(t){var e=this.GetParentAdvert(t);e.BackendSend(u.AdImpression),e.CallTrackingImpression(),this.handleImpressionWebmaster(u.AdImpression,e),this.handleDurationImpressionWebmaster(e)},t.prototype.AdLoaded=function(t){var e=this.GetParentAdvert(t);this.VPAIDQueue.AdLoaded(t,e.GetIDForBackend())},t.prototype.AdStarted=function(t){var e=this.GetParentAdvert(t);e.BackendSend(u.AdStarted),e.CallTrackingEventsCreativeView(),this.toMiddle.QueueAdStarted()},t.prototype.AdRemainingTimeChange=function(t){this.toMiddle.QueueAdRemainingTimeChange()},t.prototype.AdDurationChange=function(t){this.toMiddle.QueueAdDurationChange()},t.prototype.AdLog=function(t){this.GetParentAdvert(t).BackendSend(u.AdLog),this.toMiddle.QueueAdLog()},t.prototype.AdTime=function(t){},t.prototype.AdError=function(t){var e=this.GetParentAdvert(t);this.VPAIDQueue.AdError(t,e.GetIDForBackend()),e.BackendSend(u.AdError),e.CallTrackingError(),this.VisiblityCallbackLastCall=void 0},t.prototype.AdInteraction=function(t){this.GetParentAdvert(t).BackendSend(u.AdInteraction),this.toMiddle.QueueAdInteraction()},t.prototype.AdClickThru=function(t,e,n){var i=this.GetParentAdvert(t);!1!==i.CanPassThruClick()&&(i.BackendSend(u.AdClickThru),i.CallVideoClicksClickTracking(),n&&i.CallVideoClicksClickTrough(),this.toMiddle.QueueAdClickThru(e,n),this.handleImpressionWebmaster(u.AdClickThru,i),n&&"string"==typeof e&&e.length>0&&window.open(e))},t.prototype.AdUserMinimize=function(t){this.GetParentAdvert(t).BackendSend(u.AdUserMinimize),this.toMiddle.QueueAdUserMinimize()},t.prototype.AdUserClose=function(t){var e=this.GetParentAdvert(t);e.BackendSend(u.AdUserClose),e.CallTrackingEventsCloseLinear(),this.AdUserCloseSyncByTracks(),this.VisiblityCallbackLastCall=void 0},t.prototype.AdUserAcceptInvitation=function(t){var e=this.GetParentAdvert(t);e.BackendSend(u.AdUserAcceptInvitation),e.CallTrackingEventsAcceptInvitationLinear(),this.toMiddle.QueueAdUserAcceptInvitation()},t.prototype.AdVideoFirstQuartile=function(t){var e=this.GetParentAdvert(t);e.BackendSend(u.AdVideoFirstQuartile),e.CallTrackingEventsFirstQuartile(),this.toMiddle.QueueAdVideoFirstQuartile(),this.handleImpressionWebmaster(u.AdVideoFirstQuartile,e)},t.prototype.AdVideoMidpoint=function(t){var e=this.GetParentAdvert(t);e.BackendSend(u.AdVideoMidpoint),e.CallTrackingEventsMidpoint(),this.toMiddle.QueueAdVideoMidPoint(),this.handleImpressionWebmaster(u.AdVideoMidpoint,e)},t.prototype.AdVideoThirdQuartile=function(t){var e=this.GetParentAdvert(t);e.BackendSend(u.AdVideoThirdQuartile),e.CallTrackingEventsThirdQuartile(),this.toMiddle.QueueAdVideoThirdQuartile(),this.handleImpressionWebmaster(u.AdVideoThirdQuartile,e)},t.prototype.AdVideoComplete=function(t){var e=this.GetParentAdvert(t);e.BackendSend(u.AdVideoComplete),e.CallTrackingEventsComplete(),this.handleImpressionWebmaster(u.AdVideoComplete,e),this.AdVideoCompleteSyncByTracks()},t.prototype.AdVideoStart=function(t){var e=this.vpaidStorage[t];this.renderControls(e.slot.slot,this.advertStorage[t]);var n=this.GetParentAdvert(t);n.BackendSend(u.AdVideoStart),n.CallTrackingEventsStart(),this.handleMRCVisibility(n),this.handleImpressionWebmaster(u.AdVideoStart,n),this.handleClickDelay(n),this.toMiddle.QueueAdVideoStart()},t.prototype.AdVolumeChange=function(t){this.GetParentAdvert(t).BackendSend(u.AdVolumeChange,[this.getAdVolume()]),this.toMiddle.QueueAdVolumeChange()},t.prototype.AdLinearChange=function(t){this.GetParentAdvert(t).BackendSend(u.AdLinearChange),this.toMiddle.QueueAdLinearChange()},t.prototype.AdSkippableStateChange=function(t){this.GetParentAdvert(t).BackendSend(u.AdSkippableStateChange),this.toMiddle.QueueAdSkippableStateChange()},t.prototype.AdExpandedChange=function(t){this.GetParentAdvert(t).BackendSend(u.AdExpandedChange),this.toMiddle.QueueAdExpandedChange()},t.prototype.AdPlaying=function(t){this.GetParentAdvert(t).BackendSend(u.AdPlaying),this.toMiddle.QueueAdPlaying()},t.prototype.AdPaused=function(t){this.GetParentAdvert(t).BackendSend(u.AdPaused),this.toMiddle.QueueAdPaused()},t.prototype.AdSizeChange=function(t){this.GetParentAdvert(t).BackendSend(u.AdSizeChange),this.toMiddle.QueueAdSizeChange()},t.prototype.AdSkipped=function(t){this.GetParentAdvert(t).BackendSend(u.AdSkipped),this.toMiddle.QueueAdSkipped()},t.prototype.AdStopped=function(t){var e=this.GetParentAdvert(t);this.VPAIDQueue.AdStopped(t,e.GetIDForBackend()),this.vpaidStorage[t].RemoveFrame(),this.GetParentAdvert(t).BackendSend(u.AdStopped),this.VisiblityCallbackLastCall=void 0},t.prototype.AdVideoCompleteSyncByTracks=function(){var t=this,e=setInterval((function(){c.Instance().IsTrackCallStackEmpty()&&(clearInterval(e),t.toMiddle.QueueAdVideoComplete())}),100)},t.prototype.AdStoppedSyncByTracks=function(){var t=this,e=setInterval((function(){var n;c.Instance().IsTrackCallStackEmpty()&&(clearInterval(e),null===(n=t.toMiddle)||void 0===n||n.QueueAdStopped())}),100)},t.prototype.AdUserCloseSyncByTracks=function(){var t=this,e=setInterval((function(){var n;c.Instance().IsTrackCallStackEmpty()&&(clearInterval(e),null===(n=t.toMiddle)||void 0===n||n.QueueAdUserClose())}),100)},t.prototype.isCanSendEvent=function(){return c.Instance().GetInstrument()===e.VastVPaid||Math.round(Math.floor(101*Math.random()))>6},t.prototype.handleImpressionWebmaster=function(t,e){t===e.GetOptions().payPlayerEvent&&!1!==this.isCanSendEvent()&&(e.BackendSend(Ut.PBCEventName(Ut.PlayerBackendCommunicationEvent.MVImpressionWebmaster)),this.sendORD(e),this.toMiddle.QueueAdImpression())},t.prototype.handleDurationImpressionWebmaster=function(t){var e=this,n=t.GetOptions().payPlayerEvent.split("_");if(n[0]===this.duration_event&&!1!==this.isCanSendEvent()){var i=this.getAdRemainingTime(),o=+n[1];o<this.breakpoint_min&&(o=this.breakpoint_min);var r=setInterval((function(){if(void 0===e.getAdRemainingTime)return clearInterval(r);if(!(i<=0)){var n=i-e.getAdRemainingTime();return isNaN(n)||n>i?clearInterval(r):n>=o?(t.BackendSend(Ut.PBCEventName(Ut.PlayerBackendCommunicationEvent.MVImpressionWebmaster)),e.sendORD(t),e.toMiddle.QueueAdImpression(),clearInterval(r)):void 0}i=e.getAdRemainingTime()}),170)}},t.prototype.handleClickDelay=function(t){var e=0,n=1e3*t.GetClickDelayDuration();if(!(n<=0))var i=setInterval((function(){(e+=100)>=n&&(t.AllowPassThruClick(),clearInterval(i))}),160)},t.prototype.sendORD=function(t){t.GetOrd()&&t.BackendSend(v.AdORD,[t.GetOrd()])},t.prototype.handleMRCVisibility=function(t){var e=this,n=this.getAdRemainingTime(),i=setInterval((function(){if(void 0===e.getAdRemainingTime)return clearInterval(i);if(!(n<=0)){var o=n-e.getAdRemainingTime();return isNaN(o)||o>n?clearInterval(i):o>=3?(t.BackendSend(Ut.PBCEventName(Ut.PlayerBackendCommunicationEvent.MVMRCVisibility)),clearInterval(i)):void 0}n=e.getAdRemainingTime()}),120)},t.prototype.initialVolumeBehaviour=function(t){var e=c.Instance().GetInitialVolumeLevel();this.GetParentAdvert(t.GetAdvertID()).IsNeedForeignFrame()&&(e=0),t.setAdVolume(e),o.info('vpaid (id:"'.concat(t.GetAdvertID(),'") initial set "').concat(f.setAdVolume,'" -> ').concat(e))},t.prototype.renderControls=function(t,e){if(!1!==e.IsCanRenderControls()){this.initControlsStyles(t);for(var n=0,i=this.generateControls(e);n<i.length;n++){var o=i[n];t.append(o)}this.initControlsBehaviour(t)}},t.prototype.initControlsStyles=function(t){t.appendChild(V.Init())},t.prototype.generateControls=function(t){var e=[];if(e.push(V.Advertisement()),t.IsNeedTimeline()){var n=this.getAdDuration.bind(this),i=this.getAdRemainingTime.bind(this);e.push(V.TimelineUI(n,i))}if(t.IsNeedFullscreen()){var o=this.getAdExpanded.bind(this),r=this.expandAd.bind(this),a=this.collapseAd.bind(this);e.push(V.FullscreenUI(o,r,a))}if(t.IsNeedVolumeUI()){var s=this.getAdVolume.bind(this),d=this.setAdVolume.bind(this);e.push(V.VolumeUI(s,d))}if(t.IsNeedPlaybackButtons()){var c=this.pauseAd.bind(this),p=this.resumeAd.bind(this);e.push(V.PlaybackUI(p,c))}var u=this.skipAd.bind(this),l=this.advertOffsetRecursive(t);return l>0&&e.push(V.SkipUI(l,u)),e},t.prototype.advertOffsetRecursive=function(t){var e=t.GetOptionsSkipOffset();return e>0?e:void 0===t.ParentID()?0:this.advertOffsetRecursive(this.advertStorage[t.ParentID()])},t.prototype.initControlsBehaviour=function(t){var e=t.querySelectorAll(V.SelectorFadeable());t.addEventListener("mouseover",(function(){e.forEach((function(t){return V.FadeIn(t)}))}))},t}();t.Queue=n;var i,r=function(){function t(){this.isEmpty=!1,this.emptyLoopLifetime=0,this.emptyLoopTimeout=6e3,this.BackendCallAttempts=1,this.store={},this.empty()}return t.prototype.empty=function(){var t=this,e=function(){clearInterval(t.emptyLoop),t.emptyLoop=void 0};this.emptyLoop=setInterval((function(){t.CountAdLoaded()>0?(o.backend("[QUEUE] adEmpty remove by condition AdLoaded > 0"),e()):t.CountAdError()>0?(o.backend("[QUEUE] adEmpty remove by condition AdError > 0"),e()):t.emptyLoopLifetime>=t.emptyLoopTimeout?(o.backend("[QUEUE] adEmpty call by condition lifetime "+t.emptyLoopTimeout+"ms"),e(),t.isEmpty=!0):t.emptyLoopLifetime+=110}),110)},t.prototype.IsInfiniteAdvertCount=function(){return 0===c.Instance().GetAdvertCount()},t.prototype.IsNeedMoreVPAIDs=function(){return o.backend("[QUEUE] is need more vpaids check is hash attempts to call backends:",this.IsHasAttemptsToCallBackend()),!!this.IsHasAttemptsToCallBackend()||(o.backend("[QUEUE] is need more vpaids check (is infinite advert count) AND (count ready to play <= 0):",this.IsInfiniteAdvertCount()&&this.CountReadyToPlay()<1),!!(this.IsInfiniteAdvertCount()&&this.CountReadyToPlay()<1)||(o.backend("[QUEUE] is need more vpaids check (count AdLoaded < advert count) AND (count played < advert count):",this.CountAdLoaded()<c.Instance().GetAdvertCount()&&this.CountPlayed()<c.Instance().GetAdvertCount()),this.CountAdLoaded()<c.Instance().GetAdvertCount()&&this.CountPlayed()<c.Instance().GetAdvertCount()||(o.backend("[QUEUE] is need more vpaids:",!1),!1)))},t.prototype.IsHasAttemptsToCallBackend=function(){return o.backend("[QUEUE] is has attempts to call backend is infinite advert count:",this.IsInfiniteAdvertCount()),!!this.IsInfiniteAdvertCount()||(o.backend("[QUEUE] is has attempts to call backend is backend call attempts < advert count:",this.BackendCallAttempts<c.Instance().GetAdvertCount()),this.BackendCallAttempts<c.Instance().GetAdvertCount()||(o.backend("[QUEUE] is has attempts to call backend:",!1),!1))},t.prototype.MarkBackendCallAttemp=function(){this.BackendCallAttempts<c.Instance().GetAdvertCount()&&(this.BackendCallAttempts++,o.backend("[QUEUE] increment backend call attempts counter to: "+this.BackendCallAttempts))},t.prototype.GetBackendCallAttempCount=function(){return this.BackendCallAttempts},t.prototype.GetCurrentVPAID=function(){for(var t in this.store)if(!0===this.store[t].InPlayState)return this.store[t].Id},t.prototype.IsCanPlay=function(){return 0!==this.CountAdLoaded()&&(!(!1===this.IsInfiniteAdvertCount()&&this.CountPlayed()>=c.Instance().GetAdvertCount())&&void 0===this.GetCurrentVPAID())},t.prototype.IsError=function(){return!this.IsInfiniteAdvertCount()&&(0==this.InPlayState()&&this.CountAdError()>=c.Instance().GetAdvertCount())},t.prototype.IsFinished=function(){return!this.IsInfiniteAdvertCount()&&(0==this.InPlayState()&&this.CountAdStopped()>=c.Instance().GetAdvertCount()||(0==this.InPlayState()&&this.CountAdStopped()+this.CountAdError()>=c.Instance().GetAdvertCount()||!1===this.IsHasAttemptsToCallBackend()&&0===this.CountReadyToPlay()&&void 0===this.emptyLoop))},t.prototype.IsEmpty=function(){return!this.IsInfiniteAdvertCount()&&this.isEmpty},t.prototype.HoldVPAIDToPlay=function(){var t=[];for(var e in this.store)this.store[e].AdStopped||this.store[e].AdError||!0===this.store[e].AdLoaded&&t.push(this.store[e]);for(e=0;e<t.length;e++)["12582","12174","12187","13423"].indexOf(t[e].IdAdvert)>-1&&(t[e].Position=-1);t.sort((function(t,e){return t.Position>e.Position?1:-1})),this.store[t[0].Id].InPlayState=!0},t.prototype.AdLoaded=function(t,e){void 0===this.store[t]&&(this.store[t]={Id:t,IdAdvert:e,Position:this.next(),InPlayState:!1,AdError:!1,AdLoaded:!1,AdStopped:!1}),this.store[t].AdLoaded=!0},t.prototype.AdError=function(t,e){void 0===this.store[t]&&(this.store[t]={Id:t,IdAdvert:e,Position:this.next(),InPlayState:!1,AdError:!1,AdLoaded:!1,AdStopped:!1}),this.store[t].InPlayState=!1,this.store[t].AdLoaded=!1,this.store[t].AdError=!0},t.prototype.AdStopped=function(t,e){void 0===this.store[t]&&(this.store[t]={Id:t,IdAdvert:e,Position:this.next(),InPlayState:!1,AdError:!1,AdLoaded:!1,AdStopped:!1}),this.store[t].InPlayState=!1,this.store[t].AdLoaded=!1,this.store[t].AdStopped=!0},t.prototype.CountAdLoaded=function(){var t,e=0;for(var n in this.store)(null===(t=this.store[n])||void 0===t?void 0:t.AdLoaded)&&e++;return e},t.prototype.CountAdError=function(){var t=0;for(var e in this.store)this.store[e].AdError&&t++;return t},t.prototype.CountAdStopped=function(){var t=0;for(var e in this.store)this.store[e].AdStopped&&t++;return t},t.prototype.CountReadyToPlay=function(){var t=0;for(var e in this.store){var n=this.store[e];!0===n.AdLoaded&&!1===n.AdError&&!1===n.AdStopped&&t++}return t},t.prototype.CountPlayed=function(){var t=0;for(var e in this.store){var n=this.store[e];(n.AdError||n.AdStopped)&&t++}return t},t.prototype.InPlayState=function(){for(var t in this.store)if(this.store[t].InPlayState)return!0;return!1},t.prototype.next=function(){var t=[];for(var e in this.store)t.push(this.store[e].Position);return t.sort((function(t,e){return t<e?1:-1})),0===t.length?0:t[0]+1},t}();t.SetInstance=function(t){i=t},t.GetInstance=function(){return i}}(Ht||(Ht={}));var Kt,Yt=function(t,e,n){if(n||2===arguments.length)for(var i,o=0,r=e.length;o<r;o++)!i&&o in e||(i||(i=Array.prototype.slice.call(e,0,o)),i[o]=e[o]);return t.concat(i||Array.prototype.slice.call(e))};!function(t){t.Wrapper="Wrapper",t.InLine="InLine"}(Kt||(Kt={}));var Xt,Jt=function(){function t(t,n,i){var o,r,a,s,d=this;this.PassThruClick=!0,this.dataBackend=((o={})[f.getAdLinear]=void 0,o[f.getAdWidth]=void 0,o[f.getAdHeight]=void 0,o[f.getAdExpanded]=void 0,o[f.getAdSkippableState]=Lt((function(t,e){d.backendAdvert.GetInstance().SendAdSkippableStateChange(t,e)}),250,{leading:!0,trailing:!1}),o[f.getAdRemainingTime]=void 0,o[f.getAdDuration]=void 0,o[f.getAdCompanions]=void 0,o[f.setAdVolume]=void 0,o[f.getAdVolume]=void 0,o[f.getAdIcons]=void 0,o[h.startAd]=Lt((function(t,e){d.backendAdvert.GetInstance().SendStartAd(t,e)}),250,{leading:!0,trailing:!1}),o[h.stopAd]=Lt((function(t,e){d.backendAdvert.GetInstance().SendStopAd(t,e)}),250,{leading:!0,trailing:!1}),o[h.resizeAd]=Lt((function(t,e){d.backendAdvert.GetInstance().SendResizeAd(t,e)}),250,{leading:!0,trailing:!1}),o[h.pauseAd]=Lt((function(t,e){d.backendAdvert.GetInstance().SendPauseAd(t,e)}),250,{leading:!0,trailing:!1}),o[h.resumeAd]=Lt((function(t,e){d.backendAdvert.GetInstance().SendResumeAd(t,e)}),250,{leading:!0,trailing:!1}),o[h.expandAd]=Lt((function(t,e){d.backendAdvert.GetInstance().SendExpandAd(t,e)}),250,{leading:!0,trailing:!1}),o[h.collapseAd]=Lt((function(t,e){d.backendAdvert.GetInstance().SendCollapseAd(t,e)}),250,{leading:!0,trailing:!1}),o[h.skipAd]=Lt((function(t,e){d.backendAdvert.GetInstance().SendSkipAd(t,e)}),250,{leading:!0,trailing:!1}),o[u.AdLog]=Lt((function(t,e){d.backendAdvert.GetInstance().SendAdLog(t,e)}),250,{leading:!0,trailing:!1}),o[u.AdTime]=void 0,o[u.AdError]=Lt((function(t,e){d.backendAdvert.GetInstance().SendAdError(t,e)}),250,{leading:!0,trailing:!1}),o[u.AdPaused]=Lt((function(t,e){d.backendAdvert.GetInstance().SendAdPaused(t,e)}),250,{leading:!0,trailing:!1}),o[u.AdLoaded]=Lt((function(t,e){d.backendAdvert.GetInstance().SendAdLoaded(t,e)}),250,{leading:!0,trailing:!1}),o[u.AdPlaying]=Lt((function(t,e){d.backendAdvert.GetInstance().SendAdPlaying(t,e)}),250,{leading:!0,trailing:!1}),o[u.AdStarted]=Lt((function(t,e){d.backendAdvert.GetInstance().SendAdStarted(t,e)}),250,{leading:!0,trailing:!1}),o[u.AdStopped]=Lt((function(t,e){d.backendAdvert.GetInstance().SendAdStopped(t,e)}),250,{leading:!0,trailing:!1}),o[u.AdSkipped]=Lt((function(t,e){d.backendAdvert.GetInstance().SendAdSkipped(t,e)}),250,{leading:!0,trailing:!1}),o[u.AdUserClose]=Lt((function(t,e){d.backendAdvert.GetInstance().SendAdUserClose(t,e)}),250,{leading:!0,trailing:!1}),o[u.AdClickThru]=Lt((function(t,e){d.backendAdvert.GetInstance().SendAdClickThru(t,e)}),250,{leading:!0,trailing:!1}),o[u.AdVideoStart]=Lt((function(t,e){d.backendAdvert.GetInstance().SendAdVideoStart(t,e)}),250,{leading:!0,trailing:!1}),o[u.AdImpression]=Lt((function(t,e,n,i){d.backendAdvert.GetInstance().SendAdImpression(t,e,n,i)}),250,{leading:!0,trailing:!1}),o[u.AdSizeChange]=Lt((function(t,e){d.backendAdvert.GetInstance().SendAdSizeChange(t,e)}),250,{leading:!0,trailing:!1}),o[u.AdInteraction]=Lt((function(t,e){d.backendAdvert.GetInstance().SendAdInteraction(t,e)}),250,{leading:!0,trailing:!1}),o[u.AdVolumeChange]=Lt((function(t,e,n){d.backendAdvert.GetInstance().SendAdVolumeChange(t,e,n)}),250,{leading:!0,trailing:!1}),o[u.AdUserMinimize]=Lt((function(t,e){d.backendAdvert.GetInstance().SendAdUserMinimize(t,e)}),250,{leading:!0,trailing:!1}),o[u.AdLinearChange]=Lt((function(t,e){d.backendAdvert.GetInstance().SendAdLinearChange(t,e)}),250,{leading:!0,trailing:!1}),o[u.AdVideoMidpoint]=Lt((function(t,e){d.backendAdvert.GetInstance().SendAdVideoMidPoint(t,e)}),250,{leading:!0,trailing:!1}),o[u.AdVideoComplete]=Lt((function(t,e){d.backendAdvert.GetInstance().SendAdVideoComplete(t,e)}),250,{leading:!0,trailing:!1}),o[u.AdDurationChange]=void 0,o[u.AdExpandedChange]=Lt((function(t,e){d.backendAdvert.GetInstance().SendAdExpandedChange(t,e)}),250,{leading:!0,trailing:!1}),o[u.AdVideoFirstQuartile]=Lt((function(t,e){d.backendAdvert.GetInstance().SendAdVideoFirstQuartile(t,e)}),250,{leading:!0,trailing:!1}),o[u.AdVideoThirdQuartile]=Lt((function(t,e){d.backendAdvert.GetInstance().SendAdVideoThirdQuartile(t,e)}),250,{leading:!0,trailing:!1}),o[u.AdRemainingTimeChange]=void 0,o[u.AdSkippableStateChange]=void 0,o[u.AdUserAcceptInvitation]=Lt((function(t,e){d.backendAdvert.GetInstance().SendAdUserAcceptInvitation(t,e)}),250,{leading:!0,trailing:!1}),o[v.AdORD]=Lt((function(t,e,n,i,o){d.backendAdvert.GetInstance().SendAdORD(t,n,i,e,o)}),250,{leading:!0,trailing:!1}),o.MVImpressionWebmaster=Lt((function(t,e,n,i){d.backendAdvert.GetInstance().SendMVImpressionWebmaster(t,e,n,i)}),250,{leading:!0,trailing:!1}),o.MVMRCVisibility=Lt((function(t,e){d.backendAdvert.GetInstance().SendMVMRCVisibility(t,e)}),250,{leading:!0,trailing:!1}),o[l.AdBannerNURL]=Lt((function(t,e){d.backendAdvert.GetInstance().SendMVAdBannerNURL(t,e)}),250,{leading:!0,trailing:!1}),o),this.imp=u.AdImpression,this.ordEvent=v.AdORD,this.impWeb="MVImpressionWebmaster",c.Instance().GetInstrument()===e.Banner?(this.queueAdvert=ie,this.backendAdvert=ne):(this.queueAdvert=Ht,this.backendAdvert=Ut),this.backend=this.dataBackend,this.id=t.getId(),(null===(r=t.getParentAdvert())||void 0===r?void 0:r.isWrapper())&&t.IsInline()&&(this.id=t.getId()),this.parentID=null===(a=t.getParentAdvert())||void 0===a?void 0:a.getId(),this.parentBackendID=null===(s=t.getParentAdvert())||void 0===s?void 0:s.getVastId(),this.backendID=t.getVastId(),this.type=t.getType();var p=t.getOptions(),A=t.getControls();this.ord=t.getOrd(),this.options={showLimit:p.showLimit,skipOffset:p.skipOffset,timeoutLimit:p.timeoutLimit,startToClick:p.startToClick,iframePlayer:p.iframePlayer,integrationType:p.integrationType,clickDelay:p.clickDelay,rtb:p.rtb,payPlayerEvent:p.payPlayerEvent},this.controls={fullscreen:A.fullscreen,volume:A.volume,timeline:A.timeline,playback:A.playback,skip:A.skip,agency:A.agency},this.options.clickDelay>0&&(this.PassThruClick=!1),this.creatives=[];for(var y=0;y<n.length;y++)this.creatives.push(n[y]);this.nonCreativeTracks=i}return t.prototype.ID=function(){return this.id},t.prototype.ParentID=function(){return this.parentID},t.prototype.ParentBackendID=function(){return this.parentBackendID},t.prototype.GetIDForBackend=function(){return this.IsWrapper()?this.backendID:this.IsInline()?void 0===this.ParentID()?this.backendID:this.ParentBackendID():void 0},t.prototype.GetOptionsRTBDSP=function(){var t,e;return null===(e=null===(t=this.options)||void 0===t?void 0:t.rtb)||void 0===e?void 0:e.dsp},t.prototype.GetClickDelayDuration=function(){return this.options.clickDelay>0?this.options.clickDelay:0},t.prototype.CanPassThruClick=function(){return this.PassThruClick},t.prototype.AllowPassThruClick=function(){this.PassThruClick=!0},t.prototype.Type=function(){return this.type},t.prototype.IsInline=function(){return this.type===Kt.InLine},t.prototype.IsWrapper=function(){return this.type===Kt.Wrapper},t.prototype.IsRTBIntegration=function(){var t;return(null===(t=this.options)||void 0===t?void 0:t.integrationType)===Xt.rtb},t.prototype.GetCreativeURL=function(){var t;return null===(t=this.creatives[0])||void 0===t?void 0:t.media.GetURL()},t.prototype.GetCreativeOptions=function(){var t;return null===(t=this.creatives[0])||void 0===t?void 0:t.media.GetParams()},t.prototype.GetCreativeMedia=function(){var t;return null===(t=this.creatives[0])||void 0===t?void 0:t.media},t.prototype.GetOptions=function(){return this.options},t.prototype.GetOptionsSkipOffset=function(){var t,e;return(null===(t=this.creatives[0])||void 0===t?void 0:t.GetSkipOffset())>0?null===(e=this.creatives[0])||void 0===e?void 0:e.GetSkipOffset():this.options.skipOffset},t.prototype.GetControls=function(){return this.controls},t.prototype.IsNeedForeignFrame=function(){return!!this.GetOptions().iframePlayer},t.prototype.GetOrd=function(){return this.ord},t.prototype.BackendSend=function(t,e){void 0===e&&(e=[]);try{var n=this.backend[t];if(n){if(t!==this.imp&&t!==this.impWeb&&t!==this.ordEvent||(e.push(c.Instance().GetPlacement()),e.push(c.Instance().GetSiteID())),this.IsRTBIntegration()){var i=this.GetOptionsRTBDSP();i&&e.push(i)}n.apply(void 0,Yt([+this.GetIDForBackend()],e,!1))}}catch(e){o.error("backend call: ".concat(t," exception:"),e)}},t.prototype.GetOptionsFrameURI=function(t){var e="",n=this.GetOptions().iframePlayer;return n&&(e="https://".concat(n,"/frame.html?creative_uri=").concat(t.trim())),e},t.prototype.SetChild=function(t){this.childID=t},t.prototype.IsCanRenderControls=function(){switch(this.options.integrationType){case Xt.yandex_vpaid_instream:case Xt.yandex_vpaid_outstream:case Xt.mail_adman:return!1}return!0},t.prototype.IsNeedTimeline=function(){return this.GetControls().timeline},t.prototype.IsNeedFullscreen=function(){return this.GetControls().fullscreen},t.prototype.IsNeedVolumeUI=function(){return this.GetControls().volume},t.prototype.IsNeedPlaybackButtons=function(){return this.GetControls().playback},t.prototype.IsNeedSkipButton=function(){var t;return(null===(t=this.creatives[0])||void 0===t?void 0:t.GetSkipOffset())>0||!(this.GetOptions().skipOffset<=0)&&this.GetControls().skip},t.GetOptionsProxyURI=function(t){var e="";return t&&(e="https://".concat(t,"/proxy.html")),e},t.prototype.CallTrackingEventsCreativeView=function(){var t,e;null===(t=this.creatives[0])||void 0===t||t.CallTrackingEventsCreativeView(),null===(e=this.queueAdvert.GetInstance().GetAdvert(this.childID))||void 0===e||e.CallTrackingEventsCreativeView()},t.prototype.CallTrackingEventsStart=function(){var t,e,n;null===(t=this.nonCreativeTracks)||void 0===t||t.Start(),null===(e=this.creatives[0])||void 0===e||e.CallTrackingEventsStart(),null===(n=this.queueAdvert.GetInstance().GetAdvert(this.childID))||void 0===n||n.CallTrackingEventsStart()},t.prototype.CallTrackingEventsFirstQuartile=function(){var t,e,n;null===(t=this.nonCreativeTracks)||void 0===t||t.FirstQuartile(),null===(e=this.creatives[0])||void 0===e||e.CallTrackingEventsFirstQuartile(),null===(n=this.queueAdvert.GetInstance().GetAdvert(this.childID))||void 0===n||n.CallTrackingEventsFirstQuartile()},t.prototype.CallTrackingEventsMidpoint=function(){var t,e,n;null===(t=this.nonCreativeTracks)||void 0===t||t.Midpoint(),null===(e=this.creatives[0])||void 0===e||e.CallTrackingEventsMidpoint(),null===(n=this.queueAdvert.GetInstance().GetAdvert(this.childID))||void 0===n||n.CallTrackingEventsMidpoint()},t.prototype.CallTrackingEventsThirdQuartile=function(){var t,e,n;null===(t=this.nonCreativeTracks)||void 0===t||t.ThirdQuartile(),null===(e=this.creatives[0])||void 0===e||e.CallTrackingEventsThirdQuartile(),null===(n=this.queueAdvert.GetInstance().GetAdvert(this.childID))||void 0===n||n.CallTrackingEventsThirdQuartile()},t.prototype.CallTrackingEventsComplete=function(){var t,e,n;null===(t=this.nonCreativeTracks)||void 0===t||t.Complete(),null===(e=this.creatives[0])||void 0===e||e.CallTrackingEventsComplete(),null===(n=this.queueAdvert.GetInstance().GetAdvert(this.childID))||void 0===n||n.CallTrackingEventsComplete()},t.prototype.CallTrackingEventsMute=function(){var t,e;null===(t=this.creatives[0])||void 0===t||t.CallTrackingEventsMute(),null===(e=this.queueAdvert.GetInstance().GetAdvert(this.childID))||void 0===e||e.CallTrackingEventsMute()},t.prototype.CallTrackingEventsUnmute=function(){var t,e;null===(t=this.creatives[0])||void 0===t||t.CallTrackingEventsUnmute(),null===(e=this.queueAdvert.GetInstance().GetAdvert(this.childID))||void 0===e||e.CallTrackingEventsUnmute()},t.prototype.CallTrackingEventsPause=function(){var t,e;null===(t=this.creatives[0])||void 0===t||t.CallTrackingEventsPause(),null===(e=this.queueAdvert.GetInstance().GetAdvert(this.childID))||void 0===e||e.CallTrackingEventsPause()},t.prototype.CallTrackingEventsResume=function(){var t,e;null===(t=this.creatives[0])||void 0===t||t.CallTrackingEventsResume(),null===(e=this.queueAdvert.GetInstance().GetAdvert(this.childID))||void 0===e||e.CallTrackingEventsResume()},t.prototype.CallTrackingEventsRewind=function(){var t,e;null===(t=this.creatives[0])||void 0===t||t.CallTrackingEventsRewind(),null===(e=this.queueAdvert.GetInstance().GetAdvert(this.childID))||void 0===e||e.CallTrackingEventsRewind()},t.prototype.CallTrackingEventsExpand=function(){var t,e;null===(t=this.creatives[0])||void 0===t||t.CallTrackingEventsExpand(),null===(e=this.queueAdvert.GetInstance().GetAdvert(this.childID))||void 0===e||e.CallTrackingEventsExpand()},t.prototype.CallTrackingEventsCollapse=function(){var t,e;null===(t=this.creatives[0])||void 0===t||t.CallTrackingEventsCollapse(),null===(e=this.queueAdvert.GetInstance().GetAdvert(this.childID))||void 0===e||e.CallTrackingEventsCollapse()},t.prototype.CallTrackingEventsFullscreen=function(){var t,e;null===(t=this.creatives[0])||void 0===t||t.CallTrackingEventsFullscreen(),null===(e=this.queueAdvert.GetInstance().GetAdvert(this.childID))||void 0===e||e.CallTrackingEventsFullscreen()},t.prototype.CallTrackingEventsExitFullscreen=function(){var t,e;null===(t=this.creatives[0])||void 0===t||t.CallTrackingEventsExitFullscreen(),null===(e=this.queueAdvert.GetInstance().GetAdvert(this.childID))||void 0===e||e.CallTrackingEventsExitFullscreen()},t.prototype.CallTrackingEventsAcceptInvitationLinear=function(){var t,e;null===(t=this.creatives[0])||void 0===t||t.CallTrackingEventsAcceptInvitationLinear(),null===(e=this.queueAdvert.GetInstance().GetAdvert(this.childID))||void 0===e||e.CallTrackingEventsAcceptInvitationLinear()},t.prototype.CallTrackingEventsCloseLinear=function(){var t,e;null===(t=this.creatives[0])||void 0===t||t.CallTrackingEventsCloseLinear(),null===(e=this.queueAdvert.GetInstance().GetAdvert(this.childID))||void 0===e||e.CallTrackingEventsCloseLinear()},t.prototype.CallTrackingEventsSkip=function(){var t,e,n;null===(t=this.nonCreativeTracks)||void 0===t||t.Skip(),null===(e=this.creatives[0])||void 0===e||e.CallTrackingEventsSkip(),null===(n=this.queueAdvert.GetInstance().GetAdvert(this.childID))||void 0===n||n.CallTrackingEventsSkip()},t.prototype.CallTrackingEventsProgress=function(){var t,e;null===(t=this.creatives[0])||void 0===t||t.CallTrackingEventsProgress(),null===(e=this.queueAdvert.GetInstance().GetAdvert(this.childID))||void 0===e||e.CallTrackingEventsProgress()},t.prototype.CallVideoClicksClickTracking=function(){var t,e,n;null===(t=this.nonCreativeTracks)||void 0===t||t.ClickTracking(),null===(e=this.creatives[0])||void 0===e||e.CallVideoClicksClickTracking(),null===(n=this.queueAdvert.GetInstance().GetAdvert(this.childID))||void 0===n||n.CallVideoClicksClickTracking()},t.prototype.CallVideoClicksClickTrough=function(){var t,e,n;null===(t=this.nonCreativeTracks)||void 0===t||t.ClickTrough(),null===(e=this.creatives[0])||void 0===e||e.CallVideoClicksClickTrough(),null===(n=this.queueAdvert.GetInstance().GetAdvert(this.childID))||void 0===n||n.CallVideoClicksClickTrough()},t.prototype.CallTrackingImpression=function(){var t,e;this.nonCreativeTracks.Impression(),null===(t=this.creatives[0])||void 0===t||t.CallTrackingImpression(),null===(e=this.queueAdvert.GetInstance().GetAdvert(this.childID))||void 0===e||e.CallTrackingImpression()},t.prototype.CallTrackingError=function(){var t,e;this.nonCreativeTracks.Error(),null===(t=this.creatives[0])||void 0===t||t.CallTrackingError(),null===(e=this.queueAdvert.GetInstance().GetAdvert(this.childID))||void 0===e||e.CallTrackingError()},t}();!function(t){t[t.vast=1]="vast",t[t.yandex_vpaid_outstream=2]="yandex_vpaid_outstream",t[t.yandex_vpaid_instream=3]="yandex_vpaid_instream",t[t.showjet_vpaid=4]="showjet_vpaid",t[t.youtube_vpaid=5]="youtube_vpaid",t[t.html5_vpaid=6]="html5_vpaid",t[t.html=7]="html",t[t.rtb=8]="rtb",t[t.ctc_vpaid=9]="ctc_vpaid",t[t.mail_adman=10]="mail_adman",t[t.mail_banner=11]="mail_banner"}(Xt||(Xt={}));var $t,Zt=function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function a(t){try{d(i.next(t))}catch(t){r(t)}}function s(t){try{d(i.throw(t))}catch(t){r(t)}}function d(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}d((i=i.apply(t,e||[])).next())}))},te=function(t,e){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}},ee=function(t,e,n){if(n||2===arguments.length)for(var i,o=0,r=e.length;o<r;o++)!i&&o in e||(i||(i=Array.prototype.slice.call(e,0,o)),i[o]=e[o]);return t.concat(i||Array.prototype.slice.call(e))};!function(t){t.Parse=function(t){return Zt(this,void 0,void 0,(function(){var n;return te(this,(function(i){switch(i.label){case 0:return[4,e.getAdvertAll(t)];case 1:return n=i.sent(),[2,(o=n,r=o.reduce((function(t,e){var n=e;if(!n)return t;var i=n.GetOptions().integrationType;return i===Xt.yandex_vpaid_outstream?(t.yandex=ee(ee([],t.yandex,!0),[e],!1),t):i===Xt.mail_adman?(t.mail=ee(ee([],t.mail,!0),[e],!1),t):i===Xt.rtb?(t.rtb=ee(ee([],t.rtb,!0),[e],!1),t):(t.all=ee(ee([],t.all,!0),[e],!1),t)}),{yandex:[],mail:[],rtb:[],all:[]}),a=[Object.values(r.yandex),Object.values(r.mail),Object.values(r.rtb),Object.values(r.all)],a.flat())]}var o,r,a}))}))};var e=new(function(){function t(t){this.vpaidURI=t}return t.prototype.getAdvertAll=function(t){return Zt(this,void 0,void 0,(function(){return te(this,(function(e){return[2,this.parse(t)[0]]}))}))},t.prototype.parse=function(t,e,i,r){var a=this;return void 0===r&&(r=!0),[new Promise((function(r,s){return Zt(a,void 0,void 0,(function(){var a,d,c,p,u,l,h,f,v,A,y,g=this;return te(this,(function(m){switch(m.label){case 0:if(t&&(t=t.replace(/<!--.*-->/i,"")),a=new n(t,this.vpaidURI,i,e),d=a.getCreativeList().length>0,c=a.getAdvertList().length>0,p=a.getWrapperList().length>0,u=!d&&!p||!c,o.info("vast parser is-vast-parse-error:".concat(u," is-have-wrappers:").concat(p," is-have-adverts:").concat(c," is-have-creatives:").concat(d)),o.info("vast parser xml:".concat(t)),e&&i&&e.getId()===i.getId()&&u)return[2,s(e)];if(u)return[2,r([])];clearTimeout(ne.GetInstance().vastLoadTimer),m.label=1;case 1:return m.trys.push([1,4,,5]),l=a.getAdvertList().map((function(t){return Zt(g,void 0,void 0,(function(){var e,n,i,r,s,d;return te(this,(function(c){switch(c.label){case 0:return e=[],a.getCreativeList().forEach((function(n){var i=[];if(n.getAdId()===t.getId()){a.getTrackList().forEach((function(t){(t.creativeId===n.getId()||t.adId===n.getAdId())&&i.push(new $(void 0,n.getId(),t.type,t.url,t.offset))}));var r,s=new tt(i);a.getContentVpaidList().forEach((function(e){t.getId()==e.getAdId()&&(e instanceof Y||e instanceof q?r=new nt(e.GetMediaFile().vastData):o.error("vast parser error"))}));var d=new at(n.getId(),t.getVastId(),{id:n.getVastCreative().id,adId:n.getVastCreative().adId,sequence:n.getVastCreative().sequence,duration:n.getVastCreative().duration,skipOffset:n.getVastCreative().skipOffset,format:n.getVastCreative().format,clickUrl:n.getVastCreative().clickUrl},s,r);e.push(d)}})),n=[],a.getTrackList().forEach((function(e){void 0===e.creativeId&&n.push(new $(t.getId(),void 0,e.type,e.url,e.offset))})),i=new Jt(t,e,new tt(n)),o.backend("[QUEUE] append advert model to queue",i),r=a.getWrapperList(),"Wrapper"!==t.getType()?[3,3]:[4,this.getWrapperByid(t.getId(),r)];case 1:return s=c.sent(),[4,this.getAdvertsFromWrapper(s)];case 2:return d=c.sent(),[2,ee([i],d,!0)];case 3:return void 0!==i.GetCreativeMedia()?[2,[i]]:[2,[]]}}))}))})),[4,Promise.allSettled(l)];case 2:return h=m.sent(),f=h.map((function(t){return t.value})),[4,Promise.allSettled(f.flat())];case 3:return v=m.sent(),A=v.map((function(t){return t.value})),r(A.flat()),[3,5];case 4:return y=m.sent(),o.info("vast parser exception: ".concat(y.message),y),s(y),[3,5];case 5:return[2]}}))}))}))]},t.prototype.getWrapperByid=function(t,e){return e.find((function(e){return e.advert.getId()===t}))},t.prototype.getAdvertsFromWrapper=function(t){return this.loadByHttp(t.url,t.advert,t.rootAdvert)},t.prototype.loadByHttp=function(t,e,n){return Zt(this,void 0,void 0,(function(){var i,o,r;return te(this,(function(a){switch(a.label){case 0:return n===e&&ne.GetInstance().SendMVAdvertiserRequest(+e.getData().id),i={placement:c.Instance().GetPlacement(),user_uid:c.Instance().GetUserUid(),ads_id:e.getId(),user_id:c.Instance().GetMacrosWebmaster(),frameref:e.getOptions().iframePlayer,referer:c.Instance().GetMacrosReferer(),site:c.Instance().GetMacrosSite(),site_id:c.Instance().GetSiteID()},e.IsNeedForeignFrame()?(r=e.getOptions().iframePlayer,[4,this.getVASTViaForeignFrame(t,i,r)]):[3,2];case 1:return o=a.sent(),[3,4];case 2:return[4,this.getVASTViaDirectFetch(t,i)];case 3:o=a.sent(),a.label=4;case 4:return[4,this.parse(o,e,n)];case 5:return[2,a.sent()]}}))}))},t.prototype.getVASTViaForeignFrame=function(t,e,n){var i=Jt.GetOptionsProxyURI(n);return o.info("vast parser get: ".concat(t," via ").concat(i)),ot.fetch(i,g.replace(t,e))},t.prototype.getVASTViaDirectFetch=function(t,e){var n=g.replace(t,e);o.info("vast parser get: ".concat(n));var i=new AbortController,r=i.signal,a=setTimeout((function(){i.abort()}),400);return fetch(n,{credentials:"include",signal:r}).then((function(t){return clearTimeout(a),t.text()})).catch((function(t){o.error("VAST fetch exception:",n,t)}))},t}())("https://moevideo.com"),n=function(){function t(t,e,n,i){this.rootAdvert=n,this.parentAdvert=i,this.vpaidURI=e,this.advertList=[],this.wrapperList=[],this.creativeList=[],this.contentVpaidList=[],this.trackList=[],this.parser=new w.c,this.parser.addVastWithoutFetching(t),this.parseAdvert()}return t.prototype.getAdvertList=function(){return this.advertList},t.prototype.getWrapperList=function(){return this.wrapperList},t.prototype.getCreativeList=function(){return this.creativeList},t.prototype.getContentVpaidList=function(){return this.contentVpaidList},t.prototype.getTrackList=function(){return this.trackList},t.prototype.getIconList=function(){},t.prototype.parseAdvert=function(){var t=this,e=new G(this.parser,this.rootAdvert,this.parentAdvert);this.advertList=e.parse().map((function(e){return t.parseWrapper(e.advert,e.element),t.parseCreative(e.advert,e.element),t.parseAdvertTrack(e.advert,e.element),e.advert})),o.info("vast parser advert",this.advertList)},t.prototype.parseWrapper=function(t,e){var n=new L(t,e,this.rootAdvert).parse();o.info("vast parser wrapper",n),n&&this.wrapperList.push(n)},t.prototype.parseCreative=function(t,e){var n=this;new _(t.getId(),e).parse().forEach((function(e){e.creative.getSkipOffset()<=0&&e.creative.setSkipOffset(t.getSkipOffset()),n.parseMediaFile(t,e.creative,e.element),n.parseCreativeTrack(t,e.creative,e.element),n.creativeList.push(e.creative)})),o.info("vast parser creatives",this.creativeList)},t.prototype.parseMediaFile=function(t,e,n){var i,o=new J(t,e,n,this.vpaidURI,this.rootAdvert);(i=this.contentVpaidList).push.apply(i,o.parse())},t.prototype.parseCreativeTrack=function(t,e,n){var i;(i=this.trackList).push.apply(i,et.parseCreativeTrack(t,e,n))},t.prototype.parseAdvertTrack=function(t,e){var n;(n=this.trackList).push.apply(n,et.parseAdvertTrack(t,e)),o.info("vast parser tracks",this.trackList)},t}()}($t||($t={}));var ne,ie,oe=function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function a(t){try{d(i.next(t))}catch(t){r(t)}}function s(t){try{d(i.throw(t))}catch(t){r(t)}}function d(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}d((i=i.apply(t,e||[])).next())}))},re=function(t,e){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}},ae=function(t,e,n){if(n||2===arguments.length)for(var i,o=0,r=e.length;o<r;o++)!i&&o in e||(i||(i=Array.prototype.slice.call(e,0,o)),i[o]=e[o]);return t.concat(i||Array.prototype.slice.call(e))};!function(t){var e,n;!function(t){t[t.VPAIDStartAd=0]="VPAIDStartAd",t[t.VPAIDStopAd=1]="VPAIDStopAd",t[t.VPAIDResizeAd=2]="VPAIDResizeAd",t[t.VPAIDPauseAd=3]="VPAIDPauseAd",t[t.VPAIDResumeAd=4]="VPAIDResumeAd",t[t.VPAIDExpandAd=5]="VPAIDExpandAd",t[t.VPAIDCollapseAd=6]="VPAIDCollapseAd",t[t.VPAIDSkipAd=7]="VPAIDSkipAd",t[t.VPAIDGetAdLinear=8]="VPAIDGetAdLinear",t[t.VPAIDGetAdWidth=9]="VPAIDGetAdWidth",t[t.VPAIDGetAdHeight=10]="VPAIDGetAdHeight",t[t.VPAIDGetAdExpanded=11]="VPAIDGetAdExpanded",t[t.VPAIDGetAdSkippableState=12]="VPAIDGetAdSkippableState",t[t.VPAIDGetAdRemainingTime=13]="VPAIDGetAdRemainingTime",t[t.VPAIDGetAdDuration=14]="VPAIDGetAdDuration",t[t.VPAIDGetAdCompanions=15]="VPAIDGetAdCompanions",t[t.VPAIDSetAdVolume=16]="VPAIDSetAdVolume",t[t.VPAIDGetAdVolume=17]="VPAIDGetAdVolume",t[t.VPAIDGetAdIcons=18]="VPAIDGetAdIcons",t[t.VPAIDAdLoaded=19]="VPAIDAdLoaded",t[t.VPAIDAdStarted=20]="VPAIDAdStarted",t[t.VPAIDAdStopped=21]="VPAIDAdStopped",t[t.VPAIDAdSkipped=22]="VPAIDAdSkipped",t[t.VPAIDAdPaused=23]="VPAIDAdPaused",t[t.VPAIDAdSizeChange=24]="VPAIDAdSizeChange",t[t.VPAIDAdPlaying=25]="VPAIDAdPlaying",t[t.VPAIDAdExpandedChange=26]="VPAIDAdExpandedChange",t[t.VPAIDAdSkippableStateChange=27]="VPAIDAdSkippableStateChange",t[t.VPAIDAdLinearChange=28]="VPAIDAdLinearChange",t[t.VPAIDAdVolumeChange=29]="VPAIDAdVolumeChange",t[t.VPAIDAdVideoStart=30]="VPAIDAdVideoStart",t[t.VPAIDAdVideoFirstQuartile=31]="VPAIDAdVideoFirstQuartile",t[t.VPAIDAdVideoMidPoint=32]="VPAIDAdVideoMidPoint",t[t.VPAIDAdVideoThirdQuartile=33]="VPAIDAdVideoThirdQuartile",t[t.VPAIDAdVideoComplete=34]="VPAIDAdVideoComplete",t[t.VPAIDAdUserAcceptInvitation=35]="VPAIDAdUserAcceptInvitation",t[t.VPAIDAdUserClose=36]="VPAIDAdUserClose",t[t.VPAIDAdUserMinimize=37]="VPAIDAdUserMinimize",t[t.VPAIDAdClickThru=38]="VPAIDAdClickThru",t[t.VPAIDAdInteraction=39]="VPAIDAdInteraction",t[t.VPAIDAdError=40]="VPAIDAdError",t[t.VPAIDAdLog=41]="VPAIDAdLog",t[t.VPAIDAdDurationChange=42]="VPAIDAdDurationChange",t[t.VPAIDAdRemainingTimeChange=43]="VPAIDAdRemainingTimeChange",t[t.VPAIDAdImpression=44]="VPAIDAdImpression",t[t.MVException=45]="MVException",t[t.MVInventory=46]="MVInventory",t[t.MVImpressionWebmaster=47]="MVImpressionWebmaster",t[t.MVSendAdvertToPlayer=48]="MVSendAdvertToPlayer",t[t.MVAdvertiserRequest=49]="MVAdvertiserRequest",t[t.MVAdvertiserRequestReceived=50]="MVAdvertiserRequestReceived",t[t.MVAdvertiserRequestError=51]="MVAdvertiserRequestError",t[t.MVMRCVisibility=52]="MVMRCVisibility",t[t.MVSendStoriesRollToPlayer=53]="MVSendStoriesRollToPlayer",t[t.MVSendInstreamRollToPlayer=54]="MVSendInstreamRollToPlayer",t[t.MVSendRTBPixelToPlayer=55]="MVSendRTBPixelToPlayer",t[t.MVAdvertORD=56]="MVAdvertORD",t[t.MVSendInventoryBannedByDomain=57]="MVSendInventoryBannedByDomain",t[t.MVSendInventoryBannedByPlacement=58]="MVSendInventoryBannedByPlacement",t[t.MVSendInventoryBannedByWebmaster=59]="MVSendInventoryBannedByWebmaster",t[t.MVGetMediaForInstreamRoll=60]="MVGetMediaForInstreamRoll",t[t.MVGetMediaForStoriesRoll=61]="MVGetMediaForStoriesRoll",t[t.MVAdBannerNURL=62]="MVAdBannerNURL"}(n=t.PlayerBackendCommunicationEvent||(t.PlayerBackendCommunicationEvent={}));var i=((e={})[n.VPAIDStartAd]="VPAIDStartAd",e[n.VPAIDStopAd]="VPAIDStopAd",e[n.VPAIDResizeAd]="VPAIDResizeAd",e[n.VPAIDPauseAd]="VPAIDPauseAd",e[n.VPAIDResumeAd]="VPAIDResumeAd",e[n.VPAIDExpandAd]="VPAIDExpandAd",e[n.VPAIDCollapseAd]="VPAIDCollapseAd",e[n.VPAIDSkipAd]="VPAIDSkipAd",e[n.VPAIDGetAdLinear]="VPAIDGetAdLinear",e[n.VPAIDGetAdWidth]="VPAIDGetAdWidth",e[n.VPAIDGetAdHeight]="VPAIDGetAdHeight",e[n.VPAIDGetAdExpanded]="VPAIDGetAdExpanded",e[n.VPAIDGetAdSkippableState]="VPAIDGetAdSkippableState",e[n.VPAIDGetAdRemainingTime]="VPAIDGetAdRemainingTime",e[n.VPAIDGetAdDuration]="VPAIDGetAdDuration",e[n.VPAIDGetAdCompanions]="VPAIDGetAdCompanions",e[n.VPAIDSetAdVolume]="VPAIDSetAdVolume",e[n.VPAIDGetAdVolume]="VPAIDGetAdVolume",e[n.VPAIDGetAdIcons]="VPAIDGetAdIcons",e[n.VPAIDAdLoaded]="VPAIDAdLoaded",e[n.VPAIDAdStarted]="VPAIDAdStarted",e[n.VPAIDAdStopped]="VPAIDAdStopped",e[n.VPAIDAdSkipped]="VPAIDAdSkipped",e[n.VPAIDAdPaused]="VPAIDAdPaused",e[n.VPAIDAdSizeChange]="VPAIDAdSizeChange",e[n.VPAIDAdPlaying]="VPAIDAdPlaying",e[n.VPAIDAdExpandedChange]="VPAIDAdExpandedChange",e[n.VPAIDAdSkippableStateChange]="VPAIDAdSkippableStateChange",e[n.VPAIDAdLinearChange]="VPAIDAdLinearChange",e[n.VPAIDAdVolumeChange]="VPAIDAdVolumeChange",e[n.VPAIDAdVideoStart]="VPAIDAdVideoStart",e[n.VPAIDAdVideoFirstQuartile]="VPAIDAdVideoFirstQuartile",e[n.VPAIDAdVideoMidPoint]="VPAIDAdVideoMidPoint",e[n.VPAIDAdVideoThirdQuartile]="VPAIDAdVideoThirdQuartile",e[n.VPAIDAdVideoComplete]="VPAIDAdVideoComplete",e[n.VPAIDAdUserAcceptInvitation]="VPAIDAdUserAcceptInvitation",e[n.VPAIDAdUserClose]="VPAIDAdUserClose",e[n.VPAIDAdUserMinimize]="VPAIDAdUserMinimize",e[n.VPAIDAdClickThru]="VPAIDAdClickThru",e[n.VPAIDAdInteraction]="VPAIDAdInteraction",e[n.VPAIDAdError]="VPAIDAdError",e[n.VPAIDAdLog]="VPAIDAdLog",e[n.VPAIDAdDurationChange]="VPAIDAdDurationChange",e[n.VPAIDAdRemainingTimeChange]="VPAIDAdRemainingTimeChange",e[n.VPAIDAdImpression]="VPAIDAdImpression",e[n.MVException]="MVException",e[n.MVInventory]="MVInventory",e[n.MVImpressionWebmaster]="MVImpressionWebmaster",e[n.MVSendAdvertToPlayer]="MVSendAdvertToPlayer",e[n.MVAdvertiserRequest]="MVAdvertiserRequest",e[n.MVMRCVisibility]="MVMRCVisibility",e[n.MVSendStoriesRollToPlayer]="MVSendStoriesRollToPlayer",e[n.MVSendInstreamRollToPlayer]="MVSendInstreamRollToPlayer",e[n.MVSendRTBPixelToPlayer]="MVSendRTBPixelToPlayer",e[n.MVAdvertORD]="MVAdvertORD",e);t.PBCEventName=function(t){return i[t]},t.GetInstance=function(){if(c.Instance().SetCurrentWorker(C.GetPlayerWorker()),void 0===c.Instance().GetBackend()){var t={v:c.Instance().GetVersion(),p:c.Instance().GetPlacement(),i:c.Instance().GetInstrument(),s:c.Instance().GetSlot(),r:btoa(C.GetReferer())},e=C.GetTargetAdverts();null!==e&&(t._=e),c.Instance().SetBackend(new r(C.BackendURI(),t))}return c.Instance().GetBackend()};var r=function(){function t(e,i,o){var r;void 0===i&&(i={});var a=this;this.enabled=!0,this.isOpen=new Promise((function(t,e){a.isOpenResolve=t,a.isOpenReject=e})),this.VAST_QUERY_TIMER=500,this.isAwaitVast=!1,this.XMLBuffer=null,this.backendNotImplementedEventsList=((r={})[n.VPAIDAdLoaded]=!0,r[n.VPAIDResizeAd]=!0,r[n.VPAIDStartAd]=!0,r[n.VPAIDAdSizeChange]=!0,r[n.VPAIDAdStarted]=!0,r[n.VPAIDAdStopped]=!0,r[n.VPAIDExpandAd]=!0,r[n.VPAIDCollapseAd]=!0,r[n.VPAIDPauseAd]=!0,r[n.VPAIDResumeAd]=!0,r),this.SendMVInventory=Lt((function(t){var e=[];e.push(t.ref),e.push(t.placement),e.push(t.instrument),e.push(t.slot),e.push(t.size),!1===isNaN(t.target)&&e.push(t.target),a.send(n.MVInventory,e)}),250,{leading:!1,trailing:!0}),this.GetMediaForInstreamroll=Lt((function(t,e,i){var o=[];o.push(t),o.push(e),o.push(i),a.send(n.MVGetMediaForInstreamRoll,o)}),250,{leading:!0,trailing:!1}),void 0!==o&&(this.enabled=!!o),!1!==this.enabled&&(this.uri=t.uri(e,i),this.socket=Bt.Socket(this,this.uri))}return t.prototype.CloseConnection=function(){var t;null===(t=this.socket)||void 0===t||t.close()},t.prototype.startVast=function(t){this.getNextVast(t)},t.prototype.getNextVast=function(t){this.SendMVInventory(t)},t.prototype.processingXML=function(t){return oe(this,void 0,void 0,(function(){var e,n;return re(this,(function(i){switch(i.label){case 0:return[4,$t.Parse(t)];case 1:for(e=i.sent(),ie.GetInstance().advertsQueue=ae(ae([],ie.GetInstance().advertsQueue,!0),e,!0),n=0;n<e.length;n++)ie.GetInstance().Append(e[n]);return[2]}}))}))},t.prototype.onOpen=function(){this.isOpenResolve(),o.info("event Open")},t.prototype.onClose=function(){o.info("event Close")},t.prototype.onError=function(t){this.isOpenReject(),o.info("event Error:",t)},t.prototype.onMessage=function(t){var e=t.data.charCodeAt(0),i=t.data.substring(1);try{switch(i=JSON.parse(i),e){case n.MVSendAdvertToPlayer:this.ReceiveMVSendAdvertToPlayer(i);break;case n.MVSendInstreamRollToPlayer:try{var r=JSON.parse(atob(i[0]));r.length&&(c.Instance().SetInstreamRollMediaList(r),Ot("InstreamRollMediaReady"))}catch(t){o.info("error Adverts:",t.message)}break;case n.MVSendRTBPixelToPlayer:try{i=JSON.parse(i)}catch(t){o.info("error Adverts:",t.message)}this.ReceiveMVSendRTBPixelToPlayer(i);break;case n.MVSendInventoryBannedByDomain:case n.MVSendInventoryBannedByPlacement:case n.MVSendInventoryBannedByWebmaster:this.ReceiveMVSendInventoryBanned(i,e);break;default:o.info('receive event from backend: "'.concat(t.data,'"'))}}catch(t){o.info("error Adverts:",t.message)}},t.prototype.isEventExpectedOnBackend=function(t){return!this.backendNotImplementedEventsList[t]},t.prototype.send=function(t,e){var r=this,a=i[t],s=String.fromCharCode(t);if(e)try{s+=JSON.stringify(e)}catch(e){o.backend('send event "'.concat(a,'"(').concat(t,") to backend exception:").concat(e.message))}t!==n.MVAdvertiserRequest?!1!==this.enabled?this.isOpen.then((function(){return oe(r,void 0,void 0,(function(){return re(this,(function(e){switch(e.label){case 0:return this.isEventExpectedOnBackend(t)?[4,this._send(t,a,s)]:[3,2];case 1:return e.sent(),[3,3];case 2:o.backend('event "'.concat(a,'"(').concat(t,') not implemented / expected on backend "').concat(s,' event is suspended"')),e.label=3;case 3:return[2]}}))}))})).catch((function(e){o.backend('send event "'.concat(a,'"(').concat(t,") to backend promise exception:").concat(e.message))})):o.backend('cannot send event "'.concat(a,'"(').concat(t,') to backend "').concat(s,'", communication is off')):o.backend('event "'.concat(a,'"(').concat(t,') "').concat(s,'" event is suspended'))},t.prototype._send=function(t,e,n){return oe(this,void 0,void 0,(function(){return re(this,(function(i){switch(i.label){case 0:return this.socket.readyState!==this.socket.CLOSED&&this.socket.readyState!==this.socket.CLOSING?[3,2]:(this.socket=Bt.Socket(this,this.uri),[4,C.sleep(250)]);case 1:case 3:return i.sent(),[3,6];case 2:return this.socket.readyState!==this.socket.CONNECTING?[3,4]:[4,C.sleep(100)];case 4:return this.socket.send(n),o.backend('send event "'.concat(e,'"(').concat(t,') to backend "').concat(n,'"')),[4,C.sleep(50)];case 5:return i.sent(),[2];case 6:return[3,0];case 7:return[2]}}))}))},t.prototype.SendStartAd=function(e,i){this.send(n.VPAIDStartAd,t.args(e,i))},t.prototype.SendStopAd=function(e,i){this.send(n.VPAIDStopAd,t.args(e,i))},t.prototype.SendResizeAd=function(e,i){this.send(n.VPAIDResizeAd,t.args(e,i))},t.prototype.SendPauseAd=function(e,i){this.send(n.VPAIDPauseAd,t.args(e,i))},t.prototype.SendResumeAd=function(e,i){this.send(n.VPAIDResumeAd,t.args(e,i))},t.prototype.SendExpandAd=function(e,i){this.send(n.VPAIDExpandAd,t.args(e,i))},t.prototype.SendCollapseAd=function(e,i){this.send(n.VPAIDCollapseAd,t.args(e,i))},t.prototype.SendSkipAd=function(e,i){this.send(n.VPAIDSkipAd,t.args(e,i))},t.prototype.SendGetAdLinear=function(e,i){this.send(n.VPAIDGetAdLinear,t.args(e,i))},t.prototype.SendGetAdWidth=function(e,i){this.send(n.VPAIDGetAdWidth,t.args(e,i))},t.prototype.SendGetAdHeight=function(e,i){this.send(n.VPAIDGetAdHeight,t.args(e,i))},t.prototype.SendGetAdExpanded=function(e,i){this.send(n.VPAIDGetAdExpanded,t.args(e,i))},t.prototype.SendGetAdSkippableState=function(e,i){this.send(n.VPAIDGetAdSkippableState,t.args(e,i))},t.prototype.SendGetAdRemainingTime=function(e,i){this.send(n.VPAIDGetAdRemainingTime,t.args(e,i))},t.prototype.SendGetAdDuration=function(e,i){this.send(n.VPAIDGetAdDuration,t.args(e,i))},t.prototype.SendGetAdCompanions=function(e,i){this.send(n.VPAIDGetAdCompanions,t.args(e,i))},t.prototype.SendSetAdVolume=function(t,e,i){if(e>0){var o=[t,e];i&&o.push(i),this.send(n.VPAIDSetAdVolume,o)}},t.prototype.SendGetAdVolume=function(e,i){this.send(n.VPAIDGetAdVolume,t.args(e,i))},t.prototype.SendGetAdIcons=function(e,i){this.send(n.VPAIDGetAdIcons,t.args(e,i))},t.prototype.SendAdLoaded=function(e,i){this.send(n.VPAIDAdLoaded,t.args(e,i))},t.prototype.SendAdStarted=function(e,i){this.send(n.VPAIDAdStarted,t.args(e,i))},t.prototype.SendAdStopped=function(e,i){this.send(n.VPAIDAdStopped,t.args(e,i))},t.prototype.SendAdSkipped=function(e,i){this.send(n.VPAIDAdSkipped,t.args(e,i))},t.prototype.SendAdPaused=function(e,i){this.send(n.VPAIDAdPaused,t.args(e,i))},t.prototype.SendAdSizeChange=function(e,i){this.send(n.VPAIDAdSizeChange,t.args(e,i))},t.prototype.SendAdPlaying=function(e,i){this.send(n.VPAIDAdPlaying,t.args(e,i))},t.prototype.SendAdExpandedChange=function(e,i){this.send(n.VPAIDAdExpandedChange,t.args(e,i))},t.prototype.SendAdSkippableStateChange=function(e,i){this.send(n.VPAIDAdSkippableStateChange,t.args(e,i))},t.prototype.SendAdLinearChange=function(e,i){this.send(n.VPAIDAdLinearChange,t.args(e,i))},t.prototype.SendAdVolumeChange=function(t,e,i){if(e){var o=[t,e];i&&o.push(i),this.send(n.VPAIDAdVolumeChange,o)}},t.prototype.SendAdVideoStart=function(e,i){this.send(n.VPAIDAdVideoStart,t.args(e,i))},t.prototype.SendAdVideoFirstQuartile=function(e,i){this.send(n.VPAIDAdVideoFirstQuartile,t.args(e,i))},t.prototype.SendAdVideoMidPoint=function(e,i){this.send(n.VPAIDAdVideoMidPoint,t.args(e,i))},t.prototype.SendAdVideoThirdQuartile=function(e,i){this.send(n.VPAIDAdVideoThirdQuartile,t.args(e,i))},t.prototype.SendAdVideoComplete=function(e,i){this.send(n.VPAIDAdVideoComplete,t.args(e,i))},t.prototype.SendAdUserAcceptInvitation=function(e,i){this.send(n.VPAIDAdUserAcceptInvitation,t.args(e,i))},t.prototype.SendAdUserClose=function(e,i){this.send(n.VPAIDAdUserClose,t.args(e,i))},t.prototype.SendAdUserMinimize=function(e,i){this.send(n.VPAIDAdUserMinimize,t.args(e,i))},t.prototype.SendAdClickThru=function(e,i){this.send(n.VPAIDAdClickThru,t.args(e,i))},t.prototype.SendAdInteraction=function(e,i){this.send(n.VPAIDAdInteraction,t.args(e,i))},t.prototype.SendAdError=function(e,i){this.send(n.VPAIDAdError,t.args(e,i))},t.prototype.SendAdLog=function(e,i){this.send(n.VPAIDAdLog,t.args(e,i))},t.prototype.SendAdDurationChange=function(e,i){this.send(n.VPAIDAdDurationChange,t.args(e,i))},t.prototype.SendAdRemainingTimeChange=function(e,i){this.send(n.VPAIDAdRemainingTimeChange,t.args(e,i))},t.prototype.SendAdImpression=function(e,i,o,r){this.send(n.VPAIDAdImpression,t.args(e,i,o,r))},t.prototype.SendMVException=function(t,e){this.send(n.MVException,[t,e])},t.prototype.SendAdORD=function(t,e,i,o,r){this.send(n.MVAdvertORD,[t,e,i,o,r])},t.prototype.SendMVImpressionWebmaster=function(e,i,o,r){this.send(n.MVImpressionWebmaster,t.args(e,i,o,r))},t.prototype.SendMVMRCVisibility=function(e,i){this.send(n.MVMRCVisibility,t.args(e,i))},t.prototype.SendMVAdBannerNURL=function(t,e){this.send(n.MVAdBannerNURL,[t,e])},t.prototype.ReceiveMVSendAdvertToPlayer=function(t){var e=this,r=n.MVSendAdvertToPlayer,a=i[r];if(c.Instance().SetUserUid(t[1]),c.Instance().SetSiteID(t[2]),void 0!==t[0]){var s=atob(t[0]);if("no-banner"===s)return;null!==this.XMLBuffer?this.XMLBuffer=ae(ae([],this.XMLBuffer,!0),[s],!1):(this.XMLBuffer=[s],setTimeout(function(){return oe(e,void 0,void 0,(function(){var t,e=this;return re(this,(function(n){switch(n.label){case 0:return t=ae([],this.XMLBuffer,!0),this.XMLBuffer=null,[4,Promise.all(t.map((function(t){return e.processingXML(t).then()})))];case 1:return n.sent(),ie.GetInstance().checkLimits(),[2]}}))}))}.bind(this),400)),o.backend('receive event "'.concat(a,'"(').concat(r,') from backend "').concat(s,'"'))}},t.prototype.ReceiveMVSendRTBPixelToPlayer=function(t){p.CallRTBPixel(t)},t.prototype.ReceiveMVSendInventoryBanned=function(t,e){switch(e){case n.MVSendInventoryBannedByDomain:var i=t[0];c.Instance().SetBannedByDomain(i),o.backend("domain ".concat(i," is banned"));break;case n.MVSendInventoryBannedByPlacement:var r=t[0];c.Instance().SetBannedByPlacement(r),o.backend("placement ".concat(r," is banned"));break;case n.MVSendInventoryBannedByWebmaster:var a=t[0];c.Instance().SetBannedByWebmaster(a),o.backend("webmaster ".concat(t[0]," is banned"))}},t.prototype.SendMVAdvertiserRequest=function(t){this.send(n.MVAdvertiserRequest,[t])},t.args=function(t,e,n,i){return e&&n&&i?[t,e,n,i]:e&&n?[t,e,n]:[t]},t.uri=function(t,e){if(void 0===e&&(e={}),Object.keys(e).length<=0)return t;for(var n in-1==t.indexOf("?")&&(t+="?"),t.length-1>t.indexOf("?")&&(t+="&"),e)t+="".concat(n,"=").concat(e[n],"&");return t.substring(0,t.length-1)},t}();t.BannerBackend=r}(ne||(ne={})),function(t){var n=function(){function t(){var t=this;this.DEFAULT_IMP_COUNT=4,this.DEFAULT_BACKEND_COUNT=5,this.playerFinish=!1,this.backendCount=0,this.advertStorage={},this.vpaidStorage={},this.indexAdvert=0,this.backendCallAttempts=1,this.impressionCount=0,this.advertReceived=!1,this.isStartAd=!1,this.videoStartedStatus=!1,this.advertsQueue=[],this.OnceAdLoaded=jt((function(){return t.toMiddle.QueueAdLoaded()})),this.duration_event="duration",this.breakpoint_min=3}return t.prototype.getInventoryData=function(){return{ref:C.GetReferer(),placement:c.Instance().GetPlacement(),instrument:c.Instance().GetInstrument(),slot:c.Instance().GetSlot(),size:C.Size(this.width,this.height),target:c.Instance().GetTargetAdvert()}},t.prototype.playVPAID=function(t){this.currentAdvert=this.GetParentAdvert(t),this.currentVpaid=this.vpaidStorage[t]||this.InitVPAID(this.currentAdvert),this.currentAdvert.BackendSend(u.AdLoaded),this.currentStopVpaid&&this.currentStopVpaid.stopAd(),this.initialVolumeBehaviour(this.currentVpaid),this.videoStartedStatus=!0,this.currentVpaid.startAd(),this.currentAdvert.BackendSend(h.startAd),!1===this.isVisible&&this.currentVpaid.pauseAd(),!0===this.isVisible&&this.currentVpaid.resumeAd()},t.prototype.SetMiddle=function(t){this.toMiddle=t},t.prototype.Append=function(t){this.advertStorage[t.ID()]=t;for(var e=Object.keys(this.advertStorage),n=0;n<e.length;n++)this.advertStorage[e[n]].ID()===t.ParentID()&&this.advertStorage[e[n]].SetChild(t.ID())},t.prototype.startAdvert=function(t){this.OnceAdLoaded(),this.playVPAID(t)},t.prototype.SetCurrentSlotHTMLElement=function(t,e){this.slot=t,this.video=e},t.prototype.SetCurrentSlotVideoParams=function(t){this.width=null==t?void 0:t.width,this.height=null==t?void 0:t.height,this.viewMode=null==t?void 0:t.view,this.desiredBitrate=null==t?void 0:t.bitrate},t.prototype.SetVisibilityState=function(t){this.isVisible=t,this.ResumePauseByVisibilityState()},t.prototype.ResumePauseByVisibilityState=function(){!0===this.isVisible&&this.VisiblityCallbackLastCall!=this.resumeAd?(this.VisiblityCallbackLastCall=this.resumeAd,this.resumeAd(),o.backend("[VISIBILITY] is on call resumeAd")):!1===this.isVisible&&this.VisiblityCallbackLastCall!=this.pauseAd&&(this.VisiblityCallbackLastCall=this.pauseAd,this.pauseAd(),o.backend("[VISIBILITY] is off call pauseAd"))},t.prototype.InitVPAID=function(t){return new D(this,t,{slot:this.slot,video:this.video},{width:this.width,height:this.height,viewMode:this.viewMode,bitrate:this.desiredBitrate})},t.prototype.GetCurrentPlayingVPAID=function(){return this.currentVpaid},t.prototype.GetAdvert=function(t){return this.advertStorage[t]},t.prototype.GetParentAdvert=function(t){var e=this.GetAdvert(t);return e.ParentID()?this.GetParentAdvert(e.ParentID()):e},t.prototype.getAdLinear=function(){var t=this.GetCurrentPlayingVPAID();if(void 0!==t)return t.getAdLinear()},t.prototype.getAdWidth=function(){var t=this.GetCurrentPlayingVPAID();if(void 0!==t)return t.getAdWidth()},t.prototype.getAdHeight=function(){var t=this.GetCurrentPlayingVPAID();if(void 0!==t)return t.getAdHeight()},t.prototype.getAdExpanded=function(){var t=this.GetCurrentPlayingVPAID();if(void 0!==t)return t.getAdExpanded()},t.prototype.getAdSkippableState=function(){var t=this.GetCurrentPlayingVPAID();if(void 0!==t)return t.getAdSkippableState()},t.prototype.getAdRemainingTime=function(t){var e=this.GetCurrentPlayingVPAID();if(void 0!==e)return e.getAdRemainingTime()},t.prototype.getAdDuration=function(){var t=this.GetCurrentPlayingVPAID();if(void 0!==t)return t.getAdDuration()},t.prototype.getAdCompanions=function(){var t=this.GetCurrentPlayingVPAID();if(void 0!==t)return t.getAdCompanions()},t.prototype.setAdVolume=function(t){var e=this.GetCurrentPlayingVPAID();if(void 0!==e){e.setAdVolume(t);var n=this.GetParentAdvert(e.GetAdvertID());t>0?n.CallTrackingEventsUnmute():n.CallTrackingEventsMute()}},t.prototype.getAdVolume=function(){var t=this.GetCurrentPlayingVPAID();return void 0!==t?t.getAdVolume():0},t.prototype.getAdIcons=function(){var t=this.GetCurrentPlayingVPAID();if(void 0!==t)return t.getAdIcons()},t.prototype.startAd=function(){},t.prototype.stopAd=function(){},t.prototype.endVideo=function(t){void 0===t&&(t=this.GetCurrentPlayingVPAID()),this.GetParentAdvert(t.GetAdvertID()).BackendSend(h.stopAd),this.videoStartedStatus=!1,t&&(this.currentStopVpaid=t),this.indexAdvert+=1,this.checkLimits()},t.prototype.resizeAd=function(t,e,n){var i=this.GetCurrentPlayingVPAID();void 0!==i&&(i.resizeAd(t,e,n),this.GetParentAdvert(i.GetAdvertID()).BackendSend(h.resizeAd))},t.prototype.pauseAd=function(){this.currentVpaid.pauseAd(),this.currentAdvert.BackendSend(h.pauseAd),this.currentAdvert.CallTrackingEventsPause()},t.prototype.resumeAd=function(){this.currentVpaid.resumeAd(),this.currentAdvert.BackendSend(h.resumeAd),this.currentAdvert.CallTrackingEventsResume()},t.prototype.expandAd=function(){var t=this.GetCurrentPlayingVPAID();if(void 0!==t){t.expandAd();var e=this.GetParentAdvert(t.GetAdvertID());e.BackendSend(h.expandAd),e.CallTrackingEventsExpand(),e.CallTrackingEventsFullscreen()}},t.prototype.collapseAd=function(){var t=this.GetCurrentPlayingVPAID();if(void 0!==t){t.collapseAd();var e=this.GetParentAdvert(t.GetAdvertID());e.BackendSend(h.collapseAd),e.CallTrackingEventsCollapse(),e.CallTrackingEventsExitFullscreen()}},t.prototype.skipAd=function(){var t=this.GetCurrentPlayingVPAID();if(void 0!==t){t.skipAd();var e=this.GetParentAdvert(t.GetAdvertID());e.BackendSend(h.skipAd),e.CallTrackingEventsSkip(),this.endVideo(t)}},t.prototype.AdImpression=function(t){var e;this.impressionCount++;var n=this.currentAdvert;if(n.BackendSend(u.AdImpression),n.CallTrackingImpression(),n.IsRTBIntegration()){var i=null===(e=n.GetOptions().rtb)||void 0===e?void 0:e.burl;i&&n.BackendSend(l.AdBannerNURL,[i])}this.handleImpressionWebmaster(u.AdImpression,n),this.handleDurationImpressionWebmaster(n)},t.prototype.AdLoaded=function(t){},t.prototype.AdStarted=function(t){this.isStartAd=!0;var e=this.GetParentAdvert(t);e.BackendSend(u.AdStarted),e.CallTrackingEventsCreativeView(),this.toMiddle.QueueAdStarted()},t.prototype.AdRemainingTimeChange=function(t){this.toMiddle.QueueAdRemainingTimeChange()},t.prototype.AdDurationChange=function(t){this.toMiddle.QueueAdDurationChange()},t.prototype.AdLog=function(t){this.GetParentAdvert(t).BackendSend(u.AdLog),this.toMiddle.QueueAdLog()},t.prototype.AdTime=function(t){},t.prototype.AdError=function(t){this.advertsQueue[this.indexAdvert]&&(this.advertsQueue[this.indexAdvert].BackendSend(u.AdError),this.advertsQueue[this.indexAdvert].CallTrackingError(),this.VisiblityCallbackLastCall=void 0,this.endVideo())},t.prototype.AdInteraction=function(t){this.GetParentAdvert(t).BackendSend(u.AdInteraction),this.toMiddle.QueueAdInteraction()},t.prototype.AdClickThru=function(t,e,n){var i=this.GetParentAdvert(t);!1!==i.CanPassThruClick()&&(i.BackendSend(u.AdClickThru),i.CallVideoClicksClickTracking(),n&&i.CallVideoClicksClickTrough(),this.toMiddle.QueueAdClickThru(e,n),this.handleImpressionWebmaster(u.AdClickThru,i),n&&"string"==typeof e&&e.length>0&&window.open(e))},t.prototype.AdUserMinimize=function(t){this.GetParentAdvert(t).BackendSend(u.AdUserMinimize),this.toMiddle.QueueAdUserMinimize()},t.prototype.AdUserClose=function(t){var e=this.GetParentAdvert(t);e.BackendSend(u.AdUserClose),e.CallTrackingEventsCloseLinear(),this.AdUserCloseSyncByTracks(),this.VisiblityCallbackLastCall=void 0},t.prototype.AdUserAcceptInvitation=function(t){var e=this.GetParentAdvert(t);e.BackendSend(u.AdUserAcceptInvitation),e.CallTrackingEventsAcceptInvitationLinear(),this.toMiddle.QueueAdUserAcceptInvitation()},t.prototype.AdVideoFirstQuartile=function(t){var e=this.GetParentAdvert(t);e.BackendSend(u.AdVideoFirstQuartile),e.CallTrackingEventsFirstQuartile(),this.toMiddle.QueueAdVideoFirstQuartile(),this.handleImpressionWebmaster(u.AdVideoFirstQuartile,e)},t.prototype.AdVideoMidpoint=function(t){var e=this.GetParentAdvert(t);e.BackendSend(u.AdVideoMidpoint),e.CallTrackingEventsMidpoint(),this.toMiddle.QueueAdVideoMidPoint(),this.handleImpressionWebmaster(u.AdVideoMidpoint,e)},t.prototype.AdVideoThirdQuartile=function(t){var e=this.GetParentAdvert(t);e.BackendSend(u.AdVideoThirdQuartile),e.CallTrackingEventsThirdQuartile(),this.toMiddle.QueueAdVideoThirdQuartile(),this.handleImpressionWebmaster(u.AdVideoThirdQuartile,e)},t.prototype.AdVideoComplete=function(t){var e=this.GetParentAdvert(t);e.BackendSend(u.AdVideoComplete),e.CallTrackingEventsComplete(),this.handleImpressionWebmaster(u.AdVideoComplete,e),this.AdVideoCompleteSyncByTracks()},t.prototype.AdVideoStart=function(t){this.advertReceived=!0;var e=this.GetParentAdvert(t);e.BackendSend(u.AdVideoStart),e.CallTrackingEventsStart(),this.handleMRCVisibility(e),this.handleClickDelay(e),this.toMiddle.QueueAdVideoStart()},t.prototype.AdVolumeChange=function(t){this.GetParentAdvert(t).BackendSend(u.AdVolumeChange,[this.getAdVolume()]),this.toMiddle.QueueAdVolumeChange()},t.prototype.AdLinearChange=function(t){this.GetParentAdvert(t).BackendSend(u.AdLinearChange),this.toMiddle.QueueAdLinearChange()},t.prototype.AdSkippableStateChange=function(t){this.GetParentAdvert(t).BackendSend(u.AdSkippableStateChange),this.toMiddle.QueueAdSkippableStateChange()},t.prototype.AdExpandedChange=function(t){this.GetParentAdvert(t).BackendSend(u.AdExpandedChange),this.toMiddle.QueueAdExpandedChange()},t.prototype.AdPlaying=function(t){this.GetParentAdvert(t).BackendSend(u.AdPlaying),this.toMiddle.QueueAdPlaying()},t.prototype.AdPaused=function(t){this.GetParentAdvert(t).BackendSend(u.AdPaused),this.toMiddle.QueueAdPaused()},t.prototype.AdSizeChange=function(t){this.GetParentAdvert(t).BackendSend(u.AdSizeChange),this.toMiddle.QueueAdSizeChange()},t.prototype.AdSkipped=function(t){this.GetParentAdvert(t).BackendSend(u.AdSkipped),this.toMiddle.QueueAdSkipped()},t.prototype.AdStopped=function(t){var e=this.vpaidStorage[t];this.endVideo(e),this.GetParentAdvert(t).BackendSend(u.AdStopped),this.VisiblityCallbackLastCall=void 0},t.prototype.AdBannerNURL=function(t,e){this.currentAdvert.BackendSend(l.AdBannerNURL,[e])},t.prototype.checkLimits=function(){if(!this.videoStartedStatus&&!this.playerFinish)return this.isEnoughImpressions()?this.sendCallBack():this.isHasAdvertsToPlayInBucket()?this.nextPlayAdvert(this.indexAdvert):this.isHasBackendAttempts()?this.nextVast():this.sendCallBack()},t.prototype.isEnoughImpressions=function(){var t=c.Instance().getConfig().advertCount;return void 0===t&&(t=this.DEFAULT_IMP_COUNT),0!==t&&this.impressionCount>=t},t.prototype.isHasAdvertsToPlayInBucket=function(){return void 0!==this.advertsQueue[this.indexAdvert]},t.prototype.isHasBackendAttempts=function(){var t=c.Instance().getConfig().advertCount,e=c.Instance().getConfig().backendCount;return 0===t||(void 0===e&&(e=t),void 0!==this.backendCount&&0!==this.backendCount||(this.backendCount=e),this.backendCount>this.backendCallAttempts)},t.prototype.nextPlayAdvert=function(t){this.advertsQueue[t]||this.AdError(this.advertsQueue[t].ID()),this.startAdvert(this.advertsQueue[t].ID())},t.prototype.nextVast=function(){this.advertsQueue=[],this.indexAdvert=0,this.backendCallAttempts+=1;var t=this.getInventoryData();ne.GetInstance().startVast(t)},t.prototype.sendCallBack=function(){return this.playerFinish=!0,this.toMiddle.QueueAdStopped(),this.isStartAd?this.toMiddle.QueueAdFinish():this.advertReceived?this.toMiddle.QueueAdError():this.toMiddle.QueueAdErrorEmpty()},t.prototype.AdVideoCompleteSyncByTracks=function(){var t=this,e=setInterval((function(){c.Instance().IsTrackCallStackEmpty()&&(clearInterval(e),t.toMiddle.QueueAdVideoComplete())}),100)},t.prototype.AdUserCloseSyncByTracks=function(){var t=this,e=setInterval((function(){var n;c.Instance().IsTrackCallStackEmpty()&&(clearInterval(e),null===(n=t.toMiddle)||void 0===n||n.QueueAdUserClose())}),100)},t.prototype.isCanSendEvent=function(){return c.Instance().GetInstrument()===e.VastVPaid||Math.round(Math.floor(101*Math.random()))>6},t.prototype.handleImpressionWebmaster=function(t,e){t===e.GetOptions().payPlayerEvent&&!1!==this.isCanSendEvent()&&(e.BackendSend(ne.PBCEventName(ne.PlayerBackendCommunicationEvent.MVImpressionWebmaster)),this.sendORD(e),this.toMiddle.QueueAdImpression())},t.prototype.handleDurationImpressionWebmaster=function(t){var e=this,n=t.GetOptions().payPlayerEvent.split("_");if(n[0]===this.duration_event&&!1!==this.isCanSendEvent()){var i=+n[1];i<this.breakpoint_min&&(i=this.breakpoint_min);var o=setInterval((function(){if(e.currentVpaid.getAdDuration()-e.currentVpaid.getAdRemainingTime()>i)return t.BackendSend(ne.PBCEventName(ne.PlayerBackendCommunicationEvent.MVImpressionWebmaster)),e.sendORD(t),e.toMiddle.QueueAdImpression(),clearInterval(o)}),170)}},t.prototype.handleClickDelay=function(t){var e=0,n=1e3*t.GetClickDelayDuration();if(!(n<=0))var i=setInterval((function(){(e+=100)>=n&&(t.AllowPassThruClick(),clearInterval(i))}),160)},t.prototype.sendORD=function(t){t.GetOrd()&&t.BackendSend(v.AdORD,[t.GetOrd()])},t.prototype.handleMRCVisibility=function(t){var e=this,n=this.getAdRemainingTime(t),i=setInterval((function(){if(void 0===e.getAdRemainingTime)return clearInterval(i);if(!(n<=0)){var o=n-e.getAdRemainingTime(t);return isNaN(o)||o>n?clearInterval(i):o>=3?(t.BackendSend(ne.PBCEventName(ne.PlayerBackendCommunicationEvent.MVMRCVisibility)),clearInterval(i)):void 0}n=e.getAdRemainingTime(t)}),120)},t.prototype.initialVolumeBehaviour=function(t){var e=c.Instance().GetInitialVolumeLevel();this.GetParentAdvert(t.GetAdvertID()).IsNeedForeignFrame()&&(e=0),t.setAdVolume(e),o.info('vpaid (id:"'.concat(t.GetAdvertID(),'") initial set "').concat(f.setAdVolume,'" -> ').concat(e))},t}();t.Queue=n;var i=new n;t.GetInstance=function(){return i}}(ie||(ie={}));var se,de=function(){function t(){}return t.prototype.setMiddle=function(t){this.mediator=t},t.prototype.setQueue=function(t){this.queue=t},t.prototype.GetAdLinear=function(){return this.queue.getAdLinear()},t.prototype.GetAdWidth=function(){return this.queue.getAdWidth()},t.prototype.GetAdHeight=function(){return this.queue.getAdHeight()},t.prototype.GetAdExpanded=function(){return this.queue.getAdExpanded()},t.prototype.GetAdSkippableState=function(){return this.queue.getAdSkippableState()},t.prototype.GetAdRemainingTime=function(){return this.queue.getAdRemainingTime()},t.prototype.GetAdDuration=function(){return this.queue.getAdDuration()},t.prototype.GetAdCompanions=function(){return this.queue.getAdCompanions()},t.prototype.SetAdVolume=function(t){this.queue.setAdVolume(t)},t.prototype.GetAdVolume=function(){return this.queue.getAdVolume()},t.prototype.GetAdIcons=function(){return this.queue.getAdIcons()},t.prototype.startAd=function(){this.queue.startAd()},t.prototype.stopAd=function(){this.queue.stopAd()},t.prototype.resizeAd=function(t,e,n){this.queue.resizeAd(t,e,n)},t.prototype.pauseAd=function(){this.queue.pauseAd()},t.prototype.resumeAd=function(){this.queue.resumeAd()},t.prototype.expandAd=function(){this.queue.expandAd()},t.prototype.collapseAd=function(){this.queue.collapseAd()},t.prototype.skipAd=function(){this.queue.skipAd()},t.prototype.QueueAdLoaded=function(){this.mediator.AdLoaded()},t.prototype.QueueAdImpression=function(){this.mediator.AdImpression()},t.prototype.QueueAdStarted=function(){this.mediator.AdStarted()},t.prototype.QueueAdRemainingTimeChange=function(){this.mediator.AdRemainingTimeChange()},t.prototype.QueueAdDurationChange=function(){this.mediator.AdDurationChange()},t.prototype.QueueAdLog=function(){this.mediator.AdLog()},t.prototype.QueueAdError=function(){this.mediator.AdError()},t.prototype.QueueAdErrorEmpty=function(){this.mediator.AdErrorEmpty()},t.prototype.QueueAdFinish=function(){this.mediator.AdFinish()},t.prototype.QueueAdInteraction=function(){this.mediator.AdInteraction()},t.prototype.QueueAdClickThru=function(t,e){this.mediator.AdClickThru(t,e)},t.prototype.QueueAdUserMinimize=function(){this.mediator.AdUserMinimize()},t.prototype.QueueAdUserClose=function(){this.mediator.AdUserClose()},t.prototype.QueueAdUserAcceptInvitation=function(){this.mediator.AdUserAcceptInvitation()},t.prototype.QueueAdVideoComplete=function(){this.mediator.AdVideoComplete()},t.prototype.QueueAdVideoThirdQuartile=function(){this.mediator.AdVideoThirdQuartile()},t.prototype.QueueAdVideoMidPoint=function(){this.mediator.AdVideoMidPoint()},t.prototype.QueueAdVideoFirstQuartile=function(){this.mediator.AdVideoFirstQuartile()},t.prototype.QueueAdVideoStart=function(){this.mediator.AdVideoStart()},t.prototype.QueueAdVolumeChange=function(){this.mediator.AdVolumeChange()},t.prototype.QueueAdLinearChange=function(){this.mediator.AdLinearChange()},t.prototype.QueueAdSkippableStateChange=function(){this.mediator.AdSkippableStateChange()},t.prototype.QueueAdExpandedChange=function(){this.mediator.AdExpandedChange()},t.prototype.QueueAdPlaying=function(){this.mediator.AdPlaying()},t.prototype.QueueAdSizeChange=function(){this.mediator.AdSizeChange()},t.prototype.QueueAdPaused=function(){this.mediator.AdPaused()},t.prototype.QueueAdSkipped=function(){this.mediator.AdSkipped()},t.prototype.QueueAdStopped=function(){this.mediator.AdStopped()},t.prototype.SetVisibilityState=function(t){this.queue.SetVisibilityState(t)},t}(),ce=function(){function t(){}return t.prototype.initAd=function(t,n,i,o,r,a){var s,d;c.Instance().GetInstrument()===e.Banner?(this.backend=ne,this.queue=ie):(this.backend=Ut,this.queue=Ht),c.Instance().SetWidth(t),c.Instance().SetHeigth(n),c.Instance().SetViewMode(i),c.Instance().SetDesiredBitrate(o);var p={ref:C.GetReferer(),placement:c.Instance().GetPlacement(),instrument:c.Instance().GetInstrument(),slot:c.Instance().GetSlot(),size:C.Size(t,n),target:c.Instance().GetTargetAdvert()},u=new this.queue.Queue;this.backend.GetInstance().SendMVInventory(p),null===(d=(s=this.queue).SetInstance)||void 0===d||d.call(s,u),this.queue.GetInstance().SetCurrentSlotHTMLElement(a.slot,a.videoSlot),this.queue.GetInstance().SetCurrentSlotVideoParams({width:t,height:n,view:i,bitrate:o});var l=new de;this.setMiddleToQueue(l),l.setQueue(this.queue.GetInstance()),l.setMiddle(this),this.queue.GetInstance().SetMiddle(l)},t.prototype.setInstrument=function(t){this.instrument=t},t.prototype.setMiddleToQueue=function(t){this.middleToQueue=t},t.prototype.GetAdLinear=function(){var t=this.middleToQueue.GetAdLinear();return o.info('vpaid mediator "'.concat(f.getAdLinear,'" ').concat(t)),t},t.prototype.GetAdWidth=function(){var t=this.middleToQueue.GetAdWidth();return o.info('vpaid mediator "'.concat(f.getAdWidth,'" ').concat(t)),t},t.prototype.GetAdHeight=function(){var t=this.middleToQueue.GetAdHeight();return o.info('vpaid mediator "'.concat(f.getAdHeight,'" ').concat(t)),t},t.prototype.GetAdExpanded=function(){var t=this.middleToQueue.GetAdExpanded();return o.info('vpaid mediator "'.concat(f.getAdExpanded,'" ').concat(t)),t},t.prototype.GetAdSkippableState=function(){var t=this.middleToQueue.GetAdSkippableState();return o.info('vpaid mediator "'.concat(f.getAdSkippableState,'" ').concat(t)),t},t.prototype.GetAdRemainingTime=function(){var t=this.middleToQueue.GetAdRemainingTime();return o.info('vpaid mediator "'.concat(f.getAdRemainingTime,'" ').concat(t)),t},t.prototype.GetAdDuration=function(){var t=this.middleToQueue.GetAdDuration();return o.info('vpaid mediator "'.concat(f.getAdDuration,'" ').concat(t)),t},t.prototype.GetAdCompanions=function(){var t=this.middleToQueue.GetAdCompanions();return o.info('vpaid mediator "'.concat(f.getAdCompanions,'" ').concat(t)),t},t.prototype.SetAdVolume=function(t){var e;o.info('vpaid mediator "'.concat(f.setAdVolume,'" ').concat(t)),null===(e=this.middleToQueue)||void 0===e||e.SetAdVolume(t)},t.prototype.GetAdVolume=function(){var t=this.middleToQueue.GetAdVolume();return o.info('vpaid mediator "'.concat(f.getAdVolume,'" ').concat(t)),t},t.prototype.GetAdIcons=function(){var t,e=null===(t=this.middleToQueue)||void 0===t?void 0:t.GetAdIcons();return o.info('vpaid mediator "'.concat(f.getAdIcons,'" ').concat(e)),e},t.prototype.startAd=function(){o.info('vpaid mediator "'.concat(h.startAd,'"')),this.middleToQueue.startAd()},t.prototype.stopAd=function(){var t;o.info('vpaid mediator "'.concat(h.stopAd,'"')),null===(t=this.middleToQueue)||void 0===t||t.stopAd()},t.prototype.resizeAd=function(t,e,n){var i;o.info('vpaid mediator "'.concat(h.resizeAd," ").concat(t,", ").concat(e,", ").concat(n,'"')),null===(i=this.middleToQueue)||void 0===i||i.resizeAd(t,e,n)},t.prototype.pauseAd=function(){o.info('vpaid mediator "'.concat(h.pauseAd,'"')),this.middleToQueue.pauseAd()},t.prototype.resumeAd=function(){o.info('vpaid mediator "'.concat(h.resumeAd,'"')),this.middleToQueue.resumeAd()},t.prototype.expandAd=function(){o.info('vpaid mediator "'.concat(h.expandAd,'"')),this.middleToQueue.expandAd()},t.prototype.collapseAd=function(){o.info('vpaid mediator "'.concat(h.collapseAd,'"')),this.middleToQueue.collapseAd()},t.prototype.skipAd=function(){o.info('vpaid mediator "'.concat(h.skipAd,'"')),this.middleToQueue.skipAd()},t.prototype.AdLoaded=function(){o.info('vpaid mediator "'.concat(u.AdLoaded,'"')),this.instrument.AdLoaded.call(this.instrument,!0)},t.prototype.AdStarted=function(){o.info('vpaid mediator "'.concat(u.AdStarted,'"')),this.instrument.AdStarted.call(this.instrument,!0)},t.prototype.AdStopped=function(){o.info('vpaid mediator "'.concat(u.AdStopped,'"')),this.instrument.AdStopped.call(this.instrument,!0)},t.prototype.AdSkipped=function(){o.info('vpaid mediator "'.concat(u.AdSkipped,'"')),this.instrument.AdSkipped.call(this.instrument,!0)},t.prototype.AdPaused=function(){o.info('vpaid mediator "'.concat(u.AdPaused,'"')),this.instrument.AdPaused.call(this.instrument,!0)},t.prototype.AdSizeChange=function(){o.info('vpaid mediator "'.concat(u.AdSizeChange,'"')),this.instrument.AdSizeChange.call(this.instrument,!0)},t.prototype.AdPlaying=function(){o.info('vpaid mediator "'.concat(u.AdPlaying,'"')),this.instrument.AdPlaying.call(this.instrument,!0)},t.prototype.AdExpandedChange=function(){o.info('vpaid mediator "'.concat(u.AdExpandedChange,'"')),this.instrument.AdExpandedChange.call(this.instrument,!0)},t.prototype.AdSkippableStateChange=function(){o.info('vpaid mediator "'.concat(u.AdSkippableStateChange,'"')),this.instrument.AdSkippableStateChange.call(this.instrument,!0)},t.prototype.AdLinearChange=function(){o.info('vpaid mediator "'.concat(u.AdLinearChange,'"')),this.instrument.AdLinearChange.call(this.instrument,!0)},t.prototype.AdVolumeChange=function(){o.info('vpaid mediator "'.concat(u.AdVolumeChange,'"')),this.instrument.AdVolumeChange.call(this.instrument,!0)},t.prototype.AdVideoStart=function(){o.info('vpaid mediator "'.concat(u.AdVideoStart,'"')),this.instrument.AdVideoStart.call(this.instrument,!0)},t.prototype.AdVideoFirstQuartile=function(){o.info('vpaid mediator "'.concat(u.AdVideoFirstQuartile,'"')),this.instrument.AdVideoFirstQuartile.call(this.instrument,!0)},t.prototype.AdVideoMidPoint=function(){o.info('vpaid mediator "'.concat(u.AdVideoMidpoint,'"')),this.instrument.AdVideoMidPoint.call(this.instrument,!0)},t.prototype.AdVideoThirdQuartile=function(){o.info('vpaid mediator "'.concat(u.AdVideoThirdQuartile,'"')),this.instrument.AdVideoThirdQuartile.call(this.instrument,!0)},t.prototype.AdVideoComplete=function(){o.info('vpaid mediator "'.concat(u.AdVideoComplete,'"')),this.instrument.AdVideoComplete.call(this.instrument,!0)},t.prototype.AdUserAcceptInvitation=function(){o.info('vpaid mediator "'.concat(u.AdUserAcceptInvitation,'"')),this.instrument.AdUserAcceptInvitation.call(this.instrument,!0)},t.prototype.AdUserClose=function(){o.info('vpaid mediator "'.concat(u.AdUserClose,'"')),this.instrument.AdUserClose.call(this.instrument,!0)},t.prototype.AdUserMinimize=function(){o.info('vpaid mediator "'.concat(u.AdUserMinimize,'"')),this.instrument.AdUserMinimize.call(this.instrument,!0)},t.prototype.AdClickThru=function(t,e){o.info('vpaid mediator "'.concat(u.AdClickThru,'"')),this.instrument.AdClickThru.call(this.instrument,!0)},t.prototype.AdInteraction=function(){o.info('vpaid mediator "'.concat(u.AdInteraction,'"')),this.instrument.AdInteraction.call(this.instrument,!0)},t.prototype.AdError=function(){o.info('vpaid mediator "'.concat(u.AdError,'"')),this.instrument.AdError.call(this.instrument,!0)},t.prototype.AdErrorEmpty=function(){o.info('vpaid mediator "'.concat(v.AdErrorEmpty,'"')),this.instrument.AdErrorEmpty.call(this.instrument,!0)},t.prototype.AdFinish=function(){o.info('vpaid mediator "'.concat(v.AdFinish,'"')),this.instrument.AdFinish.call(this.instrument,!0)},t.prototype.AdLog=function(){o.info('vpaid mediator "'.concat(u.AdLog,'"')),this.instrument.AdLog.call(this.instrument,!0)},t.prototype.AdDurationChange=function(){o.info('vpaid mediator "'.concat(u.AdDurationChange,'"')),this.instrument.AdDurationChange.call(this.instrument,!0)},t.prototype.AdRemainingTimeChange=function(){o.info('vpaid mediator "'.concat(u.AdRemainingTimeChange,'"')),this.instrument.AdRemainingTimeChange.call(this.instrument,!0)},t.prototype.AdImpression=function(){o.info('vpaid mediator "'.concat(u.AdImpression,'"')),this.instrument.AdImpression.call(this.instrument,!0)},t.prototype.SetVisibilityState=function(t){this.middleToQueue.SetVisibilityState(t)},t}(),pe=function(){function t(){}return t.FlyZIndex=function(t){var e,n,i=parseInt(null===(n=null===(e=t.style)||void 0===e?void 0:e.fly)||void 0===n?void 0:n.zindex);return!0===isNaN(i)?"999999999999999":i.toString()},t.FloatLeftPatchForInStreamRoll=function(t){var e,n;return null===(n=null===(e=t.style)||void 0===e?void 0:e.ir)||void 0===n?void 0:n.fl},t.ExactOnePlayer=function(t){var e,n;return!0===(null===(n=null===(e=null==t?void 0:t.style)||void 0===e?void 0:e.cr)||void 0===n?void 0:n.exactone)},t}(),ue=function(){function t(t){var e=this;this.isClose=!1,this.firstFly=!0,this.position={"top-right":"top: 0px; right: 0px;","top-left":"top: 0px; left: 0px;","bottom-right":"bottom: 0px; right: 0px;","bottom-left":"bottom: 0px; left: 0px;","top-center":"top: 0px; left: 50%; transform: translate(-50%, 0%);","bottom-center":"bottom: 0px; left: 50%; transform: translate(-50%, 0%);","center-right":"right: 0px; top: 50%; transform: translate(0%, -50%);","center-left":"left: 0px; top: 50%; transform: translate(0%, -50%);",unset:"left: unset; right: unset; top: unset; bottom: unset; translate: unset;"},this.positionWithIndents={"top-right":function(t){return"top: ".concat(e.getIndents(t.top,t.bottom),"px;\n                    right: ").concat(e.getIndents(t.right,t.left),"px;")},"top-left":function(t){return"top: ".concat(e.getIndents(t.top,t.bottom),"px;\n                    left: ").concat(e.getIndents(t.left,t.right),"px;")},"bottom-right":function(t){return"bottom: ".concat(e.getIndents(t.bottom,t.top),"px;\n                    right: ").concat(e.getIndents(t.right,t.left),"px;")},"bottom-left":function(t){return"bottom: ".concat(e.getIndents(t.bottom,t.top),"px;\n                    left: ").concat(e.getIndents(t.left,t.right),"px;")},"top-center":function(t){return"top: ".concat(e.getIndents(t.top,t.bottom),"px;\n                    left: calc(50% + ").concat(e.getIndents(t.left,0),"px - ").concat(e.getIndents(t.right,0),"px);\n                    transform: translate(-50%, 0%);")},"bottom-center":function(t){return"bottom: ".concat(e.getIndents(t.bottom,t.top),"px;\n                    left: calc(50% + ").concat(e.getIndents(t.left,0),"px - ").concat(e.getIndents(t.right,0),"px);\n                    transform: translate(-50%, 0%);")},"center-right":function(t){return"right: ".concat(e.getIndents(t.right,t.left),"px;\n                    top: calc(50% + ").concat(e.getIndents(t.top,0),"px - ").concat(e.getIndents(t.bottom,0),"px);\n                    transform: translate(0%, -50%);")},"center-left":function(t){return"left: ".concat(e.getIndents(t.left,t.right),"px;\n                    top: calc(50% + ").concat(e.getIndents(t.top,0),"px - ").concat(e.getIndents(t.bottom,0),"px);\n                    transform: translate(0%, -50%);")}},this.positionMobile={top:"top: 0px;",center:"top: 50%; transform: translate(0%, -50%);",bottom:"bottom: 0px;"},this.fly=!1,this.IsCanRenderCloseButton=!1,this.config=t.config,this.createClose(t.slot),this.element=t.element,this.slot=t.slot,this.wrapper=t.wrapper,this.widthContentRoll=t.width,this.resizeAd=t.resizeAd,this.resumeAd=t.resumeAd,this.videoStatusPlay=t.videoStatusPlay,this.playerClose=t.playerClose}return t.prototype.start=function(){var t,e,n=this;"off"!==(null===(t=this.config.fly)||void 0===t?void 0:t.mode)&&("stick"===(null===(e=this.config.fly)||void 0===e?void 0:e.mode)&&(this.wrapper.style.height="0",this.goFly()),window.onscroll=function(){var t,e,i=n.isVisible(n.wrapper);"bottom"===(null===(t=n.config.fly)||void 0===t?void 0:t.mode)&&n.firstFly&&!i||n.isClose||("stick"===(null===(e=n.config.fly)||void 0===e?void 0:e.mode)&&(n.fly=!1,i=!1),n.firstFly=!1,i?n.goContent():n.goFly())})},t.prototype.isVisible=function(t){var e=t.getBoundingClientRect(),n=document.documentElement.clientHeight,i=e.top>0&&e.top<n,o=e.bottom<n&&e.bottom>0;return i||o},t.prototype.getIndents=function(t,e){var n=parseInt(null==t?void 0:t.toString())-parseInt(null==e?void 0:e.toString());return isNaN(n)?0:n},t.prototype.goFly=function(){var t,e,n;this.fly||(this.showClose(),C.isMobile()?(this.slot.style.cssText=this.positionMobile[this.config.fly.positionMobile]||this.positionMobile.bottom,this.slot.style.width=this.element.clientWidth+"px",this.slot.style.height=this.element.clientWidth/16*9+"px",this.slot.style.border="none",n=this.element.clientWidth/16*9):(this.config.fly.indent?this.slot.style.cssText=(null===(e=null===(t=this.positionWithIndents)||void 0===t?void 0:t[this.config.fly.position])||void 0===e?void 0:e.call(t,this.config.fly.indent))||this.position["bottom-right"]:this.slot.style.cssText=this.position[this.config.fly.position]||this.position["bottom-right"],this.slot.style.width=this.config.fly.width+"px"||0,this.slot.style.height=this.config.fly.width/16*9+"px",n=this.config.fly.width/16*9),this.slot.style.position="fixed",this.slot.style.zIndex=pe.FlyZIndex(this.config),this.slot.style.margin="0",this.slot.style.padding="0",this.fly=!0,this.resizeAd(parseInt(this.slot.style.width),n,"normal"),setTimeout(this.resumeAd,100))},t.prototype.goContent=function(){var t;this.fly&&(this.hideClose(),this.slot.style.cssText=this.position.unset,this.slot.style.position="relative",this.slot.style.zIndex=null,this.slot.style.margin="auto",this.slot.style.paddingBottom="0",this.slot.style.padding="0",this.fly=!1,this.hideClose(),clearTimeout(this.closeTimer),this.slot.style.width=this.element.clientWidth+"px",this.slot.style.height=this.wrapper.style.height=this.element.clientWidth/16*9+"px",t=this.element.clientWidth/16*9,this.resizeAd(parseInt(this.slot.style.width),t,"normal"),setTimeout(this.resumeAd,100))},t.prototype.createClose=function(t){var e,n,i,o,r,a=this;this.close=document.createElement("div");this.close.addEventListener("click",function(){var t;a.playerClose&&a.playerClose(),"stick"===(null===(t=a.config.fly)||void 0===t?void 0:t.mode)&&a.wrapper.remove(),a.goContent(),a.isClose=!0}.bind(this)),this.close.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 512 512" version="1.1"><path d="M 121.500 34.021 C 98.296 38.926, 79.329 49.513, 62.853 66.758 C 49.542 80.691, 40.404 96.871, 35.199 115.723 L 32.500 125.500 32.500 256 L 32.500 386.500 35.199 396.277 C 38.319 407.576, 44.883 421.993, 51.031 431.045 C 56.559 439.186, 68.629 451.794, 76.949 458.119 C 85.953 464.964, 103.497 473.441, 115.500 476.746 L 125.500 479.500 256 479.500 L 386.500 479.500 396.500 476.746 C 408.503 473.441, 426.047 464.964, 435.051 458.119 C 443.371 451.794, 455.441 439.186, 460.969 431.045 C 467.117 421.993, 473.681 407.576, 476.801 396.277 L 479.500 386.500 479.500 256 L 479.500 125.500 476.801 115.723 C 473.681 104.424, 467.117 90.007, 460.969 80.955 C 455.441 72.814, 443.371 60.206, 435.051 53.881 C 426.046 47.036, 408.503 38.559, 396.500 35.254 L 386.500 32.501 258.500 32.310 C 136.101 32.127, 130.106 32.202, 121.500 34.021 M 134.061 65.070 C 101.764 69.336, 75.733 92.314, 66.736 124.500 L 64.500 132.500 64.500 256 L 64.500 379.500 66.736 387.500 C 74.709 416.021, 95.979 437.291, 124.500 445.264 L 132.500 447.500 256 447.500 L 379.500 447.500 387.500 445.264 C 416.021 437.291, 437.291 416.021, 445.264 387.500 L 447.500 379.500 447.500 256 L 447.500 132.500 445.256 124.500 C 437.218 95.846, 416.036 74.668, 387.500 66.754 L 379.500 64.535 260 64.377 C 194.275 64.290, 137.602 64.602, 134.061 65.070 M 184.218 177.663 C 177.881 180.787, 174.876 188.156, 176.463 196.687 C 177.078 199.993, 180.842 204.187, 204.796 228.250 L 232.420 256 204.796 283.750 C 174.962 313.720, 175.018 313.643, 176.275 323.017 C 177.608 332.949, 188.533 338.762, 198.685 334.940 C 200.233 334.357, 213.762 321.656, 228.750 306.714 L 256 279.548 283.250 306.714 C 298.238 321.656, 311.767 334.357, 313.315 334.940 C 323.467 338.762, 334.392 332.949, 335.725 323.017 C 336.982 313.643, 337.038 313.720, 307.204 283.750 L 279.580 256 307.204 228.250 C 337.038 198.280, 336.982 198.357, 335.725 188.983 C 334.392 179.051, 323.467 173.238, 313.315 177.060 C 311.767 177.643, 298.238 190.344, 283.250 205.286 L 256 232.452 228.750 205.286 C 213.762 190.344, 200.233 177.643, 198.685 177.060 C 194.605 175.524, 188 175.799, 184.218 177.663" stroke="none" fill="#040404" fill-rule="evenodd"/><path d="M 136.500 65.006 C 117.430 67.122, 101.168 74.832, 88 88 C 77.660 98.340, 70.464 111.096, 66.751 125.667 L 64.500 134.500 64.500 256 L 64.500 377.500 66.751 386.333 C 71.549 405.163, 83.409 422.617, 98.423 432.947 C 105.688 437.946, 118.638 443.604, 127.500 445.652 C 135.046 447.395, 142.344 447.500, 256 447.500 C 392.971 447.500, 383.923 448.025, 402.500 438.994 C 419.684 430.640, 430.640 419.684, 438.994 402.500 C 448.025 383.923, 447.500 392.971, 447.500 256 C 447.500 142.344, 447.395 135.046, 445.652 127.500 C 443.604 118.638, 437.946 105.688, 432.947 98.423 C 422.772 83.633, 405.408 71.724, 386.847 66.803 L 378.500 64.590 261 64.410 C 196.375 64.311, 140.350 64.579, 136.500 65.006 M 183.241 177.995 C 178.419 180.935, 176.008 185.538, 176.004 191.816 C 176.002 194.739, 176.497 198.114, 177.105 199.316 C 177.713 200.517, 190.423 213.762, 205.349 228.750 L 232.486 256 205.349 283.250 C 190.423 298.238, 177.713 311.483, 177.105 312.684 C 176.497 313.886, 176.002 317.261, 176.004 320.184 C 176.011 329.945, 182.055 335.989, 191.816 335.996 C 194.739 335.998, 198.114 335.503, 199.316 334.895 C 200.517 334.287, 213.762 321.577, 228.750 306.651 L 256 279.514 283.250 306.651 C 298.238 321.577, 311.483 334.287, 312.684 334.895 C 313.886 335.503, 317.261 335.998, 320.184 335.996 C 329.945 335.989, 335.989 329.945, 335.996 320.184 C 335.998 317.261, 335.503 313.886, 334.895 312.684 C 334.287 311.483, 321.577 298.238, 306.651 283.250 L 279.514 256 306.651 228.750 C 321.577 213.762, 334.287 200.517, 334.895 199.316 C 335.503 198.114, 335.998 194.739, 335.996 191.816 C 335.989 182.055, 329.945 176.011, 320.184 176.004 C 317.261 176.002, 313.886 176.497, 312.684 177.105 C 311.483 177.713, 298.238 190.423, 283.250 205.349 L 256 232.486 228.750 205.349 C 213.762 190.423, 200.517 177.713, 199.316 177.105 C 195.697 175.274, 186.906 175.760, 183.241 177.995" stroke="none" fill="#fcfcfc" fill-rule="evenodd"/></svg>',this.close.style.zIndex="999999",this.close.style.cursor="pointer",this.close.style.position="absolute",C.isMobile()?this.setClosePosition("top"===(null===(n=null===(e=null==this?void 0:this.config)||void 0===e?void 0:e.fly)||void 0===n?void 0:n.positionMobile)):this.setClosePosition(null===(r=null===(o=null===(i=null==this?void 0:this.config)||void 0===i?void 0:i.fly)||void 0===o?void 0:o.position)||void 0===r?void 0:r.includes("top")),this.close.style.right="1px",this.close.style.display="none",t.append(this.close)},t.prototype.setClosePosition=function(t){t?this.close.style.bottom="-34px":this.close.style.top="-30px"},t.prototype.showClose=function(){!1!==this.IsCanRenderCloseButton&&this.videoStatusPlay()&&(this.close.style.display="block")},t.prototype.hideClose=function(){this.close.style.display="none"},t.prototype.getStatus=function(){return this.fly},t}(),le=function(){return le=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},le.apply(this,arguments)},he=function(){function t(t){this.isIntegration=!1,this.AD_EMPTY_TIMEOUT=4e3,this.htmlString='\n    <div id="mv-top-bar">\n\t\t\t<a id="mv-logo" href="https://moevideo.club/">\n\t\t\t\t<img id="mv-logo-text" height="20px" class="mv-logo-img" src="https://cdn1.moe.video/big_mv_logo.png">\n\t\t\t</a>\n            <div id="mv-ads"></div>\n\t\t</div>\n    ',this.videoStatusPlay=!1,this.vpaidMediator=new ce,this.config=t,this.width=this.getWidth(t.width,t.element),this.height=this.width/16*9,window.addEventListener("message",this.receiveMessage.bind(this),!1),document.body.clientWidth<parseInt(t.width)?(this.width=document.body.clientWidth,this.height="100%"):this.width=this.getWidth(t.width,t.element)}return t.prototype.hideSlot=function(){this.domElements.wrapper.style.display="none"},t.prototype.showSlot=function(){this.domElements.wrapper.style.display="block"},t.prototype.initDom=function(t,e){var n=this;return this.callFunc("playerLoad"),new Promise((function(i,o){var r;try{var a=void 0;"stick"===(null===(r=n.config.fly)||void 0===r?void 0:r.mode)?(a=document.createElement("div"),document.body.append(a)):a=document.querySelector(t);var s=document.createElement("div"),d=document.createElement("div"),c=document.createElement("video");n.topBar=n.getHtml(n.htmlString);var p={element:a,slot:d,wrapper:s,config:n.config,width:n.width,resizeAd:n.resizeAd.bind(n),resumeAd:n.resumeAd.bind(n),videoStatusPlay:n.getAdStatus.bind(n),playerClose:n.config.playerClose};n.setStyle({slot:d,wrapper:s,videoSlot:c,element:a,topBar:n.topBar},e),s.append(d),a.append(s),n.fly=new ue(p),n.fly.start(),n.domElements={slot:d,videoSlot:c,element:a,wrapper:s},n.slot=d,i(n.domElements)}catch(t){o(t)}}))},t.prototype.selectAd=function(t,e){var n=this;return this.showSlot(),new Promise((function(i,o){var a,s;n.visibility=new r(e.slot,n.SetVisibilityState.bind(n)),n.selectAdReady=i,n.stopSelectAd=o,n.vpaidMediator.setInstrument(n),n.fly.getStatus()?(a=C.isMobile()?n.slot.parentElement.clientWidth+"px":n.config.fly.width+"px"||0,s=parseInt(a)/16*9+"px"):C.isMobile()?(a=n.slot.parentElement.clientWidth+"px",s=parseInt(a)/16*9+"px"):(a=n.slot.parentElement.clientWidth+"px",s=n.slot.parentElement.clientWidth/16*9+"px"),n.vpaidMediator.initAd(a,s,A.normal,1e4,{AdParameters:JSON.stringify(le(le({},t),{advertCount:1}))},e)}))},t.prototype.playAd=function(){var t=this;return new Promise((function(e){t.vpaidMediator.startAd(),t.playAdEnd=e}))},t.prototype.close=function(t){var e;null===(e=this.vpaidMediator)||void 0===e||e.stopAd(),null==t||t.remove()},t.prototype.error=function(t){o.info("contentRoll instrument error: ",t),this.callFunc("adError",t)},t.prototype.errorEmpty=function(){o.info("contentRoll instrument empty"),this.callFunc("adEmpty")},t.prototype.getHtml=function(t){return(new DOMParser).parseFromString(t,"text/html").getElementById("mv-top-bar")},t.prototype.callFunc=function(t){for(var e,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];"function"==typeof this.config[t]&&((e=this.config)[t].apply(e,n),o.info('contentRoll callBack "'.concat(t,'"')))},t.prototype.getWidth=function(t,e){if(!e)return document.body.clientWidth;var n=parseInt(t),i=document.querySelector(e);return/%/.test(t)?i.clientWidth*(n/100):n},t.prototype.receiveMessage=function(t){try{JSON.parse(t.data).integration&&(this.isIntegration=!0)}catch(t){}},t.prototype.setStyle=function(t,e){var n=this,i=t.slot,o=t.wrapper,r=t.videoSlot;t.element,t.topBar;o.style.height=null,o.style.width="100%",e.indexOf("%")>=0?o.style.width=e:!1===isNaN(+e)&&(o.style.width=e+"px"),i.style.width="100%",i.style.height="100%",i.id="mv-slot",i.style.position="relative",i.style.margin="auto",i.style.padding="0",r.style.width="100%",r.style.height="100%",r.id="mv-video-slot",r.style.position="absolute",o.style.display="none",o.id="mv-wrapper",o.style.margin="auto",o.onmouseover=function(){document.body.clientWidth<600||"onhover"!==n.config.sound||n.isIntegration||n.vpaidMediator.SetAdVolume(.5)},o.onmouseout=function(){document.body.clientWidth<600||"onhover"!==n.config.sound||n.isIntegration||n.vpaidMediator.SetAdVolume(0)}},t.prototype.getAdStatus=function(){return this.videoStatusPlay},t.prototype.isVisible=function(t){var e=t.getBoundingClientRect(),n=document.documentElement.clientHeight,i=e.top>0&&e.top<n,o=e.bottom<n&&e.bottom>0;return i||o},t.prototype.pauseAd=function(){this.vpaidMediator.pauseAd()},t.prototype.resumeAd=function(){this.vpaidMediator.resumeAd()},t.prototype.resizeAd=function(t,e,n){var i;null===(i=this.vpaidMediator)||void 0===i||i.resizeAd(t,e,n)},t.prototype.AdLoaded=function(){o.info('contentRoll instrument receive event "AdLoaded"'),this.selectAdReady(),this.callFunc("adLoad")},t.prototype.AdStarted=function(){var t=this;this.fly.closeTimer=setTimeout((function(){t.fly.IsCanRenderCloseButton=!0,t.fly.fly&&t.fly.showClose()}),1e3*(this.config.fly.closeSecOffset||30)),this.videoStatusPlay=!0,o.info('contentRoll instrument receive event "AdStarted"'),this.callFunc("adStart"),this.topBar.style.display="flex",this.fly.getStatus()?(C.isMobile()?this.slot.style.width=this.slot.parentElement.clientWidth+"px":this.slot.style.width=this.config.fly.width+"px"||0,this.slot.style.height=parseInt(this.slot.style.width)/16*9+"px"):(C.isMobile(),this.slot.style.width=this.slot.parentElement.clientWidth+"px",this.slot.style.height=parseInt(this.slot.style.width)/16*9+"px"),this.resizeAd(parseInt(this.slot.style.width),parseInt(this.slot.style.height),A.normal)},t.prototype.AdStopped=function(){var t;o.info('contentRoll instrument receive event "AdStopped"'),clearTimeout(this.fly.closeTimer),this.fly.IsCanRenderCloseButton=!1,this.fly.hideClose(),this.vpaidMediator.stopAd(),null===(t=this.playAdEnd)||void 0===t||t.call(this),this.callFunc("adFinish")},t.prototype.AdSkipped=function(){o.info('contentRoll instrument receive event "AdSkipped"')},t.prototype.AdPaused=function(){o.info('contentRoll instrument receive event "AdPaused"')},t.prototype.AdSizeChange=function(){o.info('contentRoll instrument receive event "AdSizeChange"')},t.prototype.AdPlaying=function(){o.info('contentRoll instrument receive event "AdPlaying"')},t.prototype.AdExpandedChange=function(){o.info('contentRoll instrument receive event "AdExpandedChange"')},t.prototype.AdSkippableStateChange=function(){o.info('contentRoll instrument receive event "AdSkippableStateChange"')},t.prototype.AdLinearChange=function(){o.info('contentRoll instrument receive event "AdLinearChange"')},t.prototype.AdVolumeChange=function(){o.info('contentRoll instrument receive event "AdVolumeChange"')},t.prototype.AdVideoStart=function(){o.info('contentRoll instrument receive event "AdVideoStart"')},t.prototype.AdVideoFirstQuartile=function(){o.info('contentRoll instrument receive event "AdVideoFirstQuartile"'),this.callFunc("ad25")},t.prototype.AdVideoMidPoint=function(){o.info('contentRoll instrument receive event "AdVideoMidPoint"'),this.callFunc("ad50")},t.prototype.AdVideoThirdQuartile=function(){o.info('contentRoll instrument receive event "AdVideoThirdQuartile"'),this.callFunc("ad75")},t.prototype.AdVideoComplete=function(){o.info('contentRoll instrument receive event "AdVideoComplete"'),clearTimeout(this.fly.closeTimer),this.fly.IsCanRenderCloseButton=!1,this.fly.hideClose(),this.callFunc("adCompl")},t.prototype.AdUserAcceptInvitation=function(){o.info('contentRoll instrument receive event "AdUserAcceptInvitation"')},t.prototype.AdUserClose=function(){o.info('contentRoll instrument receive event "AdUserClose"')},t.prototype.AdUserMinimize=function(){o.info('contentRoll instrument receive event "AdUserMinimize"')},t.prototype.AdClickThru=function(){o.info('contentRoll instrument receive event "AdClickThru"')},t.prototype.AdInteraction=function(){o.info('contentRoll instrument receive event "AdInteraction"')},t.prototype.AdError=function(t){o.info('contentRoll instrument receive event "AdError"'),clearTimeout(this.fly.closeTimer),this.fly.IsCanRenderCloseButton=!1,this.fly.hideClose(),this.error(t)},t.prototype.AdLog=function(t){o.info('contentRoll instrument receive event "AdLog"',t)},t.prototype.AdDurationChange=function(){o.info('contentRoll instrument receive event "AdDurationChange"')},t.prototype.AdRemainingTimeChange=function(){o.info('contentRoll instrument receive event "AdRemainingTimeChange"')},t.prototype.AdImpression=function(){o.info('contentRoll instrument receive event "AdImpression"'),this.callFunc("adImp")},t.prototype.AdErrorEmpty=function(){o.info('contentRoll instrument receive event "'.concat(v.AdErrorEmpty,'"')),this.errorEmpty()},t.prototype.SetVisibilityState=function(t){this.vpaidMediator.SetVisibilityState(t)},t}(),fe=function(){return fe=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},fe.apply(this,arguments)},ve=function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function a(t){try{d(i.next(t))}catch(t){r(t)}}function s(t){try{d(i.throw(t))}catch(t){r(t)}}function d(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}d((i=i.apply(t,e||[])).next())}))},Ae=function(t,e){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}},ye=function(){return ye=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},ye.apply(this,arguments)},ge=function(){function t(t){this.config=t,this.vpaidMediator=new ce}return t.prototype.initDom=function(t,e,n){var i=this;return this.width=e,this.height=n,this.element=document.querySelector(t),this.cssBuffer=this.element.style,new Promise((function(t,o){try{var r=document.createElement("div"),a=document.createElement("div");i.setStyle({slot:a,wrapper:r,width:e,height:n}),r.append(a),i.element.append(r),i.slotElements={slot:a,element:i.element,wrapper:r},t(i.slotElements)}catch(t){o(t)}}))},t.prototype.selectAd=function(){var t=this;return this.showSlot(),new Promise(function(e){t.selectAdReady=e,t.vpaidMediator.setInstrument(t),t.vpaidMediator.initAd(t.width,t.height,A.normal,1e4,{AdParameters:JSON.stringify(ye(ye({},t.config),{advertCount:1}))},t.slotElements)}.bind(this))},t.prototype.playAd=function(){var t=this;return this.visibility=new r(this.slotElements.slot,this.SetVisibilityState.bind(this)),new Promise((function(e){t.vpaidMediator.startAd(),t.playAdEnd=e}))},t.prototype.close=function(t){var e;this.element.style=this.cssBuffer,null===(e=this.vpaidMediator)||void 0===e||e.stopAd(),null==t||t.remove()},t.prototype.error=function(t){console.error(t),this.callFunc("adError",t)},t.prototype.callFunc=function(t){for(var e,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];"function"==typeof this.config[t]&&((e=this.config)[t].apply(e,n),o.info('contentRoll callBack "'.concat(t,'"')))},t.prototype.setStyle=function(t){var e=t.slot,n=t.wrapper,i=t.width,o=t.height;e.style.height=o,e.style.width=i,n.style.height=o,n.style.width=i,n.style.display="none",n.style.position="relative"},t.prototype.showSlot=function(){this.slotElements.wrapper.style.display="block"},t.prototype.pauseAd=function(){this.vpaidMediator.pauseAd()},t.prototype.resumeAd=function(){this.vpaidMediator.resumeAd()},t.prototype.resizeAd=function(t,e,n){var i;null===(i=this.vpaidMediator)||void 0===i||i.resizeAd(t,e,n)},t.prototype.AdLoaded=function(){o.info('banner instrument receive event "'.concat(u.AdLoaded,'"')),this.selectAdReady()},t.prototype.AdStarted=function(){o.info('banner instrument receive event "'.concat(u.AdStarted,'"'))},t.prototype.AdStopped=function(){var t;o.info('banner instrument receive event "'.concat(u.AdStopped,'"')),this.vpaidMediator.stopAd(),null===(t=this.playAdEnd)||void 0===t||t.call(this)},t.prototype.AdSkipped=function(){o.info('banner instrument receive event "'.concat(u.AdSkipped,'"'))},t.prototype.AdPaused=function(){var t;o.info('banner instrument receive event "'.concat(u.AdPaused,'"')),null===(t=this.vpaidMediator)||void 0===t||t.AdPaused()},t.prototype.AdSizeChange=function(){o.info('banner instrument receive event "'.concat(u.AdSizeChange,'"'))},t.prototype.AdPlaying=function(){o.info('banner instrument receive event "'.concat(u.AdPlaying,'"'))},t.prototype.AdExpandedChange=function(){o.info('banner instrument receive event "'.concat(u.AdExpandedChange,'"'))},t.prototype.AdSkippableStateChange=function(){o.info('banner instrument receive event "'.concat(u.AdSkippableStateChange,'"'))},t.prototype.AdLinearChange=function(){o.info('banner instrument receive event "'.concat(u.AdLinearChange,'"'))},t.prototype.AdVolumeChange=function(){o.info('banner instrument receive event "'.concat(u.AdVolumeChange,'"'))},t.prototype.AdVideoStart=function(){o.info('banner instrument receive event "'.concat(u.AdVideoStart,'"'))},t.prototype.AdVideoFirstQuartile=function(){o.info('banner instrument receive event "'.concat(u.AdVideoFirstQuartile,'"'))},t.prototype.AdVideoMidPoint=function(){o.info('banner instrument receive event "'.concat(u.AdVideoMidpoint,'"'))},t.prototype.AdVideoThirdQuartile=function(){o.info('banner instrument receive event "'.concat(u.AdVideoThirdQuartile,'"'))},t.prototype.AdVideoComplete=function(){o.info('banner instrument receive event "'.concat(u.AdVideoComplete,'"'))},t.prototype.AdUserAcceptInvitation=function(){o.info('banner instrument receive event "'.concat(u.AdUserAcceptInvitation,'"'))},t.prototype.AdUserClose=function(){o.info('banner instrument receive event "'.concat(u.AdUserClose,'"'))},t.prototype.AdUserMinimize=function(){o.info('banner instrument receive event "'.concat(u.AdUserMinimize,'"'))},t.prototype.AdClickThru=function(){o.info('banner instrument receive event "'.concat(u.AdClickThru,'"'))},t.prototype.AdInteraction=function(){o.info('banner instrument receive event "'.concat(u.AdInteraction,'"'))},t.prototype.AdError=function(t){o.info('banner instrument receive event "'.concat(u.AdError,'"')),this.error(t)},t.prototype.AdLog=function(t){o.info('banner instrument receive event "'.concat(u.AdLog,'"'),t)},t.prototype.AdDurationChange=function(){o.info('banner instrument receive event "'.concat(u.AdDurationChange,'"'))},t.prototype.AdRemainingTimeChange=function(){o.info('banner instrument receive event "'.concat(u.AdRemainingTimeChange,'"'))},t.prototype.AdImpression=function(){o.info('banner instrument receive event "'.concat(u.AdImpression,'"'))},t.prototype.AdErrorEmpty=function(){o.info('banner instrument receive event "'.concat(v.AdErrorEmpty,'"')),this.callFunc("adEmpty")},t.prototype.AdFinish=function(){o.info('banner instrument receive event "'.concat(v.AdFinish,'"')),this.callFunc("adFinish")},t.prototype.SetVisibilityState=function(t){this.vpaidMediator.SetVisibilityState(t)},t}(),me=function(){return me=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},me.apply(this,arguments)},Ie=function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function a(t){try{d(i.next(t))}catch(t){r(t)}}function s(t){try{d(i.throw(t))}catch(t){r(t)}}function d(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}d((i=i.apply(t,e||[])).next())}))},Ce=function(t,e){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}},Se=function(){function t(){this.vpaidEvents={},this.vpaidMediator=new ce}return t.prototype.subscribe=function(t,e,n){this.vpaidEvents[e]=t.bind(n)},t.prototype.unsubscribe=function(t,e){this.vpaidEvents[t]=null},t.prototype.handshakeVersion=function(){return o.info("vpaid instrument version"),"2.0"},t.prototype.initAd=function(t,n,i,a,s,d){var u=this;this.visibility=new r(d.slot,this.SetVisibilityState.bind(this)),p.AdriverFPSPixel(),c.Instance().Init(s.AdParameters).then((function(){c.Instance().SetVersion("4c1ea88"),c.Instance().SetInstrument(e.VastVPaid),c.Instance().SetSlot(c.Instance().GetSlot()),o.backend("init version ".concat(c.Instance().GetVersion()," instrument ").concat(c.Instance().GetInstrument()," slot ").concat(c.Instance().GetSlot()))})).finally((function(){u.vpaidMediator.setInstrument(u),u.vpaidMediator.initAd(t,n,i,a,s,d)}))},t.prototype.getAdLinear=function(){var t=this.vpaidMediator.GetAdLinear();return o.info('vpaid instrument get "'.concat(f.getAdLinear,'" -> ').concat(t)),t},t.prototype.getAdWidth=function(){var t=this.vpaidMediator.GetAdWidth();return o.info('vpaid instrument get "'.concat(f.getAdWidth,'" -> ').concat(t)),t},t.prototype.getAdHeight=function(){var t=this.vpaidMediator.GetAdHeight();return o.info('vpaid instrument get "'.concat(f.getAdHeight,'" -> ').concat(t)),t},t.prototype.getAdExpanded=function(){var t=this.vpaidMediator.GetAdExpanded();return o.info('vpaid instrument get "'.concat(f.getAdExpanded,'" -> ').concat(t)),t},t.prototype.getAdSkippableState=function(){var t=this.vpaidMediator.GetAdSkippableState();return o.info('vpaid instrument get "'.concat(f.getAdSkippableState,'" -> ').concat(t)),t},t.prototype.getAdRemainingTime=function(){var t=this.vpaidMediator.GetAdRemainingTime();return o.info('vpaid instrument get "'.concat(f.getAdRemainingTime,'" -> ').concat(t)),t},t.prototype.getAdDuration=function(){var t=this.vpaidMediator.GetAdDuration();return o.info('vpaid instrument get "'.concat(f.getAdDuration,'" -> ').concat(t)),t},t.prototype.getAdCompanions=function(){var t=this.vpaidMediator.GetAdCompanions();return o.info('vpaid instrument get "'.concat(f.getAdCompanions,'" -> ').concat(t)),t},t.prototype.setAdVolume=function(t){o.info('vpaid instrument set "'.concat(f.setAdVolume,'" ').concat(t)),this.vpaidMediator.SetAdVolume(t)},t.prototype.getAdVolume=function(){var t=this.vpaidMediator.GetAdVolume();return o.info('vpaid instrument get "'.concat(f.getAdVolume,'" -> ').concat(t)),t},t.prototype.getAdIcons=function(){var t=this.vpaidMediator.GetAdIcons();return o.info('vpaid instrument get "'.concat(f.getAdIcons,'" -> ').concat(t)),t},t.prototype.startAd=function(){o.info('vpaid instrument send event "startAd"'),this.vpaidMediator.startAd()},t.prototype.stopAd=function(){o.info('vpaid instrument send event "stopAd"'),this.vpaidMediator.stopAd()},t.prototype.resizeAd=function(t,e,n){o.info('vpaid instrument send event "resizeAd"'),this.vpaidMediator.resizeAd(t,e,n)},t.prototype.pauseAd=function(){o.info('vpaid instrument send event "pauseAd"'),this.vpaidMediator.pauseAd()},t.prototype.resumeAd=function(){o.info('vpaid instrument send event "resumeAd"'),this.vpaidMediator.resumeAd()},t.prototype.expandAd=function(){o.info('vpaid instrument send event "expandAd"'),this.vpaidMediator.expandAd()},t.prototype.collapseAd=function(){o.info('vpaid instrument send event "collapseAd"'),this.vpaidMediator.collapseAd()},t.prototype.skipAd=function(){o.info('vpaid instrument send event "skipAd"'),this.vpaidMediator.skipAd()},t.prototype.AdLoaded=function(t){if(t){o.info('vpaid instrument receive event "AdLoaded"');try{this.vpaidEvents[u.AdLoaded]()}catch(t){o.info('vpaid instrument event "AdLoaded" exception:',t)}}},t.prototype.AdStarted=function(t){if(t){o.info('vpaid instrument receive event "AdStarted"');try{this.vpaidEvents[u.AdStarted]()}catch(t){o.info('vpaid instrument event "AdStarted" exception:',t.message)}}},t.prototype.AdStopped=function(t){if(t){o.info('vpaid instrument receive event "AdStopped"');try{this.vpaidEvents[u.AdStopped]()}catch(t){o.info('vpaid instrument event "AdStopped" exception:',t.message)}}},t.prototype.AdSkipped=function(t){if(t){o.info('vpaid instrument receive event "AdSkipped"');try{this.vpaidEvents[u.AdSkipped]()}catch(t){o.info('vpaid instrument event "AdSkipped" exception:',t.message)}}},t.prototype.AdPaused=function(t){if(t){o.info('vpaid instrument receive event "AdPaused"');try{this.vpaidEvents[u.AdPaused]()}catch(t){o.info('vpaid instrument event "AdPaused" exception:',t.message)}}},t.prototype.AdSizeChange=function(t){if(t){o.info('vpaid instrument receive event "AdSizeChange"');try{this.vpaidEvents[u.AdSizeChange]()}catch(t){o.info('vpaid instrument event "AdSizeChange" exception:',t.message)}}},t.prototype.AdPlaying=function(t){if(t){o.info('vpaid instrument receive event "AdPlaying"');try{this.vpaidEvents[u.AdPlaying]()}catch(t){o.info('vpaid instrument event "AdPlaying" exception:',t.message)}}},t.prototype.AdExpandedChange=function(t){if(t){o.info('vpaid instrument receive event "AdExpandedChange"');try{this.vpaidEvents[u.AdExpandedChange]()}catch(t){o.info('vpaid instrument event "AdExpandedChange" exception:',t.message)}}},t.prototype.AdSkippableStateChange=function(t){if(t){o.info('vpaid instrument receive event "AdSkippableStateChange"');try{this.vpaidEvents[u.AdSkippableStateChange]()}catch(t){o.info('vpaid instrument event "AdSkippableStateChange" exception:',t.message)}}},t.prototype.AdLinearChange=function(t){if(t){o.info('vpaid instrument receive event "AdLinearChange"');try{this.vpaidEvents[u.AdLinearChange]()}catch(t){o.info('vpaid instrument event "AdLinearChange" exception:',t.message)}}},t.prototype.AdVolumeChange=function(t){if(t)try{o.info('vpaid instrument receive event "AdVolumeChange"'),this.vpaidEvents[u.AdVolumeChange]()}catch(t){o.info('vpaid instrument event "AdVolumeChange" exception:',t.message)}},t.prototype.AdVideoStart=function(t){if(t){o.info('vpaid instrument receive event "AdVideoStart"');try{this.vpaidEvents[u.AdVideoStart]()}catch(t){o.info('vpaid instrument event "AdVideoStart" exception:',t.message)}}},t.prototype.AdVideoFirstQuartile=function(t){if(t){o.info('vpaid instrument receive event "AdVideoFirstQuartile"');try{this.vpaidEvents[u.AdVideoFirstQuartile]()}catch(t){o.info('vpaid instrument event "AdVideoFirstQuartile" exception:',t.message)}}},t.prototype.AdVideoMidPoint=function(t){if(t){o.info('vpaid instrument receive event "AdVideoMidpoint"');try{this.vpaidEvents[u.AdVideoMidpoint]()}catch(t){o.info('vpaid instrument event "AdVideoMidpoint" exception:',t.message)}}},t.prototype.AdVideoThirdQuartile=function(t){if(t){o.info('vpaid instrument receive event "AdVideoThirdQuartile"');try{this.vpaidEvents[u.AdVideoThirdQuartile]()}catch(t){o.info('vpaid instrument event "AdVideoThirdQuartile" exception:',t.message)}}},t.prototype.AdVideoComplete=function(t){if(t){o.info('vpaid instrument receive event "AdVideoComplete"');try{this.vpaidEvents[u.AdVideoComplete]()}catch(t){o.info('vpaid instrument event "AdVideoComplete" exception:',t.message)}}},t.prototype.AdUserAcceptInvitation=function(t){if(t){o.info('vpaid instrument receive event "AdUserAcceptInteraction"');try{this.vpaidEvents[u.AdUserAcceptInvitation]()}catch(t){o.info('vpaid instrument event "AdUserAcceptInteraction" exception:',t.message)}}},t.prototype.AdUserClose=function(t){if(t){o.info('vpaid instrument receive event "AdUserClose"');try{this.vpaidEvents[u.AdUserClose]()}catch(t){o.info('vpaid instrument event "AdUserClose" exception:',t.message)}}},t.prototype.AdUserMinimize=function(t){if(t){o.info('vpaid instrument receive event "AdUserMinimize"');try{this.vpaidEvents[u.AdUserMinimize]()}catch(t){o.info('vpaid instrument event "AdUserMinimize" exception:',t.message)}}},t.prototype.AdClickThru=function(t){if(t){o.info('vpaid instrument receive event "AdClickThru"');try{this.vpaidEvents[u.AdClickThru]()}catch(t){o.info('vpaid instrument event "AdClickThru" exception:',t.message)}}},t.prototype.AdInteraction=function(t){if(t){o.info('vpaid instrument receive event "AdInteraction"');try{this.vpaidEvents[u.AdInteraction]()}catch(t){o.info('vpaid instrument event "AdInteraction" exception:',t.message)}}},t.prototype.AdError=function(t){if(t){o.info('vpaid instrument receive event "AdError"');try{this.vpaidEvents[u.AdError]()}catch(t){o.info('vpaid instrument event "AdError" exception:',t.message)}}},t.prototype.AdLog=function(t){if(t){o.info('vpaid instrument receive event "AdLog"');try{this.vpaidEvents[u.AdLog]()}catch(t){o.info('vpaid instrument event "AdLog" exception:',t.message)}}},t.prototype.AdDurationChange=function(t){if(t){o.info('vpaid instrument receive event "AdDurationChange"');try{this.vpaidEvents[u.AdDurationChange]()}catch(t){o.info('vpaid instrument event "AdDurationChange" exception:',t.message)}}},t.prototype.AdRemainingTimeChange=function(t){if(t){o.info('vpaid instrument receive event "AdRemainingTimeChange"');try{this.vpaidEvents[u.AdRemainingTimeChange]()}catch(t){o.info('vpaid instrument event "AdRemainingTime" exception:',t.message)}}},t.prototype.AdImpression=function(t){if(t){o.info('vpaid instrument receive event "AdImpression"');try{this.vpaidEvents[u.AdImpression]()}catch(t){o.info('vpaid instrument event "AdImpression" exception:',t.message)}}},t.prototype.AdErrorEmpty=function(t){if(t){o.info('vpaid instrument receive event "'.concat(v.AdErrorEmpty,'"'));try{this.vpaidEvents[u.AdError](303)}catch(t){o.info('vpaid instrument event "'.concat(v.AdErrorEmpty,'" exception:'),t.message)}}},t.prototype.SetVisibilityState=function(t){this.vpaidMediator.SetVisibilityState(t)},t}();window.addContentRoll=function(t){return ve(void 0,void 0,void 0,(function(){return Ae(this,(function(n){return pe.ExactOnePlayer(t)&&C.isExactOne()||(p.AdriverFPSPixel(),p.MailFpIdPixel(),c.Instance().Init(JSON.stringify(fe({},t))).then((function(){c.Instance().SetVersion("4c1ea88"),c.Instance().SetInstrument(e.ContentRoll),c.Instance().SetSlot(i.inpage),c.Instance().IsInstrumentInFlyMode()&&c.Instance().SetSlot(i.sticky),o.backend("init version ".concat(c.Instance().GetVersion()))})).finally((function(){return ve(void 0,void 0,void 0,(function(){var e,n,i;return Ae(this,(function(r){switch(r.label){case 0:if(0===c.Instance().GetPlacement())return o.backend("zero placement error",c.Instance().GetInstrumentName(),c.Instance().GetSlotName()),[2];e=new he(t),r.label=1;case 1:return r.trys.push([1,5,6,7]),[4,e.initDom(t.element,t.width)];case 2:return n=r.sent(),[4,e.selectAd(t,n)];case 3:return r.sent(),[4,e.playAd()];case 4:return r.sent(),[3,7];case 5:return i=r.sent(),e.error(i),[3,7];case 6:return e.close(null==n?void 0:n.wrapper),[7];case 7:return[2]}}))}))}))),[2]}))}))},window.addBanner=function(t,n){return void 0===n&&(n={}),Ie(void 0,void 0,void 0,(function(){return Ce(this,(function(n){return p.AdriverFPSPixel(),p.MailFpIdPixel(),c.Instance().setConfig(t).Init(JSON.stringify(me({},t))).then((function(){c.Instance().SetVersion("4c1ea88"),c.Instance().SetInstrument(e.Banner),c.Instance().SetSlot(C.ConvertSizeToBannerSlot(t.width,t.height)),o.backend("init version ".concat(c.Instance().GetVersion()))})).finally((function(){return Ie(void 0,void 0,void 0,(function(){var e,n,i,r,a;return Ce(this,(function(s){switch(s.label){case 0:if(0===c.Instance().GetPlacement())return o.backend("zero placement error",c.Instance().GetInstrumentName(),c.Instance().GetSlotName()),[2];e=new ge(t),s.label=1;case 1:return s.trys.push([1,3,4,5]),[4,e.initDom(t.element,t.width,t.height)];case 2:n=s.sent();try{i=function(t){return Ie(void 0,void 0,void 0,(function(){var n;return Ce(this,(function(i){switch(i.label){case 0:return(null===(n=t[0])||void 0===n?void 0:n.isIntersecting)?(r.unobserve(e.element),[4,e.selectAd()]):[2];case 1:return i.sent(),[4,e.playAd()];case 2:return i.sent(),[2]}}))}))},(r=new IntersectionObserver(i,{threshold:.1})).observe(e.element)}catch(t){}return[3,5];case 3:return a=s.sent(),e.error(a),[3,5];case 4:return t.closeEnd&&e.close(null==n?void 0:n.wrapper),[7];case 5:return[2]}}))}))})),[2]}))}))},window.getVPAIDAd=function(){return se||(se=new Se),se}})()})();